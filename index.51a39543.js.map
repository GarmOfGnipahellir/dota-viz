{"mappings":"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","sources":["node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/util.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/options.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/create-element.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/component.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/constants.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/diff/children.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/diff/props.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/diff/index.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/render.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/src/diff/catch-error.js","node_modules/.pnpm/preact@10.15.0/node_modules/preact/jsx-runtime/src/index.js","node_modules/.pnpm/pts@0.11.3/node_modules/pts/dist/index.mjs","src/graph.ts","src/index.tsx"],"sourcesContent":["import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\nimport { isArray } from '../util';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tif (\n\t\t\t\ttypeof newParentVNode.type == 'function' &&\n\t\t\t\toldChildren[i]._dom != null &&\n\t\t\t\toldChildren[i]._dom == newParentVNode._nextDom\n\t\t\t) {\n\t\t\t\t// If the newParentVNode.__nextDom points to a dom node that is about to\n\t\t\t\t// be unmounted, then get the next sibling of that vnode and set\n\t\t\t\t// _nextDom to it\n\t\t\t\tnewParentVNode._nextDom = getLastDom(oldParentVNode).nextSibling;\n\t\t\t}\n\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(parentDom, vnode, vnode, c, vnode._dom, oldDom);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 1\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {import('../internal').VNode} vnode\n */\nfunction getLastDom(vnode) {\n\tif (vnode.type == null || typeof vnode.type === 'string') {\n\t\treturn vnode._dom;\n\t}\n\n\tif (vnode._children) {\n\t\tfor (let i = vnode._children.length - 1; i >= 0; i--) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child) {\n\t\t\t\tlet lastDom = getLastDom(child);\n\t\t\t\tif (lastDom) {\n\t\t\t\t\treturn lastDom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'width' &&\n\t\t\tname !== 'height' &&\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname !== 'rowSpan' &&\n\t\t\tname !== 'colSpan' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] === '-')) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\treturn this._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// In cases of bailing due to strict-equality we have to reset force as well\n\t\t\t\t\tc._force = false;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options, Fragment } from 'preact';\n\n/** @typedef {import('preact').VNode} VNode */\n\nlet vnodeId = 0;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = {},\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'ref') {\n\t\t\tref = props[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment\n};\n","// src/LinearAlgebra.ts\nvar Vec = class {\n  static add(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] += b;\n    } else {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] += b[i] || 0;\n    }\n    return a;\n  }\n  static subtract(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] -= b;\n    } else {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] -= b[i] || 0;\n    }\n    return a;\n  }\n  static multiply(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] *= b;\n    } else {\n      if (a.length != b.length) {\n        throw new Error(`Cannot do element-wise multiply since the array lengths don't match: ${a.toString()} multiply-with ${b.toString()}`);\n      }\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] *= b[i];\n    }\n    return a;\n  }\n  static divide(a, b) {\n    if (typeof b == \"number\") {\n      if (b === 0)\n        throw new Error(\"Cannot divide by zero\");\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] /= b;\n    } else {\n      if (a.length != b.length) {\n        throw new Error(`Cannot do element-wise divide since the array lengths don't match. ${a.toString()} divide-by ${b.toString()}`);\n      }\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] /= b[i];\n    }\n    return a;\n  }\n  static dot(a, b) {\n    if (a.length != b.length)\n      throw new Error(\"Array lengths don't match\");\n    let d = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      d += a[i] * b[i];\n    }\n    return d;\n  }\n  static cross2D(a, b) {\n    return a[0] * b[1] - a[1] * b[0];\n  }\n  static cross(a, b) {\n    return new Pt(a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]);\n  }\n  static magnitude(a) {\n    return Math.sqrt(Vec.dot(a, a));\n  }\n  static unit(a, magnitude = void 0) {\n    let m = magnitude === void 0 ? Vec.magnitude(a) : magnitude;\n    if (m === 0)\n      return Pt.make(a.length);\n    return Vec.divide(a, m);\n  }\n  static abs(a) {\n    return Vec.map(a, Math.abs);\n  }\n  static floor(a) {\n    return Vec.map(a, Math.floor);\n  }\n  static ceil(a) {\n    return Vec.map(a, Math.ceil);\n  }\n  static round(a) {\n    return Vec.map(a, Math.round);\n  }\n  static max(a) {\n    let m = Number.MIN_VALUE;\n    let index = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      m = Math.max(m, a[i]);\n      if (m === a[i])\n        index = i;\n    }\n    return { value: m, index };\n  }\n  static min(a) {\n    let m = Number.MAX_VALUE;\n    let index = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      m = Math.min(m, a[i]);\n      if (m === a[i])\n        index = i;\n    }\n    return { value: m, index };\n  }\n  static sum(a) {\n    let s = 0;\n    for (let i = 0, len = a.length; i < len; i++)\n      s += a[i];\n    return s;\n  }\n  static map(a, fn) {\n    for (let i = 0, len = a.length; i < len; i++) {\n      a[i] = fn(a[i], i, a);\n    }\n    return a;\n  }\n};\nvar Mat = class {\n  constructor() {\n    this.reset();\n  }\n  get value() {\n    return this._33;\n  }\n  get domMatrix() {\n    return new DOMMatrix(Mat.toDOMMatrix(this._33));\n  }\n  reset() {\n    this._33 = Mat.scale2DMatrix(1, 1);\n  }\n  scale2D(val, at = [0, 0]) {\n    const m = Mat.scaleAt2DMatrix(val[0] || 1, val[1] || 1, at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  rotate2D(ang, at = [0, 0]) {\n    const m = Mat.rotateAt2DMatrix(Math.cos(ang), Math.sin(ang), at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  translate2D(val) {\n    const m = Mat.translate2DMatrix(val[0] || 0, val[1] || 0);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  shear2D(val, at = [0, 0]) {\n    const m = Mat.shearAt2DMatrix(Math.tan(val[0] || 0), Math.tan(val[1] || 1), at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  static add(a, b) {\n    if (typeof b != \"number\") {\n      if (a[0].length != b[0].length)\n        throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n      if (a.length != b.length)\n        throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n    }\n    let g = new Group();\n    let isNum = typeof b == \"number\";\n    for (let i = 0, len = a.length; i < len; i++) {\n      g.push(a[i].$add(isNum ? b : b[i]));\n    }\n    return g;\n  }\n  static multiply(a, b, transposed = false, elementwise = false) {\n    let g = new Group();\n    if (typeof b != \"number\") {\n      if (elementwise) {\n        if (a.length != b.length)\n          throw new Error(\"Cannot multiply matrix element-wise because the matrices' sizes don't match.\");\n        for (let ai = 0, alen = a.length; ai < alen; ai++) {\n          g.push(a[ai].$multiply(b[ai]));\n        }\n      } else {\n        if (!transposed && a[0].length != b.length)\n          throw new Error(\"Cannot multiply matrix if rows in matrix-a don't match columns in matrix-b.\");\n        if (transposed && a[0].length != b[0].length)\n          throw new Error(\"Cannot multiply matrix if transposed and the columns in both matrices don't match.\");\n        if (!transposed)\n          b = Mat.transpose(b);\n        for (let ai = 0, alen = a.length; ai < alen; ai++) {\n          let p = Pt.make(b.length, 0);\n          for (let bi = 0, blen = b.length; bi < blen; bi++) {\n            p[bi] = Vec.dot(a[ai], b[bi]);\n          }\n          g.push(p);\n        }\n      }\n    } else {\n      for (let ai = 0, alen = a.length; ai < alen; ai++) {\n        g.push(a[ai].$multiply(b));\n      }\n    }\n    return g;\n  }\n  static zipSlice(g, index, defaultValue = false) {\n    let z = [];\n    for (let i = 0, len = g.length; i < len; i++) {\n      if (g[i].length - 1 < index && defaultValue === false)\n        throw `Index ${index} is out of bounds`;\n      z.push(g[i][index] || defaultValue);\n    }\n    return new Pt(z);\n  }\n  static zip(g, defaultValue = false, useLongest = false) {\n    let ps = new Group();\n    let len = useLongest ? g.reduce((a, b) => Math.max(a, b.length), 0) : g[0].length;\n    for (let i = 0; i < len; i++) {\n      ps.push(Mat.zipSlice(g, i, defaultValue));\n    }\n    return ps;\n  }\n  static transpose(g, defaultValue = false, useLongest = false) {\n    return Mat.zip(g, defaultValue, useLongest);\n  }\n  static toDOMMatrix(m) {\n    return [m[0][0], m[0][1], m[1][0], m[1][1], m[2][0], m[2][1]];\n  }\n  static transform2D(pt, m) {\n    let x = pt[0] * m[0][0] + pt[1] * m[1][0] + m[2][0];\n    let y = pt[0] * m[0][1] + pt[1] * m[1][1] + m[2][1];\n    return new Pt(x, y);\n  }\n  static scale2DMatrix(x, y) {\n    return new Group(\n      new Pt(x, 0, 0),\n      new Pt(0, y, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static rotate2DMatrix(cosA, sinA) {\n    return new Group(\n      new Pt(cosA, sinA, 0),\n      new Pt(-sinA, cosA, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static shear2DMatrix(tanX, tanY) {\n    return new Group(\n      new Pt(1, tanX, 0),\n      new Pt(tanY, 1, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static translate2DMatrix(x, y) {\n    return new Group(\n      new Pt(1, 0, 0),\n      new Pt(0, 1, 0),\n      new Pt(x, y, 1)\n    );\n  }\n  static scaleAt2DMatrix(sx, sy, at) {\n    let m = Mat.scale2DMatrix(sx, sy);\n    m[2][0] = -at[0] * sx + at[0];\n    m[2][1] = -at[1] * sy + at[1];\n    return m;\n  }\n  static rotateAt2DMatrix(cosA, sinA, at) {\n    let m = Mat.rotate2DMatrix(cosA, sinA);\n    m[2][0] = at[0] * (1 - cosA) + at[1] * sinA;\n    m[2][1] = at[1] * (1 - cosA) - at[0] * sinA;\n    return m;\n  }\n  static shearAt2DMatrix(tanX, tanY, at) {\n    let m = Mat.shear2DMatrix(tanX, tanY);\n    m[2][0] = -at[1] * tanY;\n    m[2][1] = -at[0] * tanX;\n    return m;\n  }\n  static reflectAt2DMatrix(p1, p2) {\n    let intercept = Line.intercept(p1, p2);\n    if (intercept == void 0) {\n      return [\n        new Pt([-1, 0, 0]),\n        new Pt([0, 1, 0]),\n        new Pt([p1[0] + p2[0], 0, 1])\n      ];\n    } else {\n      let yi = intercept.yi;\n      let ang2 = Math.atan(intercept.slope) * 2;\n      let cosA = Math.cos(ang2);\n      let sinA = Math.sin(ang2);\n      return [\n        new Pt([cosA, sinA, 0]),\n        new Pt([sinA, -cosA, 0]),\n        new Pt([-yi * sinA, yi + yi * cosA, 1])\n      ];\n    }\n  }\n};\n\n// src/Op.ts\nvar _errorLength = (obj, param = \"expected\") => Util.warn(\"Group's length is less than \" + param, obj);\nvar _errorOutofBound = (obj, param = \"\") => Util.warn(`Index ${param} is out of bound in Group`, obj);\nvar Line = class {\n  static fromAngle(anchor, angle, magnitude) {\n    let g = new Group(new Pt(anchor), new Pt(anchor));\n    g[1].toAngle(angle, magnitude, true);\n    return g;\n  }\n  static slope(p1, p2) {\n    return p2[0] - p1[0] === 0 ? void 0 : (p2[1] - p1[1]) / (p2[0] - p1[0]);\n  }\n  static intercept(p1, p2) {\n    if (p2[0] - p1[0] === 0) {\n      return void 0;\n    } else {\n      let m = (p2[1] - p1[1]) / (p2[0] - p1[0]);\n      let c = p1[1] - m * p1[0];\n      return { slope: m, yi: c, xi: m === 0 ? void 0 : -c / m };\n    }\n  }\n  static sideOfPt2D(line, pt) {\n    let _line = Util.iterToArray(line);\n    return (_line[1][0] - _line[0][0]) * (pt[1] - _line[0][1]) - (pt[0] - _line[0][0]) * (_line[1][1] - _line[0][1]);\n  }\n  static collinear(p1, p2, p3, threshold = 0.01) {\n    let a = new Pt(0, 0, 0).to(p1).$subtract(p2);\n    let b = new Pt(0, 0, 0).to(p1).$subtract(p3);\n    return a.$cross(b).divide(1e3).equals(new Pt(0, 0, 0), threshold);\n  }\n  static magnitude(line) {\n    let _line = Util.iterToArray(line);\n    return _line.length >= 2 ? _line[1].$subtract(_line[0]).magnitude() : 0;\n  }\n  static magnitudeSq(line) {\n    let _line = Util.iterToArray(line);\n    return _line.length >= 2 ? _line[1].$subtract(_line[0]).magnitudeSq() : 0;\n  }\n  static perpendicularFromPt(line, pt, asProjection = false) {\n    let _line = Util.iterToArray(line);\n    if (_line[0].equals(_line[1]))\n      return void 0;\n    let a = _line[0].$subtract(_line[1]);\n    let b = _line[1].$subtract(pt);\n    let proj = b.$subtract(a.$project(b));\n    return asProjection ? proj : proj.$add(pt);\n  }\n  static distanceFromPt(line, pt) {\n    let _line = Util.iterToArray(line);\n    let projectionVector = Line.perpendicularFromPt(_line, pt, true);\n    if (projectionVector) {\n      return projectionVector.magnitude();\n    } else {\n      return _line[0].$subtract(pt).magnitude();\n    }\n  }\n  static intersectRay2D(la, lb) {\n    let _la = Util.iterToArray(la);\n    let _lb = Util.iterToArray(lb);\n    let a = Line.intercept(_la[0], _la[1]);\n    let b = Line.intercept(_lb[0], _lb[1]);\n    let pa = _la[0];\n    let pb = _lb[0];\n    if (a == void 0) {\n      if (b == void 0)\n        return void 0;\n      let y1 = -b.slope * (pb[0] - pa[0]) + pb[1];\n      return new Pt(pa[0], y1);\n    } else {\n      if (b == void 0) {\n        let y1 = -a.slope * (pa[0] - pb[0]) + pa[1];\n        return new Pt(pb[0], y1);\n      } else if (b.slope != a.slope) {\n        let px = (a.slope * pa[0] - b.slope * pb[0] + pb[1] - pa[1]) / (a.slope - b.slope);\n        let py = a.slope * (px - pa[0]) + pa[1];\n        return new Pt(px, py);\n      } else {\n        if (a.yi == b.yi) {\n          return new Pt(pa[0], pa[1]);\n        } else {\n          return void 0;\n        }\n      }\n    }\n  }\n  static intersectLine2D(la, lb) {\n    let _la = Util.iterToArray(la);\n    let _lb = Util.iterToArray(lb);\n    let pt = Line.intersectRay2D(_la, _lb);\n    return pt && Geom.withinBound(pt, _la[0], _la[1]) && Geom.withinBound(pt, _lb[0], _lb[1]) ? pt : void 0;\n  }\n  static intersectLineWithRay2D(line, ray) {\n    let _line = Util.iterToArray(line);\n    let _ray = Util.iterToArray(ray);\n    let pt = Line.intersectRay2D(_line, _ray);\n    return pt && Geom.withinBound(pt, _line[0], _line[1]) ? pt : void 0;\n  }\n  static intersectPolygon2D(lineOrRay, poly, sourceIsRay = false) {\n    let _lineOrRay = Util.iterToArray(lineOrRay);\n    let _poly = Util.iterToArray(poly);\n    let fn = sourceIsRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n    let pts = new Group();\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let next = i === len - 1 ? 0 : i + 1;\n      let d = fn([_poly[i], _poly[next]], _lineOrRay);\n      if (d)\n        pts.push(d);\n    }\n    return pts.length > 0 ? pts : void 0;\n  }\n  static intersectLines2D(lines1, lines2, isRay = false) {\n    let group = new Group();\n    let fn = isRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n    for (let l1 of lines1) {\n      for (let l2 of lines2) {\n        let _ip = fn(l1, l2);\n        if (_ip)\n          group.push(_ip);\n      }\n    }\n    return group;\n  }\n  static intersectGridWithRay2D(ray, gridPt) {\n    let _ray = Util.iterToArray(ray);\n    let t = Line.intercept(new Pt(_ray[0]).subtract(gridPt), new Pt(_ray[1]).subtract(gridPt));\n    let g = new Group();\n    if (t && t.xi)\n      g.push(new Pt(gridPt[0] + t.xi, gridPt[1]));\n    if (t && t.yi)\n      g.push(new Pt(gridPt[0], gridPt[1] + t.yi));\n    return g;\n  }\n  static intersectGridWithLine2D(line, gridPt) {\n    let _line = Util.iterToArray(line);\n    let g = Line.intersectGridWithRay2D(_line, gridPt);\n    let gg = new Group();\n    for (let i = 0, len = g.length; i < len; i++) {\n      if (Geom.withinBound(g[i], _line[0], _line[1]))\n        gg.push(g[i]);\n    }\n    return gg;\n  }\n  static intersectRect2D(line, rect) {\n    let _line = Util.iterToArray(line);\n    let _rect = Util.iterToArray(rect);\n    let box = Geom.boundingBox(Group.fromPtArray(_line));\n    if (!Rectangle.hasIntersectRect2D(box, _rect))\n      return new Group();\n    return Line.intersectLines2D([_line], Rectangle.sides(_rect));\n  }\n  static subpoints(line, num) {\n    let _line = Util.iterToArray(line);\n    let pts = new Group();\n    for (let i = 1; i <= num; i++) {\n      pts.push(Geom.interpolate(_line[0], _line[1], i / (num + 1)));\n    }\n    return pts;\n  }\n  static crop(line, size, index = 0, cropAsCircle = true) {\n    let _line = Util.iterToArray(line);\n    let tdx = index === 0 ? 1 : 0;\n    let ls = _line[tdx].$subtract(_line[index]);\n    if (ls[0] === 0 || size[0] === 0)\n      return _line[index];\n    if (cropAsCircle) {\n      let d = ls.unit().multiply(size[1]);\n      return _line[index].$add(d);\n    } else {\n      let rect = Rectangle.fromCenter(_line[index], size);\n      let sides = Rectangle.sides(rect);\n      let sideIdx = 0;\n      if (Math.abs(ls[1] / ls[0]) > Math.abs(size[1] / size[0])) {\n        sideIdx = ls[1] < 0 ? 0 : 2;\n      } else {\n        sideIdx = ls[0] < 0 ? 3 : 1;\n      }\n      return Line.intersectRay2D(sides[sideIdx], _line);\n    }\n  }\n  static marker(line, size, graphic = \"arrow\", atTail = true) {\n    let _line = Util.iterToArray(line);\n    let h = atTail ? 0 : 1;\n    let t = atTail ? 1 : 0;\n    let unit = _line[h].$subtract(_line[t]);\n    if (unit.magnitudeSq() === 0)\n      return new Group();\n    unit.unit();\n    let ps = Geom.perpendicular(unit).multiply(size[0]).add(_line[t]);\n    if (graphic == \"arrow\") {\n      ps.add(unit.$multiply(size[1]));\n      return new Group(_line[t], ps[0], ps[1]);\n    } else {\n      return new Group(ps[0], ps[1]);\n    }\n  }\n  static toRect(line) {\n    let _line = Util.iterToArray(line);\n    return new Group(_line[0].$min(_line[1]), _line[0].$max(_line[1]));\n  }\n};\nvar Rectangle = class {\n  static from(topLeft, widthOrSize, height) {\n    return Rectangle.fromTopLeft(topLeft, widthOrSize, height);\n  }\n  static fromTopLeft(topLeft, widthOrSize, height) {\n    let size = typeof widthOrSize == \"number\" ? [widthOrSize, height || widthOrSize] : widthOrSize;\n    return new Group(new Pt(topLeft), new Pt(topLeft).add(size));\n  }\n  static fromCenter(center, widthOrSize, height) {\n    let half = typeof widthOrSize == \"number\" ? [widthOrSize / 2, (height || widthOrSize) / 2] : new Pt(widthOrSize).divide(2);\n    return new Group(new Pt(center).subtract(half), new Pt(center).add(half));\n  }\n  static toCircle(pts, within = true) {\n    return Circle.fromRect(pts, within);\n  }\n  static toSquare(pts, enclose = false) {\n    let _pts = Util.iterToArray(pts);\n    let s = Rectangle.size(_pts);\n    let m = enclose ? s.maxValue().value : s.minValue().value;\n    return Rectangle.fromCenter(Rectangle.center(_pts), m, m);\n  }\n  static size(pts) {\n    let p = Util.iterToArray(pts);\n    return p[0].$max(p[1]).subtract(p[0].$min(p[1]));\n  }\n  static center(pts) {\n    let p = Util.iterToArray(pts);\n    let min = p[0].$min(p[1]);\n    let max = p[0].$max(p[1]);\n    return min.add(max.$subtract(min).divide(2));\n  }\n  static corners(rect) {\n    let _rect = Util.iterToArray(rect);\n    let p0 = _rect[0].$min(_rect[1]);\n    let p2 = _rect[0].$max(_rect[1]);\n    return new Group(p0, new Pt(p2.x, p0.y), p2, new Pt(p0.x, p2.y));\n  }\n  static sides(rect) {\n    let [p0, p1, p2, p3] = Rectangle.corners(rect);\n    return [\n      new Group(p0, p1),\n      new Group(p1, p2),\n      new Group(p2, p3),\n      new Group(p3, p0)\n    ];\n  }\n  static boundingBox(rects) {\n    let _rects = Util.iterToArray(rects);\n    let merged = Util.flatten(_rects, false);\n    let min = Pt.make(2, Number.MAX_VALUE);\n    let max = Pt.make(2, Number.MIN_VALUE);\n    for (let i = 0, len = merged.length; i < len; i++) {\n      let k = 0;\n      for (let m of merged[i]) {\n        min[k] = Math.min(min[k], m[k]);\n        max[k] = Math.max(max[k], m[k]);\n        if (++k >= 2)\n          break;\n      }\n    }\n    return new Group(min, max);\n  }\n  static polygon(rect) {\n    return Rectangle.corners(rect);\n  }\n  static quadrants(rect, center) {\n    let _rect = Util.iterToArray(rect);\n    let corners = Rectangle.corners(_rect);\n    let _center = center != void 0 ? new Pt(center) : Rectangle.center(_rect);\n    return corners.map((c) => new Group(c, _center).boundingBox());\n  }\n  static halves(rect, ratio = 0.5, asRows = false) {\n    let _rect = Util.iterToArray(rect);\n    let min = _rect[0].$min(_rect[1]);\n    let max = _rect[0].$max(_rect[1]);\n    let mid = asRows ? Num.lerp(min[1], max[1], ratio) : Num.lerp(min[0], max[0], ratio);\n    return asRows ? [new Group(min, new Pt(max[0], mid)), new Group(new Pt(min[0], mid), max)] : [new Group(min, new Pt(mid, max[1])), new Group(new Pt(mid, min[1]), max)];\n  }\n  static withinBound(rect, pt) {\n    let _rect = Util.iterToArray(rect);\n    return Geom.withinBound(pt, _rect[0], _rect[1]);\n  }\n  static hasIntersectRect2D(rect1, rect2, resetBoundingBox = false) {\n    let _rect1 = Util.iterToArray(rect1);\n    let _rect2 = Util.iterToArray(rect2);\n    if (resetBoundingBox) {\n      _rect1 = Geom.boundingBox(_rect1);\n      _rect2 = Geom.boundingBox(_rect2);\n    }\n    if (_rect1[0][0] > _rect2[1][0] || _rect2[0][0] > _rect1[1][0])\n      return false;\n    if (_rect1[0][1] > _rect2[1][1] || _rect2[0][1] > _rect1[1][1])\n      return false;\n    return true;\n  }\n  static intersectRect2D(rect1, rect2) {\n    let _rect1 = Util.iterToArray(rect1);\n    let _rect2 = Util.iterToArray(rect2);\n    if (!Rectangle.hasIntersectRect2D(_rect1, _rect2))\n      return new Group();\n    return Line.intersectLines2D(Rectangle.sides(_rect1), Rectangle.sides(_rect2));\n  }\n};\nvar Circle = class {\n  static fromRect(pts, enclose = false) {\n    let _pts = Util.iterToArray(pts);\n    let r = 0;\n    let min = r = Rectangle.size(_pts).minValue().value / 2;\n    if (enclose) {\n      let max = Rectangle.size(_pts).maxValue().value / 2;\n      r = Math.sqrt(min * min + max * max);\n    } else {\n      r = min;\n    }\n    return new Group(Rectangle.center(_pts), new Pt(r, r));\n  }\n  static fromTriangle(pts, enclose = false) {\n    if (enclose) {\n      return Triangle.circumcircle(pts);\n    } else {\n      return Triangle.incircle(pts);\n    }\n  }\n  static fromCenter(pt, radius) {\n    return new Group(new Pt(pt), new Pt(radius, radius));\n  }\n  static withinBound(pts, pt, threshold = 0) {\n    let _pts = Util.iterToArray(pts);\n    let d = _pts[0].$subtract(pt);\n    return d.dot(d) + threshold < _pts[1].x * _pts[1].x;\n  }\n  static intersectRay2D(circle, ray) {\n    let _pts = Util.iterToArray(circle);\n    let _ray = Util.iterToArray(ray);\n    let d = _ray[0].$subtract(_ray[1]);\n    let f = _pts[0].$subtract(_ray[0]);\n    let a = d.dot(d);\n    let b = f.dot(d);\n    let c = f.dot(f) - _pts[1].x * _pts[1].x;\n    let p = b / a;\n    let q = c / a;\n    let disc = p * p - q;\n    if (disc < 0) {\n      return new Group();\n    } else {\n      let discSqrt = Math.sqrt(disc);\n      let t1 = -p + discSqrt;\n      let p1 = _ray[0].$subtract(d.$multiply(t1));\n      if (disc === 0)\n        return new Group(p1);\n      let t2 = -p - discSqrt;\n      let p2 = _ray[0].$subtract(d.$multiply(t2));\n      return new Group(p1, p2);\n    }\n  }\n  static intersectLine2D(circle, line) {\n    let _pts = Util.iterToArray(circle);\n    let _line = Util.iterToArray(line);\n    let ps = Circle.intersectRay2D(_pts, _line);\n    let g = new Group();\n    if (ps.length > 0) {\n      for (let i = 0, len = ps.length; i < len; i++) {\n        if (Rectangle.withinBound(_line, ps[i]))\n          g.push(ps[i]);\n      }\n    }\n    return g;\n  }\n  static intersectCircle2D(circle1, circle2) {\n    let _pts = Util.iterToArray(circle1);\n    let _circle = Util.iterToArray(circle2);\n    let dv = _circle[0].$subtract(_pts[0]);\n    let dr2 = dv.magnitudeSq();\n    let dr = Math.sqrt(dr2);\n    let ar = _pts[1].x;\n    let br = _circle[1].x;\n    let ar2 = ar * ar;\n    let br2 = br * br;\n    if (dr > ar + br) {\n      return new Group();\n    } else if (dr < Math.abs(ar - br)) {\n      return new Group(_pts[0].clone());\n    } else {\n      let a = (ar2 - br2 + dr2) / (2 * dr);\n      let h = Math.sqrt(ar2 - a * a);\n      let p = dv.$multiply(a / dr).add(_pts[0]);\n      return new Group(\n        new Pt(p.x + h * dv.y / dr, p.y - h * dv.x / dr),\n        new Pt(p.x - h * dv.y / dr, p.y + h * dv.x / dr)\n      );\n    }\n  }\n  static intersectRect2D(circle, rect) {\n    let _pts = Util.iterToArray(circle);\n    let _rect = Util.iterToArray(rect);\n    let sides = Rectangle.sides(_rect);\n    let g = [];\n    for (let i = 0, len = sides.length; i < len; i++) {\n      let ps = Circle.intersectLine2D(_pts, sides[i]);\n      if (ps.length > 0)\n        g.push(ps);\n    }\n    return Util.flatten(g);\n  }\n  static toRect(circle, within = false) {\n    let _pts = Util.iterToArray(circle);\n    let r = _pts[1][0];\n    if (within) {\n      let half = Math.sqrt(r * r) / 2;\n      return new Group(_pts[0].$subtract(half), _pts[0].$add(half));\n    } else {\n      return new Group(_pts[0].$subtract(r), _pts[0].$add(r));\n    }\n  }\n  static toTriangle(circle, within = true) {\n    let _pts = Util.iterToArray(circle);\n    if (within) {\n      let ang = -Math.PI / 2;\n      let inc = Math.PI * 2 / 3;\n      let g = new Group();\n      for (let i = 0; i < 3; i++) {\n        g.push(_pts[0].clone().toAngle(ang, _pts[1][0], true));\n        ang += inc;\n      }\n      return g;\n    } else {\n      return Triangle.fromCenter(_pts[0], _pts[1][0]);\n    }\n  }\n};\nvar Triangle = class {\n  static fromRect(rect) {\n    let _rect = Util.iterToArray(rect);\n    let top = _rect[0].$add(_rect[1]).divide(2);\n    top.y = _rect[0][1];\n    let left = _rect[1].clone();\n    left.x = _rect[0][0];\n    return new Group(top, _rect[1].clone(), left);\n  }\n  static fromCircle(circle) {\n    return Circle.toTriangle(circle, true);\n  }\n  static fromCenter(pt, size) {\n    return Triangle.fromCircle(Circle.fromCenter(pt, size));\n  }\n  static medial(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    return Polygon.midpoints(_pts, true);\n  }\n  static oppositeSide(tri, index) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    if (index === 0) {\n      return Group.fromPtArray([_pts[1], _pts[2]]);\n    } else if (index === 1) {\n      return Group.fromPtArray([_pts[0], _pts[2]]);\n    } else {\n      return Group.fromPtArray([_pts[0], _pts[1]]);\n    }\n  }\n  static altitude(tri, index) {\n    let _pts = Util.iterToArray(tri);\n    let opp = Triangle.oppositeSide(_pts, index);\n    if (opp.length > 1) {\n      return new Group(_pts[index], Line.perpendicularFromPt(opp, _pts[index]));\n    } else {\n      return new Group();\n    }\n  }\n  static orthocenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(void 0, 3);\n    let a = Triangle.altitude(_pts, 0);\n    let b = Triangle.altitude(_pts, 1);\n    return Line.intersectRay2D(a, b);\n  }\n  static incenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(void 0, 3);\n    let a = Polygon.bisector(_pts, 0).add(_pts[0]);\n    let b = Polygon.bisector(_pts, 1).add(_pts[1]);\n    return Line.intersectRay2D(new Group(_pts[0], a), new Group(_pts[1], b));\n  }\n  static incircle(tri, center) {\n    let _pts = Util.iterToArray(tri);\n    let c = center ? center : Triangle.incenter(_pts);\n    let area = Polygon.area(_pts);\n    let perim = Polygon.perimeter(_pts, true);\n    let r = 2 * area / perim.total;\n    return Circle.fromCenter(c, r);\n  }\n  static circumcenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    let md = Triangle.medial(_pts);\n    let a = [md[0], Geom.perpendicular(_pts[0].$subtract(md[0])).p1.$add(md[0])];\n    let b = [md[1], Geom.perpendicular(_pts[1].$subtract(md[1])).p1.$add(md[1])];\n    return Line.intersectRay2D(a, b);\n  }\n  static circumcircle(tri, center) {\n    let _pts = Util.iterToArray(tri);\n    let c = center ? center : Triangle.circumcenter(_pts);\n    let r = _pts[0].$subtract(c).magnitude();\n    return Circle.fromCenter(c, r);\n  }\n};\nvar Polygon = class {\n  static centroid(pts) {\n    return Geom.centroid(pts);\n  }\n  static rectangle(center, widthOrSize, height) {\n    return Rectangle.corners(Rectangle.fromCenter(center, widthOrSize, height));\n  }\n  static fromCenter(center, radius, sides) {\n    let g = new Group();\n    for (let i = 0; i < sides; i++) {\n      let ang = Math.PI * 2 * i / sides;\n      g.push(new Pt(Math.cos(ang) * radius, Math.sin(ang) * radius).add(center));\n    }\n    return g;\n  }\n  static lineAt(pts, index) {\n    let _pts = Util.iterToArray(pts);\n    if (index < 0 || index >= _pts.length)\n      throw new Error(\"index out of the Polygon's range\");\n    return new Group(_pts[index], index === _pts.length - 1 ? _pts[0] : _pts[index + 1]);\n  }\n  static lines(poly, closePath = true) {\n    let _pts = Util.iterToArray(poly);\n    if (_pts.length < 2)\n      return _errorLength(new Group(), 2);\n    let sp = Util.split(_pts, 2, 1);\n    if (closePath)\n      sp.push(new Group(_pts[_pts.length - 1], _pts[0]));\n    return sp.map((g) => g);\n  }\n  static midpoints(poly, closePath = false, t = 0.5) {\n    let sides = Polygon.lines(poly, closePath);\n    let mids = sides.map((s) => Geom.interpolate(s[0], s[1], t));\n    return mids;\n  }\n  static adjacentSides(poly, index, closePath = false) {\n    let _pts = Util.iterToArray(poly);\n    if (_pts.length < 2)\n      return _errorLength(new Group(), 2);\n    if (index < 0 || index >= _pts.length)\n      return _errorOutofBound(new Group(), index);\n    let gs = [];\n    let left = index - 1;\n    if (closePath && left < 0)\n      left = _pts.length - 1;\n    if (left >= 0)\n      gs.push(new Group(_pts[index], _pts[left]));\n    let right = index + 1;\n    if (closePath && right > _pts.length - 1)\n      right = 0;\n    if (right <= _pts.length - 1)\n      gs.push(new Group(_pts[index], _pts[right]));\n    return gs;\n  }\n  static bisector(poly, index) {\n    let sides = Polygon.adjacentSides(poly, index, true);\n    if (sides.length >= 2) {\n      let a = sides[0][1].$subtract(sides[0][0]).unit();\n      let b = sides[1][1].$subtract(sides[1][0]).unit();\n      return a.add(b).divide(2);\n    } else {\n      return void 0;\n    }\n  }\n  static perimeter(poly, closePath = false) {\n    let lines = Polygon.lines(poly, closePath);\n    let mag = 0;\n    let p = Pt.make(lines.length, 0);\n    for (let i = 0, len = lines.length; i < len; i++) {\n      let m = Line.magnitude(lines[i]);\n      mag += m;\n      p[i] = m;\n    }\n    return {\n      total: mag,\n      segments: p\n    };\n  }\n  static area(pts) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    let det = (a, b) => a[0] * b[1] - a[1] * b[0];\n    let area = 0;\n    for (let i = 0, len = _pts.length; i < len; i++) {\n      if (i < _pts.length - 1) {\n        area += det(_pts[i], _pts[i + 1]);\n      } else {\n        area += det(_pts[i], _pts[0]);\n      }\n    }\n    return Math.abs(area / 2);\n  }\n  static convexHull(pts, sorted = false) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    if (!sorted) {\n      _pts = _pts.slice();\n      _pts.sort((a, b) => a[0] - b[0]);\n    }\n    let left = (a, b, c) => {\n      return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]) > 0;\n    };\n    let dq = [];\n    let bot = _pts.length - 2;\n    let top = bot + 3;\n    dq[bot] = _pts[2];\n    dq[top] = _pts[2];\n    if (left(_pts[0], _pts[1], _pts[2])) {\n      dq[bot + 1] = _pts[0];\n      dq[bot + 2] = _pts[1];\n    } else {\n      dq[bot + 1] = _pts[1];\n      dq[bot + 2] = _pts[0];\n    }\n    for (let i = 3, len = _pts.length; i < len; i++) {\n      let pt = _pts[i];\n      if (left(dq[bot], dq[bot + 1], pt) && left(dq[top - 1], dq[top], pt)) {\n        continue;\n      }\n      while (!left(dq[bot], dq[bot + 1], pt)) {\n        bot += 1;\n      }\n      bot -= 1;\n      dq[bot] = pt;\n      while (!left(dq[top - 1], dq[top], pt)) {\n        top -= 1;\n      }\n      top += 1;\n      dq[top] = pt;\n    }\n    let hull = new Group();\n    for (let h = 0; h < top - bot; h++) {\n      hull.push(dq[bot + h]);\n    }\n    return hull;\n  }\n  static network(poly, originIndex = 0) {\n    let _pts = Util.iterToArray(poly);\n    let g = [];\n    for (let i = 0, len = _pts.length; i < len; i++) {\n      if (i != originIndex)\n        g.push(new Group(_pts[originIndex], _pts[i]));\n    }\n    return g;\n  }\n  static nearestPt(poly, pt) {\n    let _near = Number.MAX_VALUE;\n    let _item = -1;\n    let i = 0;\n    for (let p of poly) {\n      let d = p.$subtract(pt).magnitudeSq();\n      if (d < _near) {\n        _near = d;\n        _item = i;\n      }\n      i++;\n    }\n    return _item;\n  }\n  static projectAxis(poly, unitAxis) {\n    let _poly = Util.iterToArray(poly);\n    let dot = unitAxis.dot(_poly[0]);\n    let d = new Pt(dot, dot);\n    for (let n = 1, len = _poly.length; n < len; n++) {\n      dot = unitAxis.dot(_poly[n]);\n      d = new Pt(Math.min(dot, d[0]), Math.max(dot, d[1]));\n    }\n    return d;\n  }\n  static _axisOverlap(poly1, poly2, unitAxis) {\n    let pa = Polygon.projectAxis(poly1, unitAxis);\n    let pb = Polygon.projectAxis(poly2, unitAxis);\n    return pa[0] < pb[0] ? pb[0] - pa[1] : pa[0] - pb[1];\n  }\n  static hasIntersectPoint(poly, pt) {\n    let _poly = Util.iterToArray(poly);\n    let c = false;\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let ln = Polygon.lineAt(_poly, i);\n      if (ln[0][1] > pt[1] != ln[1][1] > pt[1] && pt[0] < (ln[1][0] - ln[0][0]) * (pt[1] - ln[0][1]) / (ln[1][1] - ln[0][1]) + ln[0][0]) {\n        c = !c;\n      }\n    }\n    return c;\n  }\n  static hasIntersectCircle(poly, circle) {\n    let _poly = Util.iterToArray(poly);\n    let _circle = Util.iterToArray(circle);\n    let info = {\n      which: -1,\n      dist: 0,\n      normal: null,\n      edge: null,\n      vertex: null\n    };\n    let c = _circle[0];\n    let r = _circle[1][0];\n    let minDist = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let edge = Polygon.lineAt(_poly, i);\n      let axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n      let poly2 = new Group(c.$add(axis.$multiply(r)), c.$subtract(axis.$multiply(r)));\n      let dist = Polygon._axisOverlap(_poly, poly2, axis);\n      if (dist > 0) {\n        return null;\n      } else if (Math.abs(dist) < minDist) {\n        let check = Rectangle.withinBound(edge, Line.perpendicularFromPt(edge, c)) || Circle.intersectLine2D(circle, edge).length > 0;\n        if (check) {\n          info.edge = edge;\n          info.normal = axis;\n          minDist = Math.abs(dist);\n          info.which = i;\n        }\n      }\n    }\n    if (!info.edge)\n      return null;\n    let dir = c.$subtract(Polygon.centroid(_poly)).dot(info.normal);\n    if (dir < 0)\n      info.normal.multiply(-1);\n    info.dist = minDist;\n    info.vertex = c;\n    return info;\n  }\n  static hasIntersectPolygon(poly1, poly2) {\n    let _poly1 = Util.iterToArray(poly1);\n    let _poly2 = Util.iterToArray(poly2);\n    let info = {\n      which: -1,\n      dist: 0,\n      normal: new Pt(),\n      edge: new Group(),\n      vertex: new Pt()\n    };\n    let minDist = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, plen = _poly1.length + _poly2.length; i < plen; i++) {\n      let edge = i < _poly1.length ? Polygon.lineAt(_poly1, i) : Polygon.lineAt(_poly2, i - _poly1.length);\n      let axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n      let dist = Polygon._axisOverlap(_poly1, _poly2, axis);\n      if (dist > 0) {\n        return null;\n      } else if (Math.abs(dist) < minDist) {\n        info.edge = edge;\n        info.normal = axis;\n        minDist = Math.abs(dist);\n        info.which = i < _poly1.length ? 0 : 1;\n      }\n    }\n    info.dist = minDist;\n    let b1 = info.which === 0 ? _poly2 : _poly1;\n    let b2 = info.which === 0 ? _poly1 : _poly2;\n    let c1 = Polygon.centroid(b1);\n    let c2 = Polygon.centroid(b2);\n    let dir = c1.$subtract(c2).dot(info.normal);\n    if (dir < 0)\n      info.normal.multiply(-1);\n    let smallest = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, len = b1.length; i < len; i++) {\n      let d = info.normal.dot(b1[i].$subtract(c2));\n      if (d < smallest) {\n        smallest = d;\n        info.vertex = b1[i];\n      }\n    }\n    return info;\n  }\n  static intersectPolygon2D(poly1, poly2) {\n    let _poly1 = Util.iterToArray(poly1);\n    let _poly2 = Util.iterToArray(poly2);\n    let lp = Polygon.lines(_poly1);\n    let g = [];\n    for (let i = 0, len = lp.length; i < len; i++) {\n      let ins = Line.intersectPolygon2D(lp[i], _poly2, false);\n      if (ins)\n        g.push(ins);\n    }\n    return Util.flatten(g, true);\n  }\n  static toRects(polys) {\n    let boxes = [];\n    for (let g of polys) {\n      boxes.push(Geom.boundingBox(g));\n    }\n    let merged = Util.flatten(boxes, false);\n    boxes.unshift(Geom.boundingBox(merged));\n    return boxes;\n  }\n};\nvar Curve = class {\n  static getSteps(steps) {\n    let ts = new Group();\n    for (let i = 0; i <= steps; i++) {\n      let t = i / steps;\n      ts.push(new Pt(t * t * t, t * t, t, 1));\n    }\n    return ts;\n  }\n  static controlPoints(pts, index = 0, copyStart = false) {\n    let _pts = Util.iterToArray(pts);\n    if (index > _pts.length - 1)\n      return new Group();\n    let _index = (i) => i < _pts.length - 1 ? i : _pts.length - 1;\n    let p0 = _pts[index];\n    index = copyStart ? index : index + 1;\n    return new Group(\n      p0,\n      _pts[_index(index++)],\n      _pts[_index(index++)],\n      _pts[_index(index++)]\n    );\n  }\n  static _calcPt(ctrls, params) {\n    let x = ctrls.reduce((a, c, i) => a + c.x * params[i], 0);\n    let y = ctrls.reduce((a, c, i) => a + c.y * params[i], 0);\n    if (ctrls[0].length > 2) {\n      let z = ctrls.reduce((a, c, i) => a + c.z * params[i], 0);\n      return new Pt(x, y, z);\n    }\n    return new Pt(x, y);\n  }\n  static catmullRom(pts, steps = 10) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let c = Curve.controlPoints(_pts, 0, true);\n    for (let i = 0; i <= steps; i++) {\n      ps.push(Curve.catmullRomStep(ts[i], c));\n    }\n    let k = 0;\n    while (k < _pts.length - 2) {\n      let cp = Curve.controlPoints(_pts, k);\n      if (cp.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.catmullRomStep(ts[i], cp));\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static catmullRomStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-0.5, 1, -0.5, 0),\n      new Pt(1.5, -2.5, 0, 1),\n      new Pt(-1.5, 2, 0.5, 0),\n      new Pt(0.5, -0.5, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static cardinal(pts, steps = 10, tension = 0.5) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let c = Curve.controlPoints(_pts, 0, true);\n    for (let i = 0; i <= steps; i++) {\n      ps.push(Curve.cardinalStep(ts[i], c, tension));\n    }\n    let k = 0;\n    while (k < _pts.length - 2) {\n      let cp = Curve.controlPoints(_pts, k);\n      if (cp.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.cardinalStep(ts[i], cp, tension));\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static cardinalStep(step, ctrls, tension = 0.5) {\n    let m = new Group(\n      new Pt(-1, 2, -1, 0),\n      new Pt(-1, 1, 0, 0),\n      new Pt(1, -2, 1, 0),\n      new Pt(1, -1, 0, 0)\n    );\n    let h = Mat.multiply([step], m, true)[0].multiply(tension);\n    let h2 = 2 * step[0] - 3 * step[1] + 1;\n    let h3 = -2 * step[0] + 3 * step[1];\n    let pt = Curve._calcPt(ctrls, h);\n    pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n    pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n    if (pt.length > 2)\n      pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n    return pt;\n  }\n  static bezier(pts, steps = 10) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 4)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let k = 0;\n    while (k < _pts.length - 3) {\n      let c = Curve.controlPoints(_pts, k);\n      if (c.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.bezierStep(ts[i], c));\n        }\n        k += 3;\n      }\n    }\n    return ps;\n  }\n  static bezierStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-1, 3, -3, 1),\n      new Pt(3, -6, 3, 0),\n      new Pt(-3, 3, 0, 0),\n      new Pt(1, 0, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static bspline(pts, steps = 10, tension = 1) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let k = 0;\n    while (k < _pts.length - 3) {\n      let c = Curve.controlPoints(_pts, k);\n      if (c.length > 0) {\n        if (tension !== 1) {\n          for (let i = 0; i <= steps; i++) {\n            ps.push(Curve.bsplineTensionStep(ts[i], c, tension));\n          }\n        } else {\n          for (let i = 0; i <= steps; i++) {\n            ps.push(Curve.bsplineStep(ts[i], c));\n          }\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static bsplineStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666),\n      new Pt(0.5, -1, 0, 0.6666666666666666),\n      new Pt(-0.5, 0.5, 0.5, 0.16666666666666666),\n      new Pt(0.16666666666666666, 0, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static bsplineTensionStep(step, ctrls, tension = 1) {\n    let m = new Group(\n      new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666),\n      new Pt(-1.5, 2, 0, -0.3333333333333333),\n      new Pt(1.5, -2.5, 0.5, 0.16666666666666666),\n      new Pt(0.16666666666666666, 0, 0, 0)\n    );\n    let h = Mat.multiply([step], m, true)[0].multiply(tension);\n    let h2 = 2 * step[0] - 3 * step[1] + 1;\n    let h3 = -2 * step[0] + 3 * step[1];\n    let pt = Curve._calcPt(ctrls, h);\n    pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n    pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n    if (pt.length > 2)\n      pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n    return pt;\n  }\n};\n\n// src/uheprng.ts\nfunction Mash() {\n  var n = 4022871197;\n  var mash = function(data) {\n    if (data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 4294967296;\n      }\n      return (n >>> 0) * 23283064365386963e-26;\n    } else\n      n = 4022871197;\n  };\n  return mash;\n}\nfunction uheprng_default(seed) {\n  var o = 48;\n  var c = 1;\n  var p = o;\n  var s = new Array(o);\n  var i, j, k = 0;\n  var mash = Mash();\n  for (i = 0; i < o; i++)\n    s[i] = mash(Math.random().toString());\n  function initState() {\n    mash();\n    for (i = 0; i < o; i++)\n      s[i] = mash(\" \");\n    c = 1;\n    p = o;\n  }\n  function cleanString(inStr) {\n    inStr = inStr.replace(/(^\\s*)|(\\s*$)/gi, \"\");\n    inStr = inStr.replace(/[\\x00-\\x1F]/gi, \"\");\n    inStr = inStr.replace(/\\n /, \"\\n\");\n    return inStr;\n  }\n  function hashString(inStr) {\n    inStr = cleanString(inStr);\n    mash(inStr);\n    for (i = 0; i < inStr.length; i++) {\n      k = inStr.charCodeAt(i);\n      for (j = 0; j < o; j++) {\n        s[j] -= mash(k.toString());\n        if (s[j] < 0)\n          s[j] += 1;\n      }\n    }\n  }\n  initState();\n  hashString(seed);\n  return {\n    random() {\n      if (++p >= o)\n        p = 0;\n      var t = 1768863 * s[p] + c * 23283064365386963e-26;\n      return s[p] = t - (c = t | 0);\n    }\n  };\n}\n\n// src/Num.ts\nvar Num = class {\n  static equals(a, b, threshold = 1e-5) {\n    return Math.abs(a - b) < threshold;\n  }\n  static lerp(a, b, t) {\n    return (1 - t) * a + t * b;\n  }\n  static clamp(val, min, max) {\n    return Math.max(min, Math.min(max, val));\n  }\n  static boundValue(val, min, max) {\n    let len = Math.abs(max - min);\n    let a = val % len;\n    if (a > max)\n      a -= len;\n    else if (a < min)\n      a += len;\n    return a;\n  }\n  static within(p, a, b) {\n    return p >= Math.min(a, b) && p <= Math.max(a, b);\n  }\n  static randomRange(a, b = 0) {\n    let r = a > b ? a - b : b - a;\n    return a + Num.random() * r;\n  }\n  static randomPt(a, b) {\n    let p = new Pt(a.length);\n    let range = b ? Vec.subtract(b, a) : a;\n    let start = b ? a : new Pt(a.length).fill(0);\n    for (let i = 0, len = p.length; i < len; i++) {\n      p[i] = Num.random() * range[i] + start[i];\n    }\n    return p;\n  }\n  static normalizeValue(n, a, b) {\n    let min = Math.min(a, b);\n    let max = Math.max(a, b);\n    return (n - min) / (max - min);\n  }\n  static sum(pts) {\n    let _pts = Util.iterToArray(pts);\n    let c = new Pt(_pts[0]);\n    for (let i = 1, len = _pts.length; i < len; i++) {\n      Vec.add(c, _pts[i]);\n    }\n    return c;\n  }\n  static average(pts) {\n    let _pts = Util.iterToArray(pts);\n    return Num.sum(_pts).divide(_pts.length);\n  }\n  static cycle(t, method = Shaping.sineInOut) {\n    return method(t > 0.5 ? 2 - t * 2 : t * 2);\n  }\n  static mapToRange(n, currA, currB, targetA, targetB) {\n    if (currA == currB)\n      throw new Error(\"[currMin, currMax] must define a range that is not zero\");\n    let min = Math.min(targetA, targetB);\n    let max = Math.max(targetA, targetB);\n    return Num.normalizeValue(n, currA, currB) * (max - min) + min;\n  }\n  static seed(seed) {\n    this.generator = uheprng_default(seed);\n  }\n  static random() {\n    return this.generator ? this.generator.random() : Math.random();\n  }\n};\nvar Geom = class {\n  static boundAngle(angle) {\n    return Num.boundValue(angle, 0, 360);\n  }\n  static boundRadian(radian) {\n    return Num.boundValue(radian, 0, Const.two_pi);\n  }\n  static toRadian(angle) {\n    return angle * Const.deg_to_rad;\n  }\n  static toDegree(radian) {\n    return radian * Const.rad_to_deg;\n  }\n  static boundingBox(pts) {\n    let minPt, maxPt;\n    for (let p of pts) {\n      if (minPt == void 0) {\n        minPt = p.clone();\n        maxPt = p.clone();\n      } else {\n        minPt = minPt.$min(p);\n        maxPt = maxPt.$max(p);\n      }\n    }\n    return new Group(minPt, maxPt);\n  }\n  static centroid(pts) {\n    return Num.average(pts);\n  }\n  static anchor(pts, ptOrIndex = 0, direction = \"to\") {\n    let method = direction == \"to\" ? \"subtract\" : \"add\";\n    let i = 0;\n    for (let p of pts) {\n      if (typeof ptOrIndex == \"number\") {\n        if (ptOrIndex !== i)\n          p[method](pts[ptOrIndex]);\n      } else {\n        p[method](ptOrIndex);\n      }\n      i++;\n    }\n  }\n  static interpolate(a, b, t = 0.5) {\n    let len = Math.min(a.length, b.length);\n    let d = Pt.make(len);\n    for (let i = 0; i < len; i++) {\n      d[i] = a[i] * (1 - t) + b[i] * t;\n    }\n    return d;\n  }\n  static perpendicular(pt, axis = Const.xy) {\n    let y = axis[1];\n    let x = axis[0];\n    let p = new Pt(pt);\n    let pa = new Pt(p);\n    pa[x] = -p[y];\n    pa[y] = p[x];\n    let pb = new Pt(p);\n    pb[x] = p[y];\n    pb[y] = -p[x];\n    return new Group(pa, pb);\n  }\n  static isPerpendicular(p1, p2) {\n    return new Pt(p1).dot(p2) === 0;\n  }\n  static withinBound(pt, boundPt1, boundPt2) {\n    for (let i = 0, len = Math.min(pt.length, boundPt1.length, boundPt2.length); i < len; i++) {\n      if (!Num.within(pt[i], boundPt1[i], boundPt2[i]))\n        return false;\n    }\n    return true;\n  }\n  static sortEdges(pts) {\n    let _pts = Util.iterToArray(pts);\n    let bounds = Geom.boundingBox(_pts);\n    let center = bounds[1].add(bounds[0]).divide(2);\n    let fn = (a, b) => {\n      if (a.length < 2 || b.length < 2)\n        throw new Error(\"Pt dimension cannot be less than 2\");\n      let da = a.$subtract(center);\n      let db = b.$subtract(center);\n      if (da[0] >= 0 && db[0] < 0)\n        return 1;\n      if (da[0] < 0 && db[0] >= 0)\n        return -1;\n      if (da[0] == 0 && db[0] == 0) {\n        if (da[1] >= 0 || db[1] >= 0)\n          return da[1] > db[1] ? 1 : -1;\n        return db[1] > da[1] ? 1 : -1;\n      }\n      let det = da.$cross2D(db);\n      if (det < 0)\n        return 1;\n      if (det > 0)\n        return -1;\n      return da[0] * da[0] + da[1] * da[1] > db[0] * db[0] + db[1] * db[1] ? 1 : -1;\n    };\n    return _pts.sort(fn);\n  }\n  static scale(ps, scale, anchor) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let scs = typeof scale == \"number\" ? Pt.make(pts[0].length, scale) : scale;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = pts[i];\n      for (let k = 0, lenP = p.length; k < lenP; k++) {\n        p[k] = anchor && anchor[k] ? anchor[k] + (p[k] - anchor[k]) * scs[k] : p[k] * scs[k];\n      }\n    }\n    return Geom;\n  }\n  static rotate2D(ps, angle, anchor, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let fn = anchor ? Mat.rotateAt2DMatrix : Mat.rotate2DMatrix;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    let cos = Math.cos(angle);\n    let sin = Math.sin(angle);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, fn(cos, sin, anchor)));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static shear2D(ps, scale, anchor, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let s = typeof scale == \"number\" ? [scale, scale] : scale;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    let fn = anchor ? Mat.shearAt2DMatrix : Mat.shear2DMatrix;\n    let tanx = Math.tan(s[0]);\n    let tany = Math.tan(s[1]);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, fn(tanx, tany, anchor)));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static reflect2D(ps, line, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let _line = Util.iterToArray(line);\n    let mat = Mat.reflectAt2DMatrix(_line[0], _line[1]);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, mat));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static cosTable() {\n    let cos = new Float64Array(360);\n    for (let i = 0; i < 360; i++)\n      cos[i] = Math.cos(i * Math.PI / 180);\n    let find = (rad) => cos[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n    return { table: cos, cos: find };\n  }\n  static sinTable() {\n    let sin = new Float64Array(360);\n    for (let i = 0; i < 360; i++)\n      sin[i] = Math.sin(i * Math.PI / 180);\n    let find = (rad) => sin[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n    return { table: sin, sin: find };\n  }\n};\nvar Shaping = class {\n  static linear(t, c = 1) {\n    return c * t;\n  }\n  static quadraticIn(t, c = 1) {\n    return c * t * t;\n  }\n  static quadraticOut(t, c = 1) {\n    return -c * t * (t - 2);\n  }\n  static quadraticInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? c / 2 * t * t * 4 : -c / 2 * ((dt - 1) * (dt - 3) - 1);\n  }\n  static cubicIn(t, c = 1) {\n    return c * t * t * t;\n  }\n  static cubicOut(t, c = 1) {\n    let dt = t - 1;\n    return c * (dt * dt * dt + 1);\n  }\n  static cubicInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? c / 2 * dt * dt * dt : c / 2 * ((dt - 2) * (dt - 2) * (dt - 2) + 2);\n  }\n  static exponentialIn(t, c = 1, p = 0.25) {\n    return c * Math.pow(t, 1 / p);\n  }\n  static exponentialOut(t, c = 1, p = 0.25) {\n    return c * Math.pow(t, p);\n  }\n  static sineIn(t, c = 1) {\n    return -c * Math.cos(t * Const.half_pi) + c;\n  }\n  static sineOut(t, c = 1) {\n    return c * Math.sin(t * Const.half_pi);\n  }\n  static sineInOut(t, c = 1) {\n    return -c / 2 * (Math.cos(Math.PI * t) - 1);\n  }\n  static cosineApprox(t, c = 1) {\n    let t2 = t * t;\n    let t4 = t2 * t2;\n    let t6 = t4 * t2;\n    return c * (4 * t6 / 9 - 17 * t4 / 9 + 22 * t2 / 9);\n  }\n  static circularIn(t, c = 1) {\n    return -c * (Math.sqrt(1 - t * t) - 1);\n  }\n  static circularOut(t, c = 1) {\n    let dt = t - 1;\n    return c * Math.sqrt(1 - dt * dt);\n  }\n  static circularInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? -c / 2 * (Math.sqrt(1 - dt * dt) - 1) : c / 2 * (Math.sqrt(1 - (dt - 2) * (dt - 2)) + 1);\n  }\n  static elasticIn(t, c = 1, p = 0.7) {\n    let dt = t - 1;\n    let s = p / Const.two_pi * 1.5707963267948966;\n    return c * (-Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p));\n  }\n  static elasticOut(t, c = 1, p = 0.7) {\n    let s = p / Const.two_pi * 1.5707963267948966;\n    return c * (Math.pow(2, -10 * t) * Math.sin((t - s) * Const.two_pi / p)) + c;\n  }\n  static elasticInOut(t, c = 1, p = 0.6) {\n    let dt = t * 2;\n    let s = p / Const.two_pi * 1.5707963267948966;\n    if (t < 0.5) {\n      dt -= 1;\n      return c * (-0.5 * (Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p)));\n    } else {\n      dt -= 1;\n      return c * (0.5 * (Math.pow(2, -10 * dt) * Math.sin((dt - s) * Const.two_pi / p))) + c;\n    }\n  }\n  static bounceIn(t, c = 1) {\n    return c - Shaping.bounceOut(1 - t, c);\n  }\n  static bounceOut(t, c = 1) {\n    if (t < 1 / 2.75) {\n      return c * (7.5625 * t * t);\n    } else if (t < 2 / 2.75) {\n      t -= 1.5 / 2.75;\n      return c * (7.5625 * t * t + 0.75);\n    } else if (t < 2.5 / 2.75) {\n      t -= 2.25 / 2.75;\n      return c * (7.5625 * t * t + 0.9375);\n    } else {\n      t -= 2.625 / 2.75;\n      return c * (7.5625 * t * t + 0.984375);\n    }\n  }\n  static bounceInOut(t, c = 1) {\n    return t < 0.5 ? Shaping.bounceIn(t * 2, c) / 2 : Shaping.bounceOut(t * 2 - 1, c) / 2 + c / 2;\n  }\n  static sigmoid(t, c = 1, p = 10) {\n    let d = p * (t - 0.5);\n    return c / (1 + Math.exp(-d));\n  }\n  static logSigmoid(t, c = 1, p = 0.7) {\n    p = Math.max(Const.epsilon, Math.min(1 - Const.epsilon, p));\n    p = 1 / (1 - p);\n    let A = 1 / (1 + Math.exp((t - 0.5) * p * -2));\n    let B = 1 / (1 + Math.exp(p));\n    let C = 1 / (1 + Math.exp(-p));\n    return c * (A - B) / (C - B);\n  }\n  static seat(t, c = 1, p = 0.5) {\n    if (t < 0.5) {\n      return c * Math.pow(2 * t, 1 - p) / 2;\n    } else {\n      return c * (1 - Math.pow(2 * (1 - t), 1 - p) / 2);\n    }\n  }\n  static quadraticBezier(t, c = 1, p = [0.05, 0.95]) {\n    let a = typeof p != \"number\" ? p[0] : p;\n    let b = typeof p != \"number\" ? p[1] : 0.5;\n    let om2a = 1 - 2 * a;\n    if (om2a === 0) {\n      om2a = Const.epsilon;\n    }\n    let d = (Math.sqrt(a * a + om2a * t) - a) / om2a;\n    return c * ((1 - 2 * b) * (d * d) + 2 * b * d);\n  }\n  static cubicBezier(t, c = 1, p1 = [0.1, 0.7], p2 = [0.9, 0.2]) {\n    let curve = new Group(new Pt(0, 0), new Pt(p1), new Pt(p2), new Pt(1, 1));\n    return c * Curve.bezierStep(new Pt(t * t * t, t * t, t, 1), Curve.controlPoints(curve)).y;\n  }\n  static quadraticTarget(t, c = 1, p1 = [0.2, 0.35]) {\n    let a = Math.min(1 - Const.epsilon, Math.max(Const.epsilon, p1[0]));\n    let b = Math.min(1, Math.max(0, p1[1]));\n    let A = (1 - b) / (1 - a) - b / a;\n    let B = (A * (a * a) - b) / a;\n    let y = A * (t * t) - B * t;\n    return c * Math.min(1, Math.max(0, y));\n  }\n  static cliff(t, c = 1, p = 0.5) {\n    return t > p ? c : 0;\n  }\n  static step(fn, steps, t, c, ...args) {\n    let s = 1 / steps;\n    let tt = Math.floor(t / s) * s;\n    return fn(tt, c, ...args);\n  }\n};\nvar Range = class {\n  constructor(g) {\n    this._dims = 0;\n    this._source = Group.fromPtArray(g);\n    this.calc();\n  }\n  get max() {\n    return this._max.clone();\n  }\n  get min() {\n    return this._min.clone();\n  }\n  get magnitude() {\n    return this._mag.clone();\n  }\n  calc() {\n    if (!this._source)\n      return;\n    let dims = this._source[0].length;\n    this._dims = dims;\n    let max = new Pt(dims);\n    let min = new Pt(dims);\n    let mag = new Pt(dims);\n    for (let i = 0; i < dims; i++) {\n      max[i] = Const.min;\n      min[i] = Const.max;\n      mag[i] = 0;\n      let s = this._source.zipSlice(i);\n      for (let k = 0, len = s.length; k < len; k++) {\n        max[i] = Math.max(max[i], s[k]);\n        min[i] = Math.min(min[i], s[k]);\n        mag[i] = max[i] - min[i];\n      }\n    }\n    this._max = max;\n    this._min = min;\n    this._mag = mag;\n    return this;\n  }\n  mapTo(min, max, exclude) {\n    let target = new Group();\n    for (let i = 0, len = this._source.length; i < len; i++) {\n      let g = this._source[i];\n      let n = new Pt(this._dims);\n      for (let k = 0; k < this._dims; k++) {\n        n[k] = exclude && exclude[k] ? g[k] : Num.mapToRange(g[k], this._min[k], this._max[k], min, max);\n      }\n      target.push(n);\n    }\n    return target;\n  }\n  append(pts, update = true) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts[0].length !== this._dims)\n      throw new Error(`Dimensions don't match. ${this._dims} dimensions in Range and ${_pts[0].length} provided in parameter. `);\n    this._source = this._source.concat(_pts);\n    if (update)\n      this.calc();\n    return this;\n  }\n  ticks(count) {\n    let g = new Group();\n    for (let i = 0; i <= count; i++) {\n      let p = new Pt(this._dims);\n      for (let k = 0, len = this._max.length; k < len; k++) {\n        p[k] = Num.lerp(this._min[k], this._max[k], i / count);\n      }\n      g.push(p);\n    }\n    return g;\n  }\n};\n\n// src/Util.ts\nvar Const = {\n  xy: \"xy\",\n  yz: \"yz\",\n  xz: \"xz\",\n  xyz: \"xyz\",\n  horizontal: 0,\n  vertical: 1,\n  identical: 0,\n  right: 4,\n  bottom_right: 5,\n  bottom: 6,\n  bottom_left: 7,\n  left: 8,\n  top_left: 1,\n  top: 2,\n  top_right: 3,\n  epsilon: 1e-4,\n  max: Number.MAX_VALUE,\n  min: Number.MIN_VALUE,\n  pi: Math.PI,\n  two_pi: 6.283185307179586,\n  half_pi: 1.5707963267948966,\n  quarter_pi: 0.7853981633974483,\n  one_degree: 0.017453292519943295,\n  rad_to_deg: 57.29577951308232,\n  deg_to_rad: 0.017453292519943295,\n  gravity: 9.81,\n  newton: 0.10197,\n  gaussian: 0.3989422804014327\n};\nvar _Util = class {\n  static warnLevel(lv) {\n    if (lv) {\n      _Util._warnLevel = lv;\n    }\n    return _Util._warnLevel;\n  }\n  static getArgs(args) {\n    if (args.length < 1)\n      return [];\n    let pos = [];\n    let isArray = Array.isArray(args[0]) || ArrayBuffer.isView(args[0]);\n    if (typeof args[0] === \"number\") {\n      pos = Array.prototype.slice.call(args);\n    } else if (typeof args[0] === \"object\" && !isArray) {\n      let a = [\"x\", \"y\", \"z\", \"w\"];\n      let p = args[0];\n      for (let i = 0; i < a.length; i++) {\n        if (p.length && i >= p.length || !(a[i] in p))\n          break;\n        pos.push(p[a[i]]);\n      }\n    } else if (isArray) {\n      pos = [].slice.call(args[0]);\n    }\n    return pos;\n  }\n  static warn(message = \"error\", defaultReturn = void 0) {\n    if (_Util.warnLevel() == \"error\") {\n      throw new Error(message);\n    } else if (_Util.warnLevel() == \"warn\") {\n      console.warn(message);\n    }\n    return defaultReturn;\n  }\n  static randomInt(range, start = 0) {\n    _Util.warn(\"Util.randomInt is deprecated. Please use `Num.randomRange`\");\n    return Math.floor(Num.random() * range) + start;\n  }\n  static split(pts, size, stride, loopBack = false, matchSize = true) {\n    let chunks = [];\n    let part = [];\n    let st = stride || size;\n    let index = 0;\n    if (pts.length <= 0 || st <= 0)\n      return [];\n    while (index < pts.length) {\n      part = [];\n      for (let k = 0; k < size; k++) {\n        if (loopBack) {\n          part.push(pts[(index + k) % pts.length]);\n        } else {\n          if (index + k >= pts.length)\n            break;\n          part.push(pts[index + k]);\n        }\n      }\n      index += st;\n      if (!matchSize || matchSize && part.length === size)\n        chunks.push(part);\n    }\n    return chunks;\n  }\n  static flatten(pts, flattenAsGroup = true) {\n    let arr = flattenAsGroup ? new Group() : new Array();\n    return arr.concat.apply(arr, pts);\n  }\n  static combine(a, b, op) {\n    let result = [];\n    for (let i = 0, len = a.length; i < len; i++) {\n      for (let k = 0, lenB = b.length; k < lenB; k++) {\n        result.push(op(a[i], b[k]));\n      }\n    }\n    return result;\n  }\n  static zip(arrays) {\n    let z = [];\n    for (let i = 0, len = arrays[0].length; i < len; i++) {\n      let p = [];\n      for (let k = 0; k < arrays.length; k++) {\n        p.push(arrays[k][i]);\n      }\n      z.push(p);\n    }\n    return z;\n  }\n  static stepper(max, min = 0, stride = 1, callback) {\n    let c = min;\n    return function() {\n      c += stride;\n      if (c >= max) {\n        c = min + (c - max);\n      }\n      if (callback)\n        callback(c);\n      return c;\n    };\n  }\n  static forRange(fn, range, start = 0, step = 1) {\n    let temp = [];\n    for (let i = start, len = range; i < len; i += step) {\n      temp[i] = fn(i);\n    }\n    return temp;\n  }\n  static load(url, callback) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.onload = function() {\n      if (request.status >= 200 && request.status < 400) {\n        callback(request.responseText, true);\n      } else {\n        callback(`Server error (${request.status}) when loading \"${url}\"`, false);\n      }\n    };\n    request.onerror = function() {\n      callback(`Unknown network error`, false);\n    };\n    request.send();\n  }\n  static download(space, filename = \"pts_canvas_image\", filetype = \"png\", quality = 1) {\n    const ftype = filetype === \"jpg\" ? \"jpeg\" : filetype;\n    space.element.toBlob(function(blob) {\n      const link = document.createElement(\"a\");\n      const url = URL.createObjectURL(blob);\n      link.href = url;\n      link.download = `${filename}.${filetype}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    }, `image/${ftype}`, quality);\n  }\n  static performance(avgFrames = 10) {\n    let last = Date.now();\n    let avg = [];\n    return function() {\n      const now = Date.now();\n      avg.push(now - last);\n      if (avg.length >= avgFrames)\n        avg.shift();\n      last = now;\n      return Math.floor(avg.reduce((a, b) => a + b, 0) / avg.length);\n    };\n  }\n  static arrayCheck(pts, minRequired = 2) {\n    if (Array.isArray(pts) && pts.length < minRequired) {\n      _Util.warn(`Requires ${minRequired} or more Pts in this Group.`);\n      return false;\n    }\n    return true;\n  }\n  static iterToArray(it) {\n    return !Array.isArray(it) ? [...it] : it;\n  }\n  static isMobile() {\n    return /iPhone|iPad|Android/i.test(navigator.userAgent);\n  }\n};\nvar Util = _Util;\nUtil._warnLevel = \"mute\";\n\n// src/Pt.ts\nvar Pt = class extends Float32Array {\n  constructor(...args) {\n    var __super = (...args) => {\n      super(...args);\n    };\n    if (args.length === 1 && typeof args[0] == \"number\") {\n      __super(args[0]);\n    } else {\n      __super(args.length > 0 ? Util.getArgs(args) : [0, 0]);\n    }\n  }\n  static make(dimensions, defaultValue = 0, randomize = false) {\n    let p = new Float32Array(dimensions);\n    if (defaultValue)\n      p.fill(defaultValue);\n    if (randomize) {\n      for (let i = 0, len = p.length; i < len; i++) {\n        p[i] = p[i] * Num.random();\n      }\n    }\n    return new Pt(p);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(s) {\n    this._id = s;\n  }\n  get x() {\n    return this[0];\n  }\n  set x(n) {\n    this[0] = n;\n  }\n  get y() {\n    return this[1];\n  }\n  set y(n) {\n    this[1] = n;\n  }\n  get z() {\n    return this[2];\n  }\n  set z(n) {\n    this[2] = n;\n  }\n  get w() {\n    return this[3];\n  }\n  set w(n) {\n    this[3] = n;\n  }\n  clone() {\n    return new Pt(this);\n  }\n  equals(p, threshold = 1e-6) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      if (Math.abs(this[i] - p[i]) > threshold)\n        return false;\n    }\n    return true;\n  }\n  to(...args) {\n    let p = Util.getArgs(args);\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      this[i] = p[i];\n    }\n    return this;\n  }\n  $to(...args) {\n    return this.clone().to(...args);\n  }\n  toAngle(radian, magnitude, anchorFromPt = false) {\n    let m = magnitude != void 0 ? magnitude : this.magnitude();\n    let change = [Math.cos(radian) * m, Math.sin(radian) * m];\n    return anchorFromPt ? this.add(change) : this.to(change);\n  }\n  op(fn) {\n    let self = this;\n    return (...params) => {\n      return fn(self, ...params);\n    };\n  }\n  ops(fns) {\n    let _ops = [];\n    for (let i = 0, len = fns.length; i < len; i++) {\n      _ops.push(this.op(fns[i]));\n    }\n    return _ops;\n  }\n  $take(axis) {\n    let p = [];\n    for (let i = 0, len = axis.length; i < len; i++) {\n      p.push(this[axis[i]] || 0);\n    }\n    return new Pt(p);\n  }\n  $concat(...args) {\n    return new Pt(this.toArray().concat(Util.getArgs(args)));\n  }\n  add(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.add(this, args[0]) : Vec.add(this, Util.getArgs(args));\n    return this;\n  }\n  $add(...args) {\n    return this.clone().add(...args);\n  }\n  subtract(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.subtract(this, args[0]) : Vec.subtract(this, Util.getArgs(args));\n    return this;\n  }\n  $subtract(...args) {\n    return this.clone().subtract(...args);\n  }\n  multiply(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.multiply(this, args[0]) : Vec.multiply(this, Util.getArgs(args));\n    return this;\n  }\n  $multiply(...args) {\n    return this.clone().multiply(...args);\n  }\n  divide(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.divide(this, args[0]) : Vec.divide(this, Util.getArgs(args));\n    return this;\n  }\n  $divide(...args) {\n    return this.clone().divide(...args);\n  }\n  magnitudeSq() {\n    return Vec.dot(this, this);\n  }\n  magnitude() {\n    return Vec.magnitude(this);\n  }\n  unit(magnitude = void 0) {\n    Vec.unit(this, magnitude);\n    return this;\n  }\n  $unit(magnitude = void 0) {\n    return this.clone().unit(magnitude);\n  }\n  dot(...args) {\n    return Vec.dot(this, Util.getArgs(args));\n  }\n  $cross2D(...args) {\n    return Vec.cross2D(this, Util.getArgs(args));\n  }\n  $cross(...args) {\n    return Vec.cross(this, Util.getArgs(args));\n  }\n  $project(...args) {\n    return this.$multiply(this.dot(...args) / this.magnitudeSq());\n  }\n  projectScalar(...args) {\n    return this.dot(...args) / this.magnitude();\n  }\n  abs() {\n    Vec.abs(this);\n    return this;\n  }\n  $abs() {\n    return this.clone().abs();\n  }\n  floor() {\n    Vec.floor(this);\n    return this;\n  }\n  $floor() {\n    return this.clone().floor();\n  }\n  ceil() {\n    Vec.ceil(this);\n    return this;\n  }\n  $ceil() {\n    return this.clone().ceil();\n  }\n  round() {\n    Vec.round(this);\n    return this;\n  }\n  $round() {\n    return this.clone().round();\n  }\n  minValue() {\n    return Vec.min(this);\n  }\n  maxValue() {\n    return Vec.max(this);\n  }\n  $min(...args) {\n    let p = Util.getArgs(args);\n    let m = this.clone();\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      m[i] = Math.min(this[i], p[i]);\n    }\n    return m;\n  }\n  $max(...args) {\n    let p = Util.getArgs(args);\n    let m = this.clone();\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      m[i] = Math.max(this[i], p[i]);\n    }\n    return m;\n  }\n  angle(axis = Const.xy) {\n    return Math.atan2(this[axis[1]], this[axis[0]]);\n  }\n  angleBetween(p, axis = Const.xy) {\n    return Geom.boundRadian(this.angle(axis)) - Geom.boundRadian(p.angle(axis));\n  }\n  scale(scale, anchor) {\n    Geom.scale(this, scale, anchor || Pt.make(this.length, 0));\n    return this;\n  }\n  rotate2D(angle, anchor, axis) {\n    Geom.rotate2D(this, angle, anchor || Pt.make(this.length, 0), axis);\n    return this;\n  }\n  shear2D(scale, anchor, axis) {\n    Geom.shear2D(this, scale, anchor || Pt.make(this.length, 0), axis);\n    return this;\n  }\n  reflect2D(line, axis) {\n    Geom.reflect2D(this, line, axis);\n    return this;\n  }\n  toString() {\n    return `Pt(${this.join(\", \")})`;\n  }\n  toArray() {\n    return [].slice.call(this);\n  }\n  toGroup() {\n    return new Group(Pt.make(this.length), this.clone());\n  }\n  toBound() {\n    return new Bound(Pt.make(this.length), this.clone());\n  }\n};\nvar Group = class extends Array {\n  constructor(...args) {\n    super(...args);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(s) {\n    this._id = s;\n  }\n  get p1() {\n    return this[0];\n  }\n  get p2() {\n    return this[1];\n  }\n  get p3() {\n    return this[2];\n  }\n  get p4() {\n    return this[3];\n  }\n  get q1() {\n    return this[this.length - 1];\n  }\n  get q2() {\n    return this[this.length - 2];\n  }\n  get q3() {\n    return this[this.length - 3];\n  }\n  get q4() {\n    return this[this.length - 4];\n  }\n  clone() {\n    let group = new Group();\n    for (let i = 0, len = this.length; i < len; i++) {\n      group.push(this[i].clone());\n    }\n    return group;\n  }\n  static fromArray(list) {\n    let g = new Group();\n    for (let li of list) {\n      let p = li instanceof Pt ? li : new Pt(li);\n      g.push(p);\n    }\n    return g;\n  }\n  static fromPtArray(list) {\n    return Group.from(list);\n  }\n  split(chunkSize, stride, loopBack = false) {\n    let sp = Util.split(this, chunkSize, stride, loopBack);\n    return sp;\n  }\n  insert(pts, index = 0) {\n    Group.prototype.splice.apply(this, [index, 0, ...pts]);\n    return this;\n  }\n  remove(index = 0, count = 1) {\n    let param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    return Group.prototype.splice.apply(this, param);\n  }\n  segments(pts_per_segment = 2, stride = 1, loopBack = false) {\n    return this.split(pts_per_segment, stride, loopBack);\n  }\n  lines() {\n    return this.segments(2, 1);\n  }\n  centroid() {\n    return Geom.centroid(this);\n  }\n  boundingBox() {\n    return Geom.boundingBox(this);\n  }\n  anchorTo(ptOrIndex = 0) {\n    Geom.anchor(this, ptOrIndex, \"to\");\n  }\n  anchorFrom(ptOrIndex = 0) {\n    Geom.anchor(this, ptOrIndex, \"from\");\n  }\n  op(fn) {\n    let self = this;\n    return (...params) => {\n      return fn(self, ...params);\n    };\n  }\n  ops(fns) {\n    let _ops = [];\n    for (let i = 0, len = fns.length; i < len; i++) {\n      _ops.push(this.op(fns[i]));\n    }\n    return _ops;\n  }\n  interpolate(t) {\n    t = Num.clamp(t, 0, 1);\n    let chunk = this.length - 1;\n    let tc = 1 / (this.length - 1);\n    let idx = Math.floor(t / tc);\n    return Geom.interpolate(this[idx], this[Math.min(this.length - 1, idx + 1)], (t - idx * tc) * chunk);\n  }\n  moveBy(...args) {\n    return this.add(...args);\n  }\n  moveTo(...args) {\n    let d = new Pt(Util.getArgs(args)).subtract(this[0]);\n    this.moveBy(d);\n    return this;\n  }\n  scale(scale, anchor) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.scale(this[i], scale, anchor || this[0]);\n    }\n    return this;\n  }\n  rotate2D(angle, anchor, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.rotate2D(this[i], angle, anchor || this[0], axis);\n    }\n    return this;\n  }\n  shear2D(scale, anchor, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.shear2D(this[i], scale, anchor || this[0], axis);\n    }\n    return this;\n  }\n  reflect2D(line, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.reflect2D(this[i], line, axis);\n    }\n    return this;\n  }\n  sortByDimension(dim, desc = false) {\n    return this.sort((a, b) => desc ? b[dim] - a[dim] : a[dim] - b[dim]);\n  }\n  forEachPt(ptFn, ...args) {\n    if (!this[0][ptFn]) {\n      Util.warn(`${ptFn} is not a function of Pt`);\n      return this;\n    }\n    for (let i = 0, len = this.length; i < len; i++) {\n      this[i] = this[i][ptFn](...args);\n    }\n    return this;\n  }\n  add(...args) {\n    return this.forEachPt(\"add\", ...args);\n  }\n  subtract(...args) {\n    return this.forEachPt(\"subtract\", ...args);\n  }\n  multiply(...args) {\n    return this.forEachPt(\"multiply\", ...args);\n  }\n  divide(...args) {\n    return this.forEachPt(\"divide\", ...args);\n  }\n  $matrixAdd(g) {\n    return Mat.add(this, g);\n  }\n  $matrixMultiply(g, transposed = false, elementwise = false) {\n    return Mat.multiply(this, g, transposed, elementwise);\n  }\n  zipSlice(index, defaultValue = false) {\n    return Mat.zipSlice(this, index, defaultValue);\n  }\n  $zip(defaultValue = void 0, useLongest = false) {\n    return Mat.zip(this, defaultValue, useLongest);\n  }\n  toBound() {\n    return Bound.fromGroup(this);\n  }\n  toString() {\n    return \"Group[ \" + this.reduce((p, c) => p + c.toString() + \" \", \"\") + \" ]\";\n  }\n};\nvar Bound = class extends Group {\n  constructor(...args) {\n    super(...args);\n    this._center = new Pt();\n    this._size = new Pt();\n    this._topLeft = new Pt();\n    this._bottomRight = new Pt();\n    this._inited = false;\n    this.init();\n  }\n  static fromBoundingRect(rect) {\n    let b = new Bound(new Pt(rect.left || 0, rect.top || 0), new Pt(rect.right || 0, rect.bottom || 0));\n    if (rect.width && rect.height)\n      b.size = new Pt(rect.width, rect.height);\n    return b;\n  }\n  static fromGroup(g) {\n    let _g = Util.iterToArray(g);\n    if (_g.length < 2)\n      throw new Error(\"Cannot create a Bound from a group that has less than 2 Pt\");\n    return new Bound(_g[0], _g[_g.length - 1]);\n  }\n  init() {\n    if (this.p1) {\n      this._size = this.p1.clone();\n      this._inited = true;\n    }\n    if (this.p1 && this.p2) {\n      let a = this.p1;\n      let b = this.p2;\n      this.topLeft = a.$min(b);\n      this._bottomRight = a.$max(b);\n      this._updateSize();\n      this._inited = true;\n    }\n  }\n  clone() {\n    return new Bound(this._topLeft.clone(), this._bottomRight.clone());\n  }\n  _updateSize() {\n    this._size = this._bottomRight.$subtract(this._topLeft).abs();\n    this._updateCenter();\n  }\n  _updateCenter() {\n    this._center = this._size.$multiply(0.5).add(this._topLeft);\n  }\n  _updatePosFromTop() {\n    this._bottomRight = this._topLeft.$add(this._size);\n    this._updateCenter();\n  }\n  _updatePosFromBottom() {\n    this._topLeft = this._bottomRight.$subtract(this._size);\n    this._updateCenter();\n  }\n  _updatePosFromCenter() {\n    let half = this._size.$multiply(0.5);\n    this._topLeft = this._center.$subtract(half);\n    this._bottomRight = this._center.$add(half);\n  }\n  get size() {\n    return new Pt(this._size);\n  }\n  set size(p) {\n    this._size = new Pt(p);\n    this._updatePosFromTop();\n  }\n  get center() {\n    return new Pt(this._center);\n  }\n  set center(p) {\n    this._center = new Pt(p);\n    this._updatePosFromCenter();\n  }\n  get topLeft() {\n    return new Pt(this._topLeft);\n  }\n  set topLeft(p) {\n    this._topLeft = new Pt(p);\n    this[0] = this._topLeft;\n    this._updateSize();\n  }\n  get bottomRight() {\n    return new Pt(this._bottomRight);\n  }\n  set bottomRight(p) {\n    this._bottomRight = new Pt(p);\n    this[1] = this._bottomRight;\n    this._updateSize();\n  }\n  get width() {\n    return this._size.length > 0 ? this._size.x : 0;\n  }\n  set width(w) {\n    this._size.x = w;\n    this._updatePosFromTop();\n  }\n  get height() {\n    return this._size.length > 1 ? this._size.y : 0;\n  }\n  set height(h) {\n    this._size.y = h;\n    this._updatePosFromTop();\n  }\n  get depth() {\n    return this._size.length > 2 ? this._size.z : 0;\n  }\n  set depth(d) {\n    this._size.z = d;\n    this._updatePosFromTop();\n  }\n  get x() {\n    return this.topLeft.x;\n  }\n  get y() {\n    return this.topLeft.y;\n  }\n  get z() {\n    return this.topLeft.z;\n  }\n  get inited() {\n    return this._inited;\n  }\n  update() {\n    this._topLeft = this[0];\n    this._bottomRight = this[1];\n    this._updateSize();\n    return this;\n  }\n};\n\n// src/UI.ts\nvar UIShape = {\n  rectangle: \"rectangle\",\n  circle: \"circle\",\n  polygon: \"polygon\",\n  polyline: \"polyline\",\n  line: \"line\"\n};\nvar UIPointerActions = {\n  up: \"up\",\n  down: \"down\",\n  move: \"move\",\n  drag: \"drag\",\n  uidrag: \"uidrag\",\n  drop: \"drop\",\n  uidrop: \"uidrop\",\n  over: \"over\",\n  out: \"out\",\n  enter: \"enter\",\n  leave: \"leave\",\n  click: \"click\",\n  keydown: \"keydown\",\n  keyup: \"keyup\",\n  contextmenu: \"contextmenu\",\n  all: \"all\"\n};\nvar _UI = class {\n  constructor(group, shape, states = {}, id) {\n    this._holds = /* @__PURE__ */ new Map();\n    this._group = Group.fromArray(group);\n    this._shape = shape;\n    this._id = id === void 0 ? `ui_${_UI._counter++}` : id;\n    this._states = states;\n    this._actions = {};\n  }\n  static fromRectangle(group, states, id) {\n    return new this(group, UIShape.rectangle, states, id);\n  }\n  static fromCircle(group, states, id) {\n    return new this(group, UIShape.circle, states, id);\n  }\n  static fromPolygon(group, states, id) {\n    return new this(group, UIShape.polygon, states, id);\n  }\n  static fromUI(ui, states, id) {\n    return new this(ui.group, ui.shape, states || ui._states, id);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(d) {\n    this._id = d;\n  }\n  get group() {\n    return this._group;\n  }\n  set group(d) {\n    this._group = d;\n  }\n  get shape() {\n    return this._shape;\n  }\n  set shape(d) {\n    this._shape = d;\n  }\n  state(key, value) {\n    if (!key)\n      return null;\n    if (value !== void 0) {\n      this._states[key] = value;\n      return this;\n    }\n    return this._states[key];\n  }\n  on(type, fn) {\n    if (!this._actions[type])\n      this._actions[type] = [];\n    return _UI._addHandler(this._actions[type], fn);\n  }\n  off(type, which) {\n    if (!this._actions[type])\n      return false;\n    if (which === void 0) {\n      delete this._actions[type];\n      return true;\n    } else {\n      return _UI._removeHandler(this._actions[type], which);\n    }\n  }\n  listen(type, p, evt) {\n    if (this._actions[type] !== void 0) {\n      if (this._within(p) || Array.from(this._holds.values()).indexOf(type) >= 0) {\n        _UI._trigger(this._actions[type], this, p, type, evt);\n        return true;\n      } else if (this._actions[\"all\"]) {\n        _UI._trigger(this._actions[\"all\"], this, p, type, evt);\n        return true;\n      }\n    }\n    return false;\n  }\n  hold(type) {\n    let newKey = Math.max(0, ...Array.from(this._holds.keys())) + 1;\n    this._holds.set(newKey, type);\n    return newKey;\n  }\n  unhold(key) {\n    if (key !== void 0) {\n      this._holds.delete(key);\n    } else {\n      this._holds.clear();\n    }\n  }\n  static track(uis, type, p, evt) {\n    for (let i = 0, len = uis.length; i < len; i++) {\n      uis[i].listen(type, p, evt);\n    }\n  }\n  render(fn) {\n    fn(this._group, this._states);\n  }\n  toString() {\n    return `UI ${this.group.toString}`;\n  }\n  _within(p) {\n    let fn = null;\n    if (this._shape === UIShape.rectangle) {\n      fn = Rectangle.withinBound;\n    } else if (this._shape === UIShape.circle) {\n      fn = Circle.withinBound;\n    } else if (this._shape === UIShape.polygon) {\n      fn = Polygon.hasIntersectPoint;\n    } else {\n      return false;\n    }\n    return fn(this._group, p);\n  }\n  static _trigger(fns, target, pt, type, evt) {\n    if (fns) {\n      for (let i = 0, len = fns.length; i < len; i++) {\n        if (fns[i])\n          fns[i](target, pt, type, evt);\n      }\n    }\n  }\n  static _addHandler(fns, fn) {\n    if (fn) {\n      fns.push(fn);\n      return fns.length - 1;\n    } else {\n      return -1;\n    }\n  }\n  static _removeHandler(fns, index) {\n    if (index >= 0 && index < fns.length) {\n      let temp = fns.length;\n      fns.splice(index, 1);\n      return temp > fns.length;\n    } else {\n      return false;\n    }\n  }\n};\nvar UI = _UI;\nUI._counter = 0;\nvar UIButton = class extends UI {\n  constructor(group, shape, states = {}, id) {\n    super(group, shape, states, id);\n    this._hoverID = -1;\n    if (states.hover === void 0)\n      this._states[\"hover\"] = false;\n    if (states.clicks === void 0)\n      this._states[\"clicks\"] = 0;\n    const UA = UIPointerActions;\n    this.on(UA.up, (target, pt, type, evt) => {\n      this.state(\"clicks\", this._states.clicks + 1);\n    });\n    this.on(UA.move, (target, pt, type, evt) => {\n      let hover = this._within(pt);\n      if (hover && !this._states.hover) {\n        this.state(\"hover\", true);\n        UI._trigger(this._actions[UA.enter], this, pt, UA.enter, evt);\n        var _capID = this.hold(UA.move);\n        this._hoverID = this.on(UA.move, (t, p) => {\n          if (!this._within(p) && !this.state(\"dragging\")) {\n            this.state(\"hover\", false);\n            UI._trigger(this._actions[UA.leave], this, pt, UA.leave, evt);\n            this.off(UA.move, this._hoverID);\n            this.unhold(_capID);\n          }\n        });\n      }\n    });\n  }\n  onClick(fn) {\n    return this.on(UIPointerActions.up, fn);\n  }\n  offClick(id) {\n    return this.off(UIPointerActions.up, id);\n  }\n  onContextMenu(fn) {\n    return this.on(UIPointerActions.contextmenu, fn);\n  }\n  offContextMenu(id) {\n    return this.off(UIPointerActions.contextmenu, id);\n  }\n  onHover(enter, leave) {\n    var ids = [void 0, void 0];\n    if (enter)\n      ids[0] = this.on(UIPointerActions.enter, enter);\n    if (leave)\n      ids[1] = this.on(UIPointerActions.leave, leave);\n    return ids;\n  }\n  offHover(enterID, leaveID) {\n    var s = [false, false];\n    if (enterID === void 0 || enterID >= 0)\n      s[0] = this.off(UIPointerActions.enter, enterID);\n    if (leaveID === void 0 || leaveID >= 0)\n      s[1] = this.off(UIPointerActions.leave, leaveID);\n    return s;\n  }\n};\nvar UIDragger = class extends UIButton {\n  constructor(group, shape, states = {}, id) {\n    super(group, shape, states, id);\n    this._draggingID = -1;\n    this._moveHoldID = -1;\n    this._dropHoldID = -1;\n    this._upHoldID = -1;\n    if (states.dragging === void 0)\n      this._states[\"dragging\"] = false;\n    if (states.moved === void 0)\n      this._states[\"moved\"] = false;\n    if (states.offset === void 0)\n      this._states[\"offset\"] = new Pt();\n    const UA = UIPointerActions;\n    this.on(UA.down, (target, pt, type, evt) => {\n      if (this._moveHoldID === -1) {\n        this.state(\"dragging\", true);\n        this.state(\"offset\", new Pt(pt).subtract(target.group[0]));\n        this._moveHoldID = this.hold(UA.move);\n      }\n      if (this._dropHoldID === -1) {\n        this._dropHoldID = this.hold(UA.drop);\n      }\n      if (this._upHoldID === -1) {\n        this._upHoldID = this.hold(UA.up);\n      }\n      if (this._draggingID === -1) {\n        this._draggingID = this.on(UA.move, (t, p) => {\n          if (this.state(\"dragging\")) {\n            UI._trigger(this._actions[UA.uidrag], t, p, UA.uidrag, evt);\n            this.state(\"moved\", true);\n          }\n        });\n      }\n    });\n    const endDrag = (target, pt, type, evt) => {\n      this.state(\"dragging\", false);\n      this.off(UA.move, this._draggingID);\n      this._draggingID = -1;\n      this.unhold(this._moveHoldID);\n      this._moveHoldID = -1;\n      this.unhold(this._dropHoldID);\n      this._dropHoldID = -1;\n      this.unhold(this._upHoldID);\n      this._upHoldID = -1;\n      if (this.state(\"moved\")) {\n        UI._trigger(this._actions[UA.uidrop], target, pt, UA.uidrop, evt);\n        this.state(\"moved\", false);\n      }\n    };\n    this.on(UA.drop, endDrag);\n    this.on(UA.up, endDrag);\n    this.on(UA.out, endDrag);\n  }\n  onDrag(fn) {\n    return this.on(UIPointerActions.uidrag, fn);\n  }\n  offDrag(id) {\n    return this.off(UIPointerActions.uidrag, id);\n  }\n  onDrop(fn) {\n    return this.on(UIPointerActions.uidrop, fn);\n  }\n  offDrop(id) {\n    return this.off(UIPointerActions.uidrop, id);\n  }\n};\n\n// src/Space.ts\nvar Space = class {\n  constructor() {\n    this.id = \"space\";\n    this.bound = new Bound();\n    this._time = { prev: 0, diff: 0, end: -1, min: 0 };\n    this.players = {};\n    this.playerCount = 0;\n    this._animID = -1;\n    this._pause = false;\n    this._refresh = void 0;\n    this._pointer = new Pt();\n    this._isReady = false;\n    this._playing = false;\n  }\n  refresh(b) {\n    this._refresh = b;\n    return this;\n  }\n  minFrameTime(ms = 0) {\n    this._time.min = ms;\n  }\n  add(p) {\n    let player = typeof p == \"function\" ? { animate: p } : p;\n    let k = this.playerCount++;\n    let pid = this.id + k;\n    this.players[pid] = player;\n    player.animateID = pid;\n    if (player.resize && this.bound.inited)\n      player.resize(this.bound);\n    if (this._refresh === void 0)\n      this._refresh = true;\n    return this;\n  }\n  remove(player) {\n    delete this.players[player.animateID];\n    return this;\n  }\n  removeAll() {\n    this.players = {};\n    return this;\n  }\n  play(time = 0) {\n    if (time === 0 && this._animID !== -1) {\n      return;\n    }\n    this._animID = requestAnimationFrame(this.play.bind(this));\n    if (this._pause)\n      return this;\n    this._time.diff = time - this._time.prev;\n    if (this._time.diff < this._time.min)\n      return this;\n    this._time.prev = time;\n    try {\n      this.playItems(time);\n    } catch (err) {\n      cancelAnimationFrame(this._animID);\n      this._animID = -1;\n      this._playing = false;\n      throw err;\n    }\n    return this;\n  }\n  replay() {\n    this._time.end = -1;\n    this.play();\n  }\n  playItems(time) {\n    this._playing = true;\n    if (this._refresh)\n      this.clear();\n    if (this._isReady) {\n      for (let k in this.players) {\n        if (this.players[k].animate)\n          this.players[k].animate(time, this._time.diff, this);\n      }\n    }\n    if (this._time.end >= 0 && time > this._time.end) {\n      cancelAnimationFrame(this._animID);\n      this._animID = -1;\n      this._playing = false;\n    }\n  }\n  pause(toggle = false) {\n    this._pause = toggle ? !this._pause : true;\n    return this;\n  }\n  resume() {\n    this._pause = false;\n    return this;\n  }\n  stop(t = 0) {\n    this._time.end = t;\n    return this;\n  }\n  playOnce(duration = 0) {\n    this.play();\n    this.stop(duration);\n    return this;\n  }\n  render(context) {\n    if (this._renderFunc)\n      this._renderFunc(context, this);\n    return this;\n  }\n  set customRendering(f) {\n    this._renderFunc = f;\n  }\n  get customRendering() {\n    return this._renderFunc;\n  }\n  get isPlaying() {\n    return this._playing;\n  }\n  get outerBound() {\n    return this.bound.clone();\n  }\n  get innerBound() {\n    return new Bound(Pt.make(this.size.length, 0), this.size.clone());\n  }\n  get size() {\n    return this.bound.size.clone();\n  }\n  get center() {\n    return this.size.divide(2);\n  }\n  get width() {\n    return this.bound.width;\n  }\n  get height() {\n    return this.bound.height;\n  }\n};\nvar MultiTouchSpace = class extends Space {\n  constructor() {\n    super(...arguments);\n    this._pressed = false;\n    this._dragged = false;\n    this._hasMouse = false;\n    this._hasTouch = false;\n    this._hasKeyboard = false;\n  }\n  get pointer() {\n    let p = this._pointer.clone();\n    p.id = this._pointer.id;\n    return p;\n  }\n  bindCanvas(evt, callback, options = {}, customTarget) {\n    const target = customTarget ? customTarget : this._canvas;\n    target.addEventListener(evt, callback, options);\n  }\n  unbindCanvas(evt, callback, options = {}, customTarget) {\n    const target = customTarget ? customTarget : this._canvas;\n    target.removeEventListener(evt, callback, options);\n  }\n  bindDoc(evt, callback, options = {}) {\n    if (document) {\n      document.addEventListener(evt, callback, options);\n    }\n  }\n  unbindDoc(evt, callback, options = {}) {\n    if (document) {\n      document.removeEventListener(evt, callback, options);\n    }\n  }\n  bindMouse(bind = true, customTarget) {\n    if (bind) {\n      this._mouseDown = this._mouseDown.bind(this);\n      this._mouseUp = this._mouseUp.bind(this);\n      this._mouseOver = this._mouseOver.bind(this);\n      this._mouseOut = this._mouseOut.bind(this);\n      this._mouseMove = this._mouseMove.bind(this);\n      this._mouseClick = this._mouseClick.bind(this);\n      this._contextMenu = this._contextMenu.bind(this);\n      this.bindCanvas(\"mousedown\", this._mouseDown, {}, customTarget);\n      this.bindCanvas(\"mouseup\", this._mouseUp, {}, customTarget);\n      this.bindCanvas(\"mouseover\", this._mouseOver, {}, customTarget);\n      this.bindCanvas(\"mouseout\", this._mouseOut, {}, customTarget);\n      this.bindCanvas(\"mousemove\", this._mouseMove, {}, customTarget);\n      this.bindCanvas(\"click\", this._mouseClick, {}, customTarget);\n      this.bindCanvas(\"contextmenu\", this._contextMenu, {}, customTarget);\n      this._hasMouse = true;\n    } else {\n      this.unbindCanvas(\"mousedown\", this._mouseDown, {}, customTarget);\n      this.unbindCanvas(\"mouseup\", this._mouseUp, {}, customTarget);\n      this.unbindCanvas(\"mouseover\", this._mouseOver, {}, customTarget);\n      this.unbindCanvas(\"mouseout\", this._mouseOut, {}, customTarget);\n      this.unbindCanvas(\"mousemove\", this._mouseMove, {}, customTarget);\n      this.unbindCanvas(\"click\", this._mouseClick, {}, customTarget);\n      this.unbindCanvas(\"contextmenu\", this._contextMenu, {}, customTarget);\n      this._hasMouse = false;\n    }\n    return this;\n  }\n  bindTouch(bind = true, passive = false, customTarget) {\n    if (bind) {\n      this.bindCanvas(\"touchstart\", this._touchStart.bind(this), { passive }, customTarget);\n      this.bindCanvas(\"touchend\", this._mouseUp.bind(this), {}, customTarget);\n      this.bindCanvas(\"touchmove\", this._touchMove.bind(this), { passive }, customTarget);\n      this.bindCanvas(\"touchcancel\", this._mouseOut.bind(this), {}, customTarget);\n      this._hasTouch = true;\n    } else {\n      this.unbindCanvas(\"touchstart\", this._touchStart.bind(this), { passive }, customTarget);\n      this.unbindCanvas(\"touchend\", this._mouseUp.bind(this), {}, customTarget);\n      this.unbindCanvas(\"touchmove\", this._touchMove.bind(this), { passive }, customTarget);\n      this.unbindCanvas(\"touchcancel\", this._mouseOut.bind(this), {}, customTarget);\n      this._hasTouch = false;\n    }\n    return this;\n  }\n  bindKeyboard(bind = true) {\n    if (bind) {\n      this._keyDownBind = this._keyDown.bind(this);\n      this._keyUpBind = this._keyUp.bind(this);\n      this.bindDoc(\"keydown\", this._keyDownBind, {});\n      this.bindDoc(\"keyup\", this._keyUpBind, {});\n      this._hasKeyboard = true;\n    } else {\n      this.unbindDoc(\"keydown\", this._keyDownBind, {});\n      this.unbindDoc(\"keyup\", this._keyUpBind, {});\n      this._hasKeyboard = false;\n    }\n    return this;\n  }\n  touchesToPoints(evt, which = \"touches\") {\n    if (!evt || !evt[which])\n      return [];\n    let ts = [];\n    for (var i = 0; i < evt[which].length; i++) {\n      let t = evt[which].item(i);\n      ts.push(new Pt(t.pageX - this.bound.topLeft.x, t.pageY - this.bound.topLeft.y));\n    }\n    return ts;\n  }\n  _mouseAction(type, evt) {\n    if (!this.isPlaying)\n      return;\n    let px = 0, py = 0;\n    if (evt instanceof MouseEvent) {\n      for (let k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          let v = this.players[k];\n          px = evt.pageX - this.outerBound.x;\n          py = evt.pageY - this.outerBound.y;\n          if (v.action)\n            v.action(type, px, py, evt);\n        }\n      }\n    } else {\n      for (let k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          let v = this.players[k];\n          let c = evt.changedTouches && evt.changedTouches.length > 0;\n          let touch = evt.changedTouches.item(0);\n          px = c ? touch.pageX - this.outerBound.x : 0;\n          py = c ? touch.pageY - this.outerBound.y : 0;\n          if (v.action)\n            v.action(type, px, py, evt);\n        }\n      }\n    }\n    if (type) {\n      this._pointer.to(px, py);\n      this._pointer.id = type;\n    }\n  }\n  _mouseDown(evt) {\n    this._mouseAction(UIPointerActions.down, evt);\n    this._pressed = true;\n    return false;\n  }\n  _mouseUp(evt) {\n    if (this._dragged) {\n      this._mouseAction(UIPointerActions.drop, evt);\n    } else {\n      this._mouseAction(UIPointerActions.up, evt);\n    }\n    this._pressed = false;\n    this._dragged = false;\n    return false;\n  }\n  _mouseMove(evt) {\n    this._mouseAction(UIPointerActions.move, evt);\n    if (this._pressed) {\n      this._dragged = true;\n      this._mouseAction(UIPointerActions.drag, evt);\n    }\n    return false;\n  }\n  _mouseOver(evt) {\n    this._mouseAction(UIPointerActions.over, evt);\n    return false;\n  }\n  _mouseOut(evt) {\n    this._mouseAction(UIPointerActions.out, evt);\n    if (this._dragged)\n      this._mouseAction(UIPointerActions.drop, evt);\n    this._dragged = false;\n    return false;\n  }\n  _mouseClick(evt) {\n    this._mouseAction(UIPointerActions.click, evt);\n    this._pressed = false;\n    this._dragged = false;\n    return false;\n  }\n  _contextMenu(evt) {\n    this._mouseAction(UIPointerActions.contextmenu, evt);\n    return false;\n  }\n  _touchMove(evt) {\n    this._mouseMove(evt);\n    evt.preventDefault();\n    return false;\n  }\n  _touchStart(evt) {\n    this._mouseDown(evt);\n    evt.preventDefault();\n    return false;\n  }\n  _keyDown(evt) {\n    this._keyboardAction(UIPointerActions.keydown, evt);\n    return false;\n  }\n  _keyUp(evt) {\n    this._keyboardAction(UIPointerActions.keyup, evt);\n    return false;\n  }\n  _keyboardAction(type, evt) {\n    if (!this.isPlaying)\n      return;\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let v = this.players[k];\n        if (v.action)\n          v.action(type, evt.shiftKey ? 1 : 0, evt.altKey ? 1 : 0, evt);\n      }\n    }\n  }\n};\n\n// src/Form.ts\nvar Form = class {\n  constructor() {\n    this._ready = false;\n  }\n  get ready() {\n    return this._ready;\n  }\n};\nvar VisualForm = class extends Form {\n  constructor() {\n    super(...arguments);\n    this._filled = true;\n    this._stroked = true;\n    this._font = new Font(14, \"sans-serif\");\n  }\n  get filled() {\n    return this._filled;\n  }\n  set filled(b) {\n    this._filled = b;\n  }\n  get stroked() {\n    return this._stroked;\n  }\n  set stroked(b) {\n    this._stroked = b;\n  }\n  get currentFont() {\n    return this._font;\n  }\n  _multiple(groups, shape, ...rest) {\n    if (!groups)\n      return this;\n    for (let i = 0, len = groups.length; i < len; i++) {\n      this[shape](groups[i], ...rest);\n    }\n    return this;\n  }\n  alpha(a) {\n    return this;\n  }\n  fill(c) {\n    return this;\n  }\n  fillOnly(c) {\n    this.stroke(false);\n    return this.fill(c);\n  }\n  stroke(c, width, linejoin, linecap) {\n    return this;\n  }\n  strokeOnly(c, width, linejoin, linecap) {\n    this.fill(false);\n    return this.stroke(c, width, linejoin, linecap);\n  }\n  points(pts, radius, shape) {\n    if (!pts)\n      return;\n    for (let i = 0, len = pts.length; i < len; i++) {\n      this.point(pts[i], radius, shape);\n    }\n    return this;\n  }\n  circles(groups) {\n    return this._multiple(groups, \"circle\");\n  }\n  squares(groups) {\n    return this._multiple(groups, \"square\");\n  }\n  lines(groups) {\n    return this._multiple(groups, \"line\");\n  }\n  polygons(groups) {\n    return this._multiple(groups, \"polygon\");\n  }\n  rects(groups) {\n    return this._multiple(groups, \"rect\");\n  }\n};\nvar Font = class {\n  constructor(size = 12, face = \"sans-serif\", weight = \"\", style = \"\", lineHeight = 1.5) {\n    this.size = size;\n    this.face = face;\n    this.style = style;\n    this.weight = weight;\n    this.lineHeight = lineHeight;\n  }\n  get value() {\n    return `${this.style} ${this.weight} ${this.size}px/${this.lineHeight} ${this.face}`;\n  }\n  toString() {\n    return this.value;\n  }\n};\n\n// src/Typography.ts\nvar Typography = class {\n  static textWidthEstimator(fn, samples = [\"M\", \"n\", \".\"], distribution = [0.06, 0.8, 0.14]) {\n    let m = samples.map(fn);\n    let avg = new Pt(distribution).dot(m);\n    return (str) => str.length * avg;\n  }\n  static truncate(fn, str, width, tail = \"\") {\n    let trim = Math.floor(str.length * Math.min(1, width / fn(str)));\n    if (trim < str.length) {\n      trim = Math.max(0, trim - tail.length);\n      return [str.substr(0, trim) + tail, trim];\n    } else {\n      return [str, str.length];\n    }\n  }\n  static fontSizeToBox(box, ratio = 1, byHeight = true) {\n    let bound = Bound.fromGroup(box);\n    let h = byHeight ? bound.height : bound.width;\n    let f = ratio * h;\n    return function(box2) {\n      let bound2 = Bound.fromGroup(box2);\n      let nh = (byHeight ? bound2.height : bound2.width) / h;\n      return f * nh;\n    };\n  }\n  static fontSizeToThreshold(threshold, direction = 0) {\n    return function(defaultSize, val) {\n      let d = defaultSize * val / threshold;\n      if (direction < 0)\n        return Math.min(d, defaultSize);\n      if (direction > 0)\n        return Math.max(d, defaultSize);\n      return d;\n    };\n  }\n};\n\n// src/Image.ts\nvar Img = class {\n  constructor(editable = false, space, crossOrigin) {\n    this._scale = 1;\n    this._loaded = false;\n    this._editable = editable;\n    this._space = space;\n    this._scale = this._space ? this._space.pixelScale : 1;\n    this._img = new Image();\n    if (crossOrigin)\n      this._img.crossOrigin = \"Anonymous\";\n  }\n  static load(src, editable = false, space, ready) {\n    const img = new Img(editable, space);\n    img.load(src).then((res) => {\n      if (ready)\n        ready(res);\n    });\n    return img;\n  }\n  static async loadAsync(src, editable = false, space) {\n    const img = await new Img(editable, space).load(src);\n    return img;\n  }\n  static async loadPattern(src, space, repeat = \"repeat\", editable = false) {\n    const img = await Img.loadAsync(src, editable, space);\n    return img.pattern(repeat);\n  }\n  static blank(size, space, scale) {\n    let img = new Img(true, space);\n    const s = scale ? scale : space.pixelScale;\n    img.initCanvas(size[0], size[1], s);\n    return img;\n  }\n  load(src) {\n    return new Promise((resolve, reject) => {\n      if (this._editable && !document) {\n        reject(\"Cannot create html canvas element. document not found.\");\n      }\n      this._img.src = src;\n      this._img.onload = () => {\n        if (this._editable) {\n          if (!this._cv)\n            this._cv = document.createElement(\"canvas\");\n          this._drawToScale(this._scale, this._img);\n          this._data = this._ctx.getImageData(0, 0, this._cv.width, this._cv.height);\n        }\n        this._loaded = true;\n        resolve(this);\n      };\n      this._img.onerror = (evt) => {\n        reject(evt);\n      };\n    });\n  }\n  _drawToScale(canvasScale, img) {\n    const nw = img.width;\n    const nh = img.height;\n    this.initCanvas(nw, nh, canvasScale);\n    if (img)\n      this._ctx.drawImage(img, 0, 0, nw, nh, 0, 0, this._cv.width, this._cv.height);\n  }\n  initCanvas(width, height, canvasScale = 1) {\n    if (!this._editable) {\n      console.error(\"Cannot initiate canvas because this Img is not set to be editable\");\n      return;\n    }\n    if (!this._cv)\n      this._cv = document.createElement(\"canvas\");\n    const cms = typeof canvasScale === \"number\" ? [canvasScale, canvasScale] : canvasScale;\n    this._cv.width = width * cms[0];\n    this._cv.height = height * cms[1];\n    this._ctx = this._cv.getContext(\"2d\");\n    this._loaded = true;\n  }\n  bitmap(size) {\n    const w = size ? size[0] : this._cv.width;\n    const h = size ? size[1] : this._cv.height;\n    return createImageBitmap(this._cv, 0, 0, w, h);\n  }\n  pattern(reptition = \"repeat\", dynamic = false) {\n    if (!this._space)\n      throw \"Cannot find CanvasSpace ctx to create image pattern\";\n    return this._space.ctx.createPattern(dynamic ? this._cv : this._img, reptition);\n  }\n  sync() {\n    if (this._scale !== 1) {\n      this.bitmap().then((b) => {\n        this._drawToScale(1 / this._scale, b);\n        this.load(this.toBase64());\n      });\n    } else {\n      this._img.src = this.toBase64();\n    }\n  }\n  pixel(p, rescale = true) {\n    const s = typeof rescale == \"number\" ? rescale : rescale ? this._scale : 1;\n    return Img.getPixel(this._data, [p[0] * s, p[1] * s]);\n  }\n  static getPixel(imgData, p) {\n    const no = new Pt(0, 0, 0, 0);\n    if (p[0] >= imgData.width || p[1] >= imgData.height)\n      return no;\n    const i = Math.floor(p[1]) * (imgData.width * 4) + Math.floor(p[0]) * 4;\n    const d = imgData.data;\n    if (i >= d.length - 4)\n      return no;\n    return new Pt(d[i], d[i + 1], d[i + 2], d[i + 3]);\n  }\n  resize(sizeOrScale, asScale = false) {\n    let s = asScale ? sizeOrScale : [sizeOrScale[0] / this._img.naturalWidth, sizeOrScale[1] / this._img.naturalHeight];\n    this._drawToScale(s, this._img);\n    this._data = this._ctx.getImageData(0, 0, this._cv.width, this._cv.height);\n    return this;\n  }\n  crop(box) {\n    let p = box.topLeft.scale(this._scale);\n    let s = box.size.scale(this._scale);\n    return this._ctx.getImageData(p.x, p.y, s.x, s.y);\n  }\n  filter(css) {\n    this._ctx.filter = css;\n    this._ctx.drawImage(this._cv, 0, 0);\n    this._ctx.filter = \"none\";\n    return this;\n  }\n  cleanup() {\n    if (this._cv)\n      this._cv.remove();\n    if (this._img)\n      this._img.remove();\n    this._data = null;\n  }\n  static fromBlob(blob, editable = false, space) {\n    let url = URL.createObjectURL(blob);\n    return new Img(editable, space).load(url);\n  }\n  static imageDataToBlob(data) {\n    return new Promise(function(resolve, reject) {\n      if (!document) {\n        reject(\"Cannot create html canvas element. document not found.\");\n      }\n      let cv = document.createElement(\"canvas\");\n      cv.width = data.width;\n      cv.height = data.height;\n      cv.getContext(\"2d\").putImageData(data, 0, 0);\n      cv.toBlob((blob) => {\n        resolve(blob);\n        cv.remove();\n      });\n    });\n  }\n  toBase64() {\n    return this._cv.toDataURL();\n  }\n  toBlob() {\n    return new Promise((resolve) => {\n      this._cv.toBlob((blob) => resolve(blob));\n    });\n  }\n  getForm() {\n    if (!this._editable) {\n      console.error(\"Cannot get a CanvasForm because this Img is not editable\");\n    }\n    return this._ctx ? new CanvasForm(this._ctx) : void 0;\n  }\n  get current() {\n    return this._editable ? this._cv : this._img;\n  }\n  get image() {\n    return this._img;\n  }\n  get canvas() {\n    return this._cv;\n  }\n  get data() {\n    return this._data;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  get loaded() {\n    return this._loaded;\n  }\n  get pixelScale() {\n    return this._scale;\n  }\n  get imageSize() {\n    if (!this._img.width || !this._img.height) {\n      return this.canvasSize.$divide(this._scale);\n    } else {\n      return new Pt(this._img.width, this._img.height);\n    }\n  }\n  get canvasSize() {\n    return new Pt(this._cv.width, this._cv.height);\n  }\n  get scaledMatrix() {\n    const s = 1 / this._scale;\n    return new Mat().scale2D([s, s]);\n  }\n};\n\n// src/Canvas.ts\nvar CanvasSpace2 = class extends MultiTouchSpace {\n  constructor(elem, callback) {\n    super();\n    this._pixelScale = 1;\n    this._autoResize = true;\n    this._bgcolor = \"#e1e9f0\";\n    this._offscreen = false;\n    this._initialResize = false;\n    var _selector = null;\n    var _existed = false;\n    this.id = \"pt\";\n    if (elem instanceof Element) {\n      _selector = elem;\n      this.id = \"pts_existing_space\";\n    } else {\n      let id = elem;\n      id = elem[0] === \"#\" || elem[0] === \".\" ? elem : \"#\" + elem;\n      _selector = document.querySelector(id);\n      _existed = true;\n      this.id = id.substr(1);\n    }\n    if (!_selector) {\n      this._container = this._createElement(\"div\", this.id + \"_container\");\n      this._canvas = this._createElement(\"canvas\", this.id);\n      this._container.appendChild(this._canvas);\n      document.body.appendChild(this._container);\n      _existed = false;\n    } else if (_selector.nodeName.toLowerCase() != \"canvas\") {\n      this._container = _selector;\n      this._canvas = this._createElement(\"canvas\", this.id + \"_canvas\");\n      this._container.appendChild(this._canvas);\n      this._initialResize = true;\n    } else {\n      this._canvas = _selector;\n      this._container = _selector.parentElement;\n      this._autoResize = false;\n    }\n    setTimeout(this._ready.bind(this, callback), 100);\n    this._ctx = this._canvas.getContext(\"2d\");\n  }\n  _createElement(elem = \"div\", id) {\n    let d = document.createElement(elem);\n    d.setAttribute(\"id\", id);\n    return d;\n  }\n  _ready(callback) {\n    if (!this._container)\n      throw new Error(`Cannot initiate #${this.id} element`);\n    this._isReady = true;\n    this._resizeHandler(null);\n    this.clear(this._bgcolor);\n    this._canvas.dispatchEvent(new Event(\"ready\"));\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        if (this.players[k].start)\n          this.players[k].start(this.bound.clone(), this);\n      }\n    }\n    this._pointer = this.center;\n    this._initialResize = false;\n    if (callback)\n      callback(this.bound, this._canvas);\n  }\n  setup(opt) {\n    this._bgcolor = opt.bgcolor ? opt.bgcolor : \"transparent\";\n    this.autoResize = opt.resize != void 0 ? opt.resize : false;\n    if (opt.retina !== false) {\n      let r1 = window ? window.devicePixelRatio || 1 : 1;\n      let r2 = this._ctx.webkitBackingStorePixelRatio || this._ctx.mozBackingStorePixelRatio || this._ctx.msBackingStorePixelRatio || this._ctx.oBackingStorePixelRatio || this._ctx.backingStorePixelRatio || 1;\n      this._pixelScale = Math.max(1, r1 / r2);\n    }\n    if (opt.offscreen) {\n      this._offscreen = true;\n      this._offCanvas = this._createElement(\"canvas\", this.id + \"_offscreen\");\n      this._offCtx = this._offCanvas.getContext(\"2d\");\n    } else {\n      this._offscreen = false;\n    }\n    if (opt.pixelDensity) {\n      this._pixelScale = opt.pixelDensity;\n    }\n    return this;\n  }\n  set autoResize(auto) {\n    if (!window)\n      return;\n    this._autoResize = auto;\n    if (auto) {\n      window.addEventListener(\"resize\", this._resizeHandler.bind(this));\n    } else {\n      window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    }\n  }\n  get autoResize() {\n    return this._autoResize;\n  }\n  resize(b, evt) {\n    this.bound = b;\n    this._canvas.width = Math.ceil(this.bound.size.x) * this._pixelScale;\n    this._canvas.height = Math.ceil(this.bound.size.y) * this._pixelScale;\n    this._canvas.style.width = Math.ceil(this.bound.size.x) + \"px\";\n    this._canvas.style.height = Math.ceil(this.bound.size.y) + \"px\";\n    if (this._offscreen) {\n      this._offCanvas.width = Math.ceil(this.bound.size.x) * this._pixelScale;\n      this._offCanvas.height = Math.ceil(this.bound.size.y) * this._pixelScale;\n    }\n    if (this._pixelScale != 1) {\n      this._ctx.scale(this._pixelScale, this._pixelScale);\n      if (this._offscreen) {\n        this._offCtx.scale(this._pixelScale, this._pixelScale);\n      }\n    }\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let p = this.players[k];\n        if (p.resize)\n          p.resize(this.bound, evt);\n      }\n    }\n    this.render(this._ctx);\n    if (evt && !this.isPlaying)\n      this.playOnce(0);\n    return this;\n  }\n  _resizeHandler(evt) {\n    if (!window)\n      return;\n    let b = this._autoResize || this._initialResize ? this._container.getBoundingClientRect() : this._canvas.getBoundingClientRect();\n    if (b) {\n      let box = Bound.fromBoundingRect(b);\n      box.center = box.center.add(window.pageXOffset, window.pageYOffset);\n      this.resize(box, evt);\n    }\n  }\n  set background(bg) {\n    this._bgcolor = bg;\n  }\n  get background() {\n    return this._bgcolor;\n  }\n  get pixelScale() {\n    return this._pixelScale;\n  }\n  get hasOffscreen() {\n    return this._offscreen;\n  }\n  get offscreenCtx() {\n    return this._offCtx;\n  }\n  get offscreenCanvas() {\n    return this._offCanvas;\n  }\n  getForm() {\n    return new CanvasForm(this);\n  }\n  get element() {\n    return this._canvas;\n  }\n  get parent() {\n    return this._container;\n  }\n  get ready() {\n    return this._isReady;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  clear(bg) {\n    if (bg)\n      this._bgcolor = bg;\n    const lastColor = this._ctx.fillStyle;\n    const px = Math.ceil(this.pixelScale);\n    if (!this._bgcolor || this._bgcolor === \"transparent\") {\n      this._ctx.clearRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n    } else {\n      if (this._bgcolor.indexOf(\"rgba\") === 0 || this._bgcolor.length === 9 && this._bgcolor.indexOf(\"#\") === 0) {\n        this._ctx.clearRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n      }\n      this._ctx.fillStyle = this._bgcolor;\n      this._ctx.fillRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n    }\n    this._ctx.fillStyle = lastColor;\n    return this;\n  }\n  clearOffscreen(bg) {\n    if (this._offscreen) {\n      const px = Math.ceil(this.pixelScale);\n      if (bg) {\n        this._offCtx.fillStyle = bg;\n        this._offCtx.fillRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n      } else {\n        this._offCtx.clearRect(-px, -px, this._offCanvas.width + px, this._offCanvas.height + px);\n      }\n    }\n    return this;\n  }\n  playItems(time) {\n    if (this._isReady) {\n      this._ctx.save();\n      if (this._offscreen)\n        this._offCtx.save();\n      super.playItems(time);\n      this._ctx.restore();\n      if (this._offscreen)\n        this._offCtx.restore();\n      this.render(this._ctx);\n    }\n  }\n  dispose() {\n    if (!window)\n      return;\n    window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    this.stop();\n    this.removeAll();\n    return this;\n  }\n  recorder(downloadOrCallback, filetype = \"webm\", bitrate = 15e6) {\n    let stream = this._canvas.captureStream();\n    const recorder = new MediaRecorder(stream, { mimeType: `video/${filetype}`, bitsPerSecond: bitrate });\n    recorder.ondataavailable = function(d) {\n      let url = URL.createObjectURL(new Blob([d.data], { type: `video/${filetype}` }));\n      if (typeof downloadOrCallback === \"function\") {\n        downloadOrCallback(url);\n      } else if (downloadOrCallback) {\n        let a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `canvas_video.${filetype}`;\n        a.click();\n        a.remove();\n      }\n    };\n    return recorder;\n  }\n};\nvar CanvasForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      fillStyle: \"#f03\",\n      strokeStyle: \"#fff\",\n      lineWidth: 1,\n      lineJoin: \"bevel\",\n      lineCap: \"butt\",\n      globalAlpha: 1\n    };\n    if (!space)\n      return this;\n    const _setup = (ctx) => {\n      this._ctx = ctx;\n      this._ctx.fillStyle = this._style.fillStyle;\n      this._ctx.strokeStyle = this._style.strokeStyle;\n      this._ctx.lineJoin = \"bevel\";\n      this._ctx.font = this._font.value;\n      this._ready = true;\n    };\n    if (space instanceof CanvasRenderingContext2D) {\n      _setup(space);\n    } else {\n      this._space = space;\n      this._space.add({ start: () => {\n        _setup(this._space.ctx);\n      } });\n    }\n  }\n  get space() {\n    return this._space;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  useOffscreen(off = true, clear = false) {\n    if (clear)\n      this._space.clearOffscreen(typeof clear == \"string\" ? clear : null);\n    this._ctx = this._space.hasOffscreen && off ? this._space.offscreenCtx : this._space.ctx;\n    return this;\n  }\n  renderOffscreen(offset = [0, 0]) {\n    if (this._space.hasOffscreen) {\n      this._space.ctx.drawImage(\n        this._space.offscreenCanvas,\n        offset[0],\n        offset[1],\n        this._space.width,\n        this._space.height\n      );\n    }\n  }\n  alpha(a) {\n    this._ctx.globalAlpha = a;\n    this._style.globalAlpha = a;\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.filled = c;\n    } else {\n      this.filled = true;\n      this._style.fillStyle = c;\n      this._ctx.fillStyle = c;\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.stroked = c;\n    } else {\n      this.stroked = true;\n      this._style.strokeStyle = c;\n      this._ctx.strokeStyle = c;\n      if (width) {\n        this._ctx.lineWidth = width;\n        this._style.lineWidth = width;\n      }\n      if (linejoin) {\n        this._ctx.lineJoin = linejoin;\n        this._style.lineJoin = linejoin;\n      }\n      if (linecap) {\n        this._ctx.lineCap = linecap;\n        this._style.lineCap = linecap;\n      }\n    }\n    return this;\n  }\n  applyFillStroke(filled = true, stroked = true, strokeWidth = 1) {\n    if (filled) {\n      if (typeof filled === \"string\")\n        this.fill(filled);\n      this._ctx.fill();\n    }\n    if (stroked) {\n      if (typeof stroked === \"string\")\n        this.stroke(stroked, strokeWidth);\n      this._ctx.stroke();\n    }\n    return this;\n  }\n  gradient(stops) {\n    let vals = [];\n    if (stops.length < 2)\n      stops.push([0.99, \"#000\"], [1, \"#000\"]);\n    for (let i = 0, len = stops.length; i < len; i++) {\n      let t = typeof stops[i] === \"string\" ? i * (1 / (stops.length - 1)) : stops[i][0];\n      let v = typeof stops[i] === \"string\" ? stops[i] : stops[i][1];\n      vals.push([t, v]);\n    }\n    return (area1, area2) => {\n      let grad = area2 ? this._ctx.createRadialGradient(area1[0][0], area1[0][1], Math.abs(area1[1][0]), area2[0][0], area2[0][1], Math.abs(area2[1][0])) : this._ctx.createLinearGradient(area1[0][0], area1[0][1], area1[1][0], area1[1][1]);\n      for (let i = 0, len = vals.length; i < len; i++) {\n        grad.addColorStop(vals[i][0], vals[i][1]);\n      }\n      return grad;\n    };\n  }\n  composite(mode = \"source-over\") {\n    this._ctx.globalCompositeOperation = mode;\n    return this;\n  }\n  clip() {\n    this._ctx.clip();\n    return this;\n  }\n  dash(segments = true, offset = 0) {\n    if (!segments) {\n      this._ctx.setLineDash([]);\n      this._ctx.lineDashOffset = 0;\n    } else {\n      if (segments === true) {\n        segments = [5, 5];\n      }\n      this._ctx.setLineDash([segments[0], segments[1]]);\n      this._ctx.lineDashOffset = offset;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.font = this._font.value;\n    if (this._estimateTextWidth)\n      this.fontWidthEstimate(true);\n    return this;\n  }\n  fontWidthEstimate(estimate = true) {\n    this._estimateTextWidth = estimate ? Typography.textWidthEstimator((c) => this._ctx.measureText(c).width) : void 0;\n    return this;\n  }\n  getTextWidth(c) {\n    return !this._estimateTextWidth ? this._ctx.measureText(c + \" .\").width : this._estimateTextWidth(c);\n  }\n  _textTruncate(str, width, tail = \"\") {\n    return Typography.truncate(this.getTextWidth.bind(this), str, width, tail);\n  }\n  _textAlign(box, vertical, offset, center) {\n    let _box = Util.iterToArray(box);\n    if (!Util.arrayCheck(_box))\n      return;\n    if (!center)\n      center = Rectangle.center(_box);\n    var px = _box[0][0];\n    if (this._ctx.textAlign == \"end\" || this._ctx.textAlign == \"right\") {\n      px = _box[1][0];\n    } else if (this._ctx.textAlign == \"center\" || this._ctx.textAlign == \"middle\") {\n      px = center[0];\n    }\n    var py = center[1];\n    if (vertical == \"top\" || vertical == \"start\") {\n      py = _box[0][1];\n    } else if (vertical == \"end\" || vertical == \"bottom\") {\n      py = _box[1][1];\n    }\n    return offset ? new Pt(px + offset[0], py + offset[1]) : new Pt(px, py);\n  }\n  reset() {\n    for (let k in this._style) {\n      if (this._style.hasOwnProperty(k)) {\n        this._ctx[k] = this._style[k];\n      }\n    }\n    this._font = new Font();\n    this._ctx.font = this._font.value;\n    return this;\n  }\n  _paint() {\n    if (this._filled)\n      this._ctx.fill();\n    if (this._stroked)\n      this._ctx.stroke();\n  }\n  static point(ctx, p, radius = 5, shape = \"square\") {\n    if (!p)\n      return;\n    if (!CanvasForm[shape])\n      throw new Error(`${shape} is not a static function of CanvasForm`);\n    CanvasForm[shape](ctx, p, radius);\n  }\n  point(p, radius = 5, shape = \"square\") {\n    CanvasForm.point(this._ctx, p, radius, shape);\n    this._paint();\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    if (!pt)\n      return;\n    ctx.beginPath();\n    ctx.arc(pt[0], pt[1], radius, 0, Const.two_pi, false);\n    ctx.closePath();\n  }\n  circle(pts) {\n    let p = Util.iterToArray(pts);\n    CanvasForm.circle(this._ctx, p[0], p[1][0]);\n    this._paint();\n    return this;\n  }\n  static ellipse(ctx, pt, radius, rotation = 0, startAngle = 0, endAngle = Const.two_pi, cc = false) {\n    if (!pt || !radius)\n      return;\n    ctx.beginPath();\n    ctx.ellipse(pt[0], pt[1], radius[0], radius[1], rotation, startAngle, endAngle, cc);\n  }\n  ellipse(pt, radius, rotation = 0, startAngle = 0, endAngle = Const.two_pi, cc = false) {\n    CanvasForm.ellipse(this._ctx, pt, radius, rotation, startAngle, endAngle, cc);\n    this._paint();\n    return this;\n  }\n  static arc(ctx, pt, radius, startAngle, endAngle, cc) {\n    if (!pt)\n      return;\n    ctx.beginPath();\n    ctx.arc(pt[0], pt[1], radius, startAngle, endAngle, cc);\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    CanvasForm.arc(this._ctx, pt, radius, startAngle, endAngle, cc);\n    this._paint();\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    if (!pt)\n      return;\n    let x1 = pt[0] - halfsize;\n    let y1 = pt[1] - halfsize;\n    let x2 = pt[0] + halfsize;\n    let y2 = pt[1] + halfsize;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x1, y2);\n    ctx.lineTo(x2, y2);\n    ctx.lineTo(x2, y1);\n    ctx.closePath();\n  }\n  square(pt, halfsize) {\n    CanvasForm.square(this._ctx, pt, halfsize);\n    this._paint();\n    return this;\n  }\n  static line(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    let i = 0;\n    ctx.beginPath();\n    for (let it of pts) {\n      if (it) {\n        if (i++ > 0) {\n          ctx.lineTo(it[0], it[1]);\n        } else {\n          ctx.moveTo(it[0], it[1]);\n        }\n      }\n    }\n  }\n  line(pts) {\n    CanvasForm.line(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static polygon(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    CanvasForm.line(ctx, pts);\n    ctx.closePath();\n  }\n  polygon(pts) {\n    CanvasForm.polygon(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static rect(ctx, pts) {\n    let p = Util.iterToArray(pts);\n    if (!Util.arrayCheck(p))\n      return;\n    ctx.beginPath();\n    ctx.moveTo(p[0][0], p[0][1]);\n    ctx.lineTo(p[0][0], p[1][1]);\n    ctx.lineTo(p[1][0], p[1][1]);\n    ctx.lineTo(p[1][0], p[0][1]);\n    ctx.closePath();\n  }\n  rect(pts) {\n    CanvasForm.rect(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static image(ctx, ptOrRect, img, orig) {\n    let t = Util.iterToArray(ptOrRect);\n    let pos;\n    if (typeof t[0] === \"number\") {\n      pos = t;\n    } else {\n      if (orig) {\n        let o = Util.iterToArray(orig);\n        pos = [\n          o[0][0],\n          o[0][1],\n          o[1][0] - o[0][0],\n          o[1][1] - o[0][1],\n          t[0][0],\n          t[0][1],\n          t[1][0] - t[0][0],\n          t[1][1] - t[0][1]\n        ];\n      } else {\n        pos = [t[0][0], t[0][1], t[1][0] - t[0][0], t[1][1] - t[0][1]];\n      }\n    }\n    if (img instanceof Img) {\n      if (img.loaded) {\n        ctx.drawImage(img.image, ...pos);\n      }\n    } else {\n      ctx.drawImage(img, ...pos);\n    }\n  }\n  image(ptOrRect, img, orig) {\n    if (img instanceof Img) {\n      if (img.loaded) {\n        CanvasForm.image(this._ctx, ptOrRect, img.image, orig);\n      }\n    } else {\n      CanvasForm.image(this._ctx, ptOrRect, img, orig);\n    }\n    return this;\n  }\n  static imageData(ctx, ptOrRect, img) {\n    let t = Util.iterToArray(ptOrRect);\n    if (typeof t[0] === \"number\") {\n      ctx.putImageData(img, t[0], t[1]);\n    } else {\n      ctx.putImageData(img, t[0][0], t[0][1], t[0][0], t[0][1], t[1][0], t[1][1]);\n    }\n  }\n  imageData(ptOrRect, img) {\n    CanvasForm.imageData(this._ctx, ptOrRect, img);\n    return this;\n  }\n  static text(ctx, pt, txt, maxWidth) {\n    if (!pt)\n      return;\n    ctx.fillText(txt, pt[0], pt[1], maxWidth);\n  }\n  text(pt, txt, maxWidth) {\n    CanvasForm.text(this._ctx, pt, txt, maxWidth);\n    return this;\n  }\n  textBox(box, txt, verticalAlign = \"middle\", tail = \"\", overrideBaseline = true) {\n    if (overrideBaseline)\n      this._ctx.textBaseline = verticalAlign;\n    let size = Rectangle.size(box);\n    let t = this._textTruncate(txt, size[0], tail);\n    this.text(this._textAlign(box, verticalAlign), t[0]);\n    return this;\n  }\n  paragraphBox(box, txt, lineHeight = 1.2, verticalAlign = \"top\", crop = true) {\n    let b = Util.iterToArray(box);\n    let size = Rectangle.size(b);\n    this._ctx.textBaseline = \"top\";\n    let lstep = this._font.size * lineHeight;\n    let nextLine = (sub, buffer = [], cc = 0) => {\n      if (!sub)\n        return buffer;\n      if (crop && cc * lstep > size[1] - lstep * 2)\n        return buffer;\n      if (cc > 1e4)\n        throw new Error(\"max recursion reached (10000)\");\n      let t = this._textTruncate(sub, size[0], \"\");\n      let newln = t[0].indexOf(\"\\n\");\n      if (newln >= 0) {\n        buffer.push(t[0].substr(0, newln));\n        return nextLine(sub.substr(newln + 1), buffer, cc + 1);\n      }\n      let dt = t[0].lastIndexOf(\" \") + 1;\n      if (dt <= 0 || t[1] === sub.length)\n        dt = void 0;\n      let line = t[0].substr(0, dt);\n      buffer.push(line);\n      return t[1] <= 0 || t[1] === sub.length ? buffer : nextLine(sub.substr(dt || t[1]), buffer, cc + 1);\n    };\n    let lines = nextLine(txt);\n    let lsize = lines.length * lstep;\n    let lbox = b;\n    if (verticalAlign == \"middle\" || verticalAlign == \"center\") {\n      let lpad = (size[1] - lsize) / 2;\n      if (crop)\n        lpad = Math.max(0, lpad);\n      lbox = new Group(b[0].$add(0, lpad), b[1].$subtract(0, lpad));\n    } else if (verticalAlign == \"bottom\") {\n      lbox = new Group(b[0].$add(0, size[1] - lsize), b[1]);\n    } else {\n      lbox = new Group(b[0], b[0].$add(size[0], lsize));\n    }\n    let center = Rectangle.center(lbox);\n    for (let i = 0, len = lines.length; i < len; i++) {\n      this.text(this._textAlign(lbox, \"top\", [0, i * lstep], center), lines[i]);\n    }\n    return this;\n  }\n  alignText(alignment = \"left\", baseline = \"alphabetic\") {\n    if (baseline == \"center\")\n      baseline = \"middle\";\n    if (baseline == \"baseline\")\n      baseline = \"alphabetic\";\n    this._ctx.textAlign = alignment;\n    this._ctx.textBaseline = baseline;\n    return this;\n  }\n  log(txt) {\n    let w = this._ctx.measureText(txt).width + 20;\n    this.stroke(false).fill(\"rgba(0,0,0,.4)\").rect([[0, 0], [w, 20]]);\n    this.fill(\"#fff\").text([10, 14], txt);\n    return this;\n  }\n};\n\n// src/Create.ts\nvar Create = class {\n  static distributeRandom(bound, count, dimensions = 2) {\n    let pts = new Group();\n    for (let i = 0; i < count; i++) {\n      let p = [bound.x + Num.random() * bound.width];\n      if (dimensions > 1)\n        p.push(bound.y + Num.random() * bound.height);\n      if (dimensions > 2)\n        p.push(bound.z + Num.random() * bound.depth);\n      pts.push(new Pt(p));\n    }\n    return pts;\n  }\n  static distributeLinear(line, count) {\n    let _line = Util.iterToArray(line);\n    let ln = Line.subpoints(_line, count - 2);\n    ln.unshift(_line[0]);\n    ln.push(_line[_line.length - 1]);\n    return ln;\n  }\n  static gridPts(bound, columns, rows, orientation = [0.5, 0.5]) {\n    if (columns === 0 || rows === 0)\n      throw new Error(\"grid columns and rows cannot be 0\");\n    let unit = bound.size.$subtract(1).$divide(columns, rows);\n    let offset = unit.$multiply(orientation);\n    let g = new Group();\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        g.push(bound.topLeft.$add(unit.$multiply(c, r)).add(offset));\n      }\n    }\n    return g;\n  }\n  static gridCells(bound, columns, rows) {\n    if (columns === 0 || rows === 0)\n      throw new Error(\"grid columns and rows cannot be 0\");\n    let unit = bound.size.$subtract(1).divide(columns, rows);\n    let g = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        g.push(new Group(\n          bound.topLeft.$add(unit.$multiply(c, r)),\n          bound.topLeft.$add(unit.$multiply(c, r).add(unit))\n        ));\n      }\n    }\n    return g;\n  }\n  static radialPts(center, radius, count, angleOffset = -Const.half_pi) {\n    let g = new Group();\n    let a = Const.two_pi / count;\n    for (let i = 0; i < count; i++) {\n      g.push(new Pt(center).toAngle(a * i + angleOffset, radius, true));\n    }\n    return g;\n  }\n  static noisePts(pts, dx = 0.01, dy = 0.01, rows = 0, columns = 0) {\n    let seed = Num.random();\n    let g = new Group();\n    let i = 0;\n    for (let p of pts) {\n      let np = new Noise(p);\n      let r = rows && rows > 0 ? Math.floor(i / rows) : i;\n      let c = columns && columns > 0 ? i % columns : i;\n      np.initNoise(dx * c, dy * r);\n      np.seed(seed);\n      g.push(np);\n      i++;\n    }\n    return g;\n  }\n  static delaunay(pts) {\n    return Delaunay.from(pts);\n  }\n};\nvar __noise_grad3 = [\n  [1, 1, 0],\n  [-1, 1, 0],\n  [1, -1, 0],\n  [-1, -1, 0],\n  [1, 0, 1],\n  [-1, 0, 1],\n  [1, 0, -1],\n  [-1, 0, -1],\n  [0, 1, 1],\n  [0, -1, 1],\n  [0, 1, -1],\n  [0, -1, -1]\n];\nvar __noise_permTable = [\n  151,\n  160,\n  137,\n  91,\n  90,\n  15,\n  131,\n  13,\n  201,\n  95,\n  96,\n  53,\n  194,\n  233,\n  7,\n  225,\n  140,\n  36,\n  103,\n  30,\n  69,\n  142,\n  8,\n  99,\n  37,\n  240,\n  21,\n  10,\n  23,\n  190,\n  6,\n  148,\n  247,\n  120,\n  234,\n  75,\n  0,\n  26,\n  197,\n  62,\n  94,\n  252,\n  219,\n  203,\n  117,\n  35,\n  11,\n  32,\n  57,\n  177,\n  33,\n  88,\n  237,\n  149,\n  56,\n  87,\n  174,\n  20,\n  125,\n  136,\n  171,\n  168,\n  68,\n  175,\n  74,\n  165,\n  71,\n  134,\n  139,\n  48,\n  27,\n  166,\n  77,\n  146,\n  158,\n  231,\n  83,\n  111,\n  229,\n  122,\n  60,\n  211,\n  133,\n  230,\n  220,\n  105,\n  92,\n  41,\n  55,\n  46,\n  245,\n  40,\n  244,\n  102,\n  143,\n  54,\n  65,\n  25,\n  63,\n  161,\n  1,\n  216,\n  80,\n  73,\n  209,\n  76,\n  132,\n  187,\n  208,\n  89,\n  18,\n  169,\n  200,\n  196,\n  135,\n  130,\n  116,\n  188,\n  159,\n  86,\n  164,\n  100,\n  109,\n  198,\n  173,\n  186,\n  3,\n  64,\n  52,\n  217,\n  226,\n  250,\n  124,\n  123,\n  5,\n  202,\n  38,\n  147,\n  118,\n  126,\n  255,\n  82,\n  85,\n  212,\n  207,\n  206,\n  59,\n  227,\n  47,\n  16,\n  58,\n  17,\n  182,\n  189,\n  28,\n  42,\n  223,\n  183,\n  170,\n  213,\n  119,\n  248,\n  152,\n  2,\n  44,\n  154,\n  163,\n  70,\n  221,\n  153,\n  101,\n  155,\n  167,\n  43,\n  172,\n  9,\n  129,\n  22,\n  39,\n  253,\n  9,\n  98,\n  108,\n  110,\n  79,\n  113,\n  224,\n  232,\n  178,\n  185,\n  112,\n  104,\n  218,\n  246,\n  97,\n  228,\n  251,\n  34,\n  242,\n  193,\n  238,\n  210,\n  144,\n  12,\n  191,\n  179,\n  162,\n  241,\n  81,\n  51,\n  145,\n  235,\n  249,\n  14,\n  239,\n  107,\n  49,\n  192,\n  214,\n  31,\n  181,\n  199,\n  106,\n  157,\n  184,\n  84,\n  204,\n  176,\n  115,\n  121,\n  50,\n  45,\n  127,\n  4,\n  150,\n  254,\n  138,\n  236,\n  205,\n  93,\n  222,\n  114,\n  67,\n  29,\n  24,\n  72,\n  243,\n  141,\n  128,\n  195,\n  78,\n  66,\n  215,\n  61,\n  156,\n  180\n];\nvar Noise = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this.perm = [];\n    this._n = new Pt(0.01, 0.01);\n    this.perm = __noise_permTable.concat(__noise_permTable);\n  }\n  initNoise(...args) {\n    this._n = new Pt(...args);\n    return this;\n  }\n  step(x = 0, y = 0) {\n    this._n.add(x, y);\n    return this;\n  }\n  seed(s) {\n    if (s > 0 && s < 1)\n      s *= 65536;\n    s = Math.floor(s);\n    if (s < 256)\n      s |= s << 8;\n    for (let i = 0; i < 255; i++) {\n      let v = i & 1 ? __noise_permTable[i] ^ s & 255 : __noise_permTable[i] ^ s >> 8 & 255;\n      this.perm[i] = this.perm[i + 256] = v;\n    }\n    return this;\n  }\n  noise2D() {\n    let i = Math.max(0, Math.floor(this._n[0])) % 255;\n    let j = Math.max(0, Math.floor(this._n[1])) % 255;\n    let x = this._n[0] % 255 - i;\n    let y = this._n[1] % 255 - j;\n    let n00 = Vec.dot(__noise_grad3[(i + this.perm[j]) % 12], [x, y, 0]);\n    let n01 = Vec.dot(__noise_grad3[(i + this.perm[j + 1]) % 12], [x, y - 1, 0]);\n    let n10 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j]) % 12], [x - 1, y, 0]);\n    let n11 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j + 1]) % 12], [x - 1, y - 1, 0]);\n    let _fade = (f) => f * f * f * (f * (f * 6 - 15) + 10);\n    let tx = _fade(x);\n    return Num.lerp(Num.lerp(n00, n10, tx), Num.lerp(n01, n11, tx), _fade(y));\n  }\n};\nvar Delaunay = class extends Group {\n  constructor() {\n    super(...arguments);\n    this._mesh = [];\n  }\n  delaunay(triangleOnly = true) {\n    if (this.length < 3)\n      return [];\n    this._mesh = [];\n    let n = this.length;\n    let indices = [];\n    for (let i = 0; i < n; i++)\n      indices[i] = i;\n    indices.sort((i, j) => this[j][0] - this[i][0]);\n    let pts = this.slice();\n    let st = this._superTriangle();\n    pts = pts.concat(st);\n    let opened = [this._circum(n, n + 1, n + 2, st)];\n    let closed = [];\n    let tris = [];\n    for (let i = 0, len = indices.length; i < len; i++) {\n      let c = indices[i];\n      let edges = [];\n      let j = opened.length;\n      if (!this._mesh[c])\n        this._mesh[c] = {};\n      while (j--) {\n        let circum = opened[j];\n        let radius = circum.circle[1][0];\n        let d = pts[c].$subtract(circum.circle[0]);\n        if (d[0] > 0 && d[0] * d[0] > radius * radius) {\n          closed.push(circum);\n          tris.push(circum.triangle);\n          opened.splice(j, 1);\n          continue;\n        }\n        if (d[0] * d[0] + d[1] * d[1] - radius * radius > Const.epsilon) {\n          continue;\n        }\n        edges.push(circum.i, circum.j, circum.j, circum.k, circum.k, circum.i);\n        opened.splice(j, 1);\n      }\n      Delaunay._dedupe(edges);\n      j = edges.length;\n      while (j > 1) {\n        opened.push(this._circum(edges[--j], edges[--j], c, false, pts));\n      }\n    }\n    for (let i = 0, len = opened.length; i < len; i++) {\n      let o = opened[i];\n      if (o.i < n && o.j < n && o.k < n) {\n        closed.push(o);\n        tris.push(o.triangle);\n        this._cache(o);\n      }\n    }\n    return triangleOnly ? tris : closed;\n  }\n  voronoi() {\n    let vs = [];\n    let n = this._mesh;\n    for (let i = 0, len = n.length; i < len; i++) {\n      vs.push(this.neighborPts(i, true));\n    }\n    return vs;\n  }\n  mesh() {\n    return this._mesh;\n  }\n  neighborPts(i, sort = false) {\n    let cs = new Group();\n    let n = this._mesh;\n    for (let k in n[i]) {\n      if (n[i].hasOwnProperty(k))\n        cs.push(n[i][k].circle[0]);\n    }\n    return sort ? Geom.sortEdges(cs) : cs;\n  }\n  neighbors(i) {\n    let cs = [];\n    let n = this._mesh;\n    for (let k in n[i]) {\n      if (n[i].hasOwnProperty(k))\n        cs.push(n[i][k]);\n    }\n    return cs;\n  }\n  _cache(o) {\n    this._mesh[o.i][`${Math.min(o.j, o.k)}-${Math.max(o.j, o.k)}`] = o;\n    this._mesh[o.j][`${Math.min(o.i, o.k)}-${Math.max(o.i, o.k)}`] = o;\n    this._mesh[o.k][`${Math.min(o.i, o.j)}-${Math.max(o.i, o.j)}`] = o;\n  }\n  _superTriangle() {\n    let minPt = this[0];\n    let maxPt = this[0];\n    for (let i = 1, len = this.length; i < len; i++) {\n      minPt = minPt.$min(this[i]);\n      maxPt = maxPt.$max(this[i]);\n    }\n    let d = maxPt.$subtract(minPt);\n    let mid = minPt.$add(maxPt).divide(2);\n    let dmax = Math.max(d[0], d[1]);\n    return new Group(mid.$subtract(20 * dmax, dmax), mid.$add(0, 20 * dmax), mid.$add(20 * dmax, -dmax));\n  }\n  _triangle(i, j, k, pts = this) {\n    return new Group(pts[i], pts[j], pts[k]);\n  }\n  _circum(i, j, k, tri, pts = this) {\n    let t = tri || this._triangle(i, j, k, pts);\n    return {\n      i,\n      j,\n      k,\n      triangle: t,\n      circle: Triangle.circumcircle(t)\n    };\n  }\n  static _dedupe(edges) {\n    let j = edges.length;\n    while (j > 1) {\n      let b = edges[--j];\n      let a = edges[--j];\n      let i = j;\n      while (i > 1) {\n        let n = edges[--i];\n        let m = edges[--i];\n        if (a == m && b == n || a == n && b == m) {\n          edges.splice(j, 2);\n          edges.splice(i, 2);\n          break;\n        }\n      }\n    }\n    return edges;\n  }\n};\n\n// src/Color.ts\nvar _Color = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this._mode = \"rgb\";\n    this._isNorm = false;\n  }\n  static from(...args) {\n    let p = [1, 1, 1, 1];\n    let c = Util.getArgs(args);\n    for (let i = 0, len = p.length; i < len; i++) {\n      if (i < c.length)\n        p[i] = c[i];\n    }\n    return new _Color(p);\n  }\n  static fromHex(hex) {\n    if (hex[0] == \"#\")\n      hex = hex.substr(1);\n    if (hex.length <= 3) {\n      let fn = (i) => hex[i] || \"F\";\n      hex = `${fn(0)}${fn(0)}${fn(1)}${fn(1)}${fn(2)}${fn(2)}`;\n    }\n    let alpha = 1;\n    if (hex.length === 8) {\n      alpha = hex.substr(6) && 255 / 255;\n      hex = hex.substring(0, 6);\n    }\n    let hexVal = parseInt(hex, 16);\n    return new _Color(hexVal >> 16, hexVal >> 8 & 255, hexVal & 255, alpha);\n  }\n  static rgb(...args) {\n    return _Color.from(...args).toMode(\"rgb\");\n  }\n  static hsl(...args) {\n    return _Color.from(...args).toMode(\"hsl\");\n  }\n  static hsb(...args) {\n    return _Color.from(...args).toMode(\"hsb\");\n  }\n  static lab(...args) {\n    return _Color.from(...args).toMode(\"lab\");\n  }\n  static lch(...args) {\n    return _Color.from(...args).toMode(\"lch\");\n  }\n  static luv(...args) {\n    return _Color.from(...args).toMode(\"luv\");\n  }\n  static xyz(...args) {\n    return _Color.from(...args).toMode(\"xyz\");\n  }\n  static maxValues(mode) {\n    return _Color.ranges[mode].zipSlice(1).$take([0, 1, 2]);\n  }\n  get hex() {\n    return this.toString(\"hex\");\n  }\n  get rgb() {\n    return this.toString(\"rgb\");\n  }\n  get rgba() {\n    return this.toString(\"rgba\");\n  }\n  clone() {\n    let c = new _Color(this);\n    c.toMode(this._mode);\n    return c;\n  }\n  toMode(mode, convert = false) {\n    if (convert) {\n      let fname = this._mode.toUpperCase() + \"to\" + mode.toUpperCase();\n      if (_Color[fname]) {\n        this.to(_Color[fname](this, this._isNorm, this._isNorm));\n      } else {\n        throw new Error(\"Cannot convert color with \" + fname);\n      }\n    }\n    this._mode = mode;\n    return this;\n  }\n  get mode() {\n    return this._mode;\n  }\n  get r() {\n    return this[0];\n  }\n  set r(n) {\n    this[0] = n;\n  }\n  get g() {\n    return this[1];\n  }\n  set g(n) {\n    this[1] = n;\n  }\n  get b() {\n    return this[2];\n  }\n  set b(n) {\n    this[2] = n;\n  }\n  get h() {\n    return this._mode == \"lch\" ? this[2] : this[0];\n  }\n  set h(n) {\n    let i = this._mode == \"lch\" ? 2 : 0;\n    this[i] = n;\n  }\n  get s() {\n    return this[1];\n  }\n  set s(n) {\n    this[1] = n;\n  }\n  get l() {\n    return this._mode == \"hsl\" ? this[2] : this[0];\n  }\n  set l(n) {\n    let i = this._mode == \"hsl\" ? 2 : 0;\n    this[i] = n;\n  }\n  get a() {\n    return this[1];\n  }\n  set a(n) {\n    this[1] = n;\n  }\n  get c() {\n    return this[1];\n  }\n  set c(n) {\n    this[1] = n;\n  }\n  get u() {\n    return this[1];\n  }\n  set u(n) {\n    this[1] = n;\n  }\n  get v() {\n    return this[2];\n  }\n  set v(n) {\n    this[2] = n;\n  }\n  set alpha(n) {\n    if (this.length > 3)\n      this[3] = n;\n  }\n  get alpha() {\n    return this.length > 3 ? this[3] : 1;\n  }\n  get normalized() {\n    return this._isNorm;\n  }\n  set normalized(b) {\n    this._isNorm = b;\n  }\n  normalize(toNorm = true) {\n    if (this._isNorm == toNorm)\n      return this;\n    let ranges = _Color.ranges[this._mode];\n    for (let i = 0; i < 3; i++) {\n      this[i] = !toNorm ? Num.mapToRange(this[i], 0, 1, ranges[i][0], ranges[i][1]) : Num.mapToRange(this[i], ranges[i][0], ranges[i][1], 0, 1);\n    }\n    this._isNorm = toNorm;\n    return this;\n  }\n  $normalize(toNorm = true) {\n    return this.clone().normalize(toNorm);\n  }\n  toString(format = \"mode\") {\n    if (format == \"hex\") {\n      let _hex = (n) => {\n        let s = Math.floor(n).toString(16);\n        return s.length < 2 ? \"0\" + s : s;\n      };\n      return `#${_hex(this[0])}${_hex(this[1])}${_hex(this[2])}`;\n    } else if (format == \"rgba\") {\n      return `rgba(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])},${this.alpha})`;\n    } else if (format == \"rgb\") {\n      return `rgb(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])})`;\n    } else {\n      return `${this._mode}(${this[0]},${this[1]},${this[2]},${this.alpha})`;\n    }\n  }\n  static RGBtoHSL(rgb, normalizedInput = false, normalizedOutput = false) {\n    let [r, g, b] = !normalizedInput ? rgb.$normalize() : rgb;\n    let max = Math.max(r, g, b);\n    let min = Math.min(r, g, b);\n    let h = (max + min) / 2;\n    let s = h;\n    let l = h;\n    if (max == min) {\n      h = 0;\n      s = 0;\n    } else {\n      let d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      h = 0;\n      if (max === r) {\n        h = (g - b) / d + (g < b ? 6 : 0);\n      } else if (max === g) {\n        h = (b - r) / d + 2;\n      } else if (max === b) {\n        h = (r - g) / d + 4;\n      }\n    }\n    return _Color.hsl(normalizedOutput ? h / 60 : h * 60, s, l, rgb.alpha);\n  }\n  static HSLtoRGB(hsl, normalizedInput = false, normalizedOutput = false) {\n    let [h, s, l] = hsl;\n    if (!normalizedInput)\n      h = h / 360;\n    if (s == 0)\n      return _Color.rgb(l * 255, l * 255, l * 255, hsl.alpha);\n    let q = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n    let p = 2 * l - q;\n    let convert = (t) => {\n      t = t < 0 ? t + 1 : t > 1 ? t - 1 : t;\n      if (t * 6 < 1) {\n        return p + (q - p) * t * 6;\n      } else if (t * 2 < 1) {\n        return q;\n      } else if (t * 3 < 2) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n      } else {\n        return p;\n      }\n    };\n    let sc = normalizedOutput ? 1 : 255;\n    return _Color.rgb(\n      sc * convert(h + 1 / 3),\n      sc * convert(h),\n      sc * convert(h - 1 / 3),\n      hsl.alpha\n    );\n  }\n  static RGBtoHSB(rgb, normalizedInput = false, normalizedOutput = false) {\n    let [r, g, b] = !normalizedInput ? rgb.$normalize() : rgb;\n    let max = Math.max(r, g, b);\n    let min = Math.min(r, g, b);\n    let d = max - min;\n    let h = 0;\n    let s = max === 0 ? 0 : d / max;\n    let v = max;\n    if (max != min) {\n      if (max === r) {\n        h = (g - b) / d + (g < b ? 6 : 0);\n      } else if (max === g) {\n        h = (b - r) / d + 2;\n      } else if (max === b) {\n        h = (r - g) / d + 4;\n      }\n    }\n    return _Color.hsb(normalizedOutput ? h / 60 : h * 60, s, v, rgb.alpha);\n  }\n  static HSBtoRGB(hsb, normalizedInput = false, normalizedOutput = false) {\n    let [h, s, v] = hsb;\n    if (!normalizedInput)\n      h = h / 360;\n    let i = Math.floor(h * 6);\n    let f = h * 6 - i;\n    let p = v * (1 - s);\n    let q = v * (1 - f * s);\n    let t = v * (1 - (1 - f) * s);\n    let pick = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ];\n    let c = pick[i % 6];\n    let sc = normalizedOutput ? 1 : 255;\n    return _Color.rgb(\n      sc * c[0],\n      sc * c[1],\n      sc * c[2],\n      hsb.alpha\n    );\n  }\n  static RGBtoLAB(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.XYZtoLAB(_Color.RGBtoXYZ(c), false, normalizedOutput);\n  }\n  static LABtoRGB(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    return _Color.XYZtoRGB(_Color.LABtoXYZ(c), false, normalizedOutput);\n  }\n  static RGBtoLCH(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.LABtoLCH(_Color.RGBtoLAB(c), false, normalizedOutput);\n  }\n  static LCHtoRGB(lch, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lch.$normalize(false) : lch;\n    return _Color.LABtoRGB(_Color.LCHtoLAB(c), false, normalizedOutput);\n  }\n  static RGBtoLUV(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.XYZtoLUV(_Color.RGBtoXYZ(c), false, normalizedOutput);\n  }\n  static LUVtoRGB(luv, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? luv.$normalize(false) : luv;\n    return _Color.XYZtoRGB(_Color.LUVtoXYZ(c), false, normalizedOutput);\n  }\n  static RGBtoXYZ(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = !normalizedInput ? rgb.$normalize() : rgb.clone();\n    for (let i = 0; i < 3; i++) {\n      c[i] = c[i] > 0.04045 ? Math.pow((c[i] + 0.055) / 1.055, 2.4) : c[i] / 12.92;\n      if (!normalizedOutput)\n        c[i] = c[i] * 100;\n    }\n    let cc = _Color.xyz(\n      c[0] * 0.4124564 + c[1] * 0.3575761 + c[2] * 0.1804375,\n      c[0] * 0.2126729 + c[1] * 0.7151522 + c[2] * 0.072175,\n      c[0] * 0.0193339 + c[1] * 0.119192 + c[2] * 0.9503041,\n      rgb.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoRGB(xyz, normalizedInput = false, normalizedOutput = false) {\n    let [x, y, z] = !normalizedInput ? xyz.$normalize() : xyz;\n    let rgb = [\n      x * 3.2406254773200533 + y * -1.5372079722103187 + z * -0.4986285986982479,\n      x * -0.9689307147293197 + y * 1.8757560608852415 + z * 0.041517523842953964,\n      x * 0.055710120445510616 + y * -0.2040210505984867 + z * 1.0569959422543882\n    ];\n    for (let i = 0; i < 3; i++) {\n      rgb[i] = rgb[i] > 31308e-7 ? 1.055 * Math.pow(rgb[i], 1 / 2.4) - 0.055 : 12.92 * rgb[i];\n      rgb[i] = Math.max(0, Math.min(1, rgb[i]));\n      if (!normalizedOutput)\n        rgb[i] = Math.round(rgb[i] * 255);\n    }\n    let cc = _Color.rgb(rgb[0], rgb[1], rgb[2], xyz.alpha);\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoLAB(xyz, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? xyz.$normalize(false) : xyz.clone();\n    const eps = 0.00885645167;\n    const kap = 903.296296296;\n    c.divide(_Color.D65);\n    let fn = (n) => n > eps ? Math.pow(n, 1 / 3) : (kap * n + 16) / 116;\n    let cy = fn(c[1]);\n    let cc = _Color.lab(\n      116 * cy - 16,\n      500 * (fn(c[0]) - cy),\n      200 * (cy - fn(c[2])),\n      xyz.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static LABtoXYZ(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    let y = (c[0] + 16) / 116;\n    let x = c[1] / 500 + y;\n    let z = y - c[2] / 200;\n    const eps = 0.00885645167;\n    const kap = 903.296296296;\n    let d = _Color.D65;\n    const xxx = Math.pow(x, 3);\n    const zzz = Math.pow(z, 3);\n    let cc = _Color.xyz(\n      d[0] * (xxx > eps ? xxx : (116 * x - 16) / kap),\n      d[1] * (c[0] > kap * eps ? Math.pow((c[0] + 16) / 116, 3) : c[0] / kap),\n      d[2] * (zzz > eps ? zzz : (116 * z - 16) / kap),\n      lab.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoLUV(xyz, normalizedInput = false, normalizedOutput = false) {\n    let [x, y, z] = normalizedInput ? xyz.$normalize(false) : xyz;\n    let u = 4 * x / (x + 15 * y + 3 * z);\n    let v = 9 * y / (x + 15 * y + 3 * z);\n    y = y / 100;\n    y = y > 8856e-6 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n    let refU = 4 * _Color.D65[0] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let refV = 9 * _Color.D65[1] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let L = 116 * y - 16;\n    return _Color.luv(\n      L,\n      13 * L * (u - refU),\n      13 * L * (v - refV),\n      xyz.alpha\n    );\n  }\n  static LUVtoXYZ(luv, normalizedInput = false, normalizedOutput = false) {\n    let [l, u, v] = normalizedInput ? luv.$normalize(false) : luv;\n    let y = (l + 16) / 116;\n    let cubeY = y * y * y;\n    y = cubeY > 8856e-6 ? cubeY : (y - 16 / 116) / 7.787;\n    let refU = 4 * _Color.D65[0] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let refV = 9 * _Color.D65[1] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    u = u / (13 * l) + refU;\n    v = v / (13 * l) + refV;\n    y = y * 100;\n    let x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\n    let z = (9 * y - 15 * v * y - v * x) / (3 * v);\n    return _Color.xyz(x, y, z, luv.alpha);\n  }\n  static LABtoLCH(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    let h = Geom.toDegree(Geom.boundRadian(Math.atan2(c[2], c[1])));\n    return _Color.lch(\n      c[0],\n      Math.sqrt(c[1] * c[1] + c[2] * c[2]),\n      h,\n      lab.alpha\n    );\n  }\n  static LCHtoLAB(lch, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lch.$normalize(false) : lch;\n    let rad = Geom.toRadian(c[2]);\n    return _Color.lab(\n      c[0],\n      Math.cos(rad) * c[1],\n      Math.sin(rad) * c[1],\n      lch.alpha\n    );\n  }\n};\nvar Color = _Color;\nColor.D65 = new Pt(95.047, 100, 108.883, 1);\nColor.ranges = {\n  rgb: new Group(new Pt(0, 255), new Pt(0, 255), new Pt(0, 255)),\n  hsl: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  hsb: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  lab: new Group(new Pt(0, 100), new Pt(-128, 127), new Pt(-128, 127)),\n  lch: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 360)),\n  luv: new Group(new Pt(0, 100), new Pt(-134, 220), new Pt(-140, 122)),\n  xyz: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 100))\n};\n\n// src/Dom.ts\nvar DOMSpace = class extends MultiTouchSpace {\n  constructor(elem, callback) {\n    super();\n    this.id = \"domspace\";\n    this._autoResize = true;\n    this._bgcolor = \"#e1e9f0\";\n    this._css = {};\n    var _selector = null;\n    var _existed = false;\n    this.id = \"pts\";\n    if (elem instanceof Element) {\n      _selector = elem;\n      this.id = \"pts_existing_space\";\n    } else {\n      _selector = document.querySelector(elem);\n      _existed = true;\n      this.id = elem.substr(1);\n    }\n    if (!_selector) {\n      this._container = DOMSpace.createElement(\"div\", \"pts_container\");\n      this._canvas = DOMSpace.createElement(\"div\", \"pts_element\");\n      this._container.appendChild(this._canvas);\n      document.body.appendChild(this._container);\n      _existed = false;\n    } else {\n      this._canvas = _selector;\n      this._container = _selector.parentElement;\n    }\n    setTimeout(this._ready.bind(this, callback), 50);\n  }\n  static createElement(elem = \"div\", id, appendTo) {\n    let d = document.createElement(elem);\n    if (id)\n      d.setAttribute(\"id\", id);\n    if (appendTo && appendTo.appendChild)\n      appendTo.appendChild(d);\n    return d;\n  }\n  _ready(callback) {\n    if (!this._container)\n      throw new Error(`Cannot initiate #${this.id} element`);\n    this._isReady = true;\n    this._resizeHandler(null);\n    this.clear(this._bgcolor);\n    this._canvas.dispatchEvent(new Event(\"ready\"));\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        if (this.players[k].start)\n          this.players[k].start(this.bound.clone(), this);\n      }\n    }\n    this._pointer = this.center;\n    this.refresh(false);\n    if (callback)\n      callback(this.bound, this._canvas);\n  }\n  setup(opt) {\n    if (opt.bgcolor) {\n      this._bgcolor = opt.bgcolor;\n    }\n    this.autoResize = opt.resize != void 0 ? opt.resize : false;\n    return this;\n  }\n  getForm() {\n    return null;\n  }\n  set autoResize(auto) {\n    this._autoResize = auto;\n    if (auto) {\n      window.addEventListener(\"resize\", this._resizeHandler.bind(this));\n    } else {\n      delete this._css[\"width\"];\n      delete this._css[\"height\"];\n      window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    }\n  }\n  get autoResize() {\n    return this._autoResize;\n  }\n  resize(b, evt) {\n    this.bound = b;\n    this.styles({ width: `${b.width}px`, height: `${b.height}px` }, true);\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let p = this.players[k];\n        if (p.resize)\n          p.resize(this.bound, evt);\n      }\n    }\n    return this;\n  }\n  _resizeHandler(evt) {\n    let b = Bound.fromBoundingRect(this._container.getBoundingClientRect());\n    if (this._autoResize) {\n      this.styles({ width: \"100%\", height: \"100%\" }, true);\n    } else {\n      this.styles({ width: `${b.width}px`, height: `${b.height}px` }, true);\n    }\n    this.resize(b, evt);\n  }\n  get element() {\n    return this._canvas;\n  }\n  get parent() {\n    return this._container;\n  }\n  get ready() {\n    return this._isReady;\n  }\n  clear(bg) {\n    if (bg)\n      this.background = bg;\n    this._canvas.innerHTML = \"\";\n    return this;\n  }\n  set background(bg) {\n    this._bgcolor = bg;\n    this._container.style.backgroundColor = this._bgcolor;\n  }\n  get background() {\n    return this._bgcolor;\n  }\n  style(key, val, update = false) {\n    this._css[key] = val;\n    if (update)\n      this._canvas.style[key] = val;\n    return this;\n  }\n  styles(styles, update = false) {\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k))\n        this.style(k, styles[k], update);\n    }\n    return this;\n  }\n  static setAttr(elem, data) {\n    for (let k in data) {\n      if (data.hasOwnProperty(k)) {\n        elem.setAttribute(k, data[k]);\n      }\n    }\n    return elem;\n  }\n  static getInlineStyles(data) {\n    let str = \"\";\n    for (let k in data) {\n      if (data.hasOwnProperty(k)) {\n        if (data[k])\n          str += `${k}: ${data[k]}; `;\n      }\n    }\n    return str;\n  }\n  dispose() {\n    window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    this.stop();\n    this.removeAll();\n    return this;\n  }\n};\nvar HTMLSpace = class extends DOMSpace {\n  getForm() {\n    return new HTMLForm(this);\n  }\n  static htmlElement(parent, name, id, autoClass = true) {\n    if (!parent || !parent.appendChild)\n      throw new Error(\"parent is not a valid DOM element\");\n    let elem = document.querySelector(`#${id}`);\n    if (!elem) {\n      elem = document.createElement(name);\n      elem.setAttribute(\"id\", id);\n      if (autoClass)\n        elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\n      parent.appendChild(elem);\n    }\n    return elem;\n  }\n  remove(player) {\n    let temp = this._container.querySelectorAll(\".\" + HTMLForm.scopeID(player));\n    temp.forEach((el) => {\n      el.parentNode.removeChild(el);\n    });\n    return super.remove(player);\n  }\n  removeAll() {\n    this._container.innerHTML = \"\";\n    return super.removeAll();\n  }\n};\nvar _HTMLForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"background\": \"#f03\",\n      \"border-color\": \"#fff\",\n      \"color\": \"#000\",\n      \"border-width\": \"1px\",\n      \"border-radius\": \"0\",\n      \"border-style\": \"solid\",\n      \"opacity\": 1,\n      \"position\": \"absolute\",\n      \"top\": 0,\n      \"left\": 0,\n      \"width\": 0,\n      \"height\": 0\n    };\n    this._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    this._ready = false;\n    this._space = space;\n    this._space.add({ start: () => {\n      this._ctx.group = this._space.element;\n      this._ctx.groupID = \"pts_dom_\" + _HTMLForm.groupID++;\n      this._ctx.style = Object.assign({}, this._style);\n      this._ready = true;\n    } });\n  }\n  get space() {\n    return this._space;\n  }\n  styleTo(k, v, unit = \"\") {\n    if (this._ctx.style[k] === void 0)\n      throw new Error(`${k} style property doesn't exist`);\n    this._ctx.style[k] = `${v}${unit}`;\n  }\n  alpha(a) {\n    this.styleTo(\"opacity\", a);\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"filled\", c);\n      if (!c)\n        this.styleTo(\"background\", \"transparent\");\n    } else {\n      this.styleTo(\"filled\", true);\n      this.styleTo(\"background\", c);\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"stroked\", c);\n      if (!c)\n        this.styleTo(\"border-width\", 0);\n    } else {\n      this.styleTo(\"stroked\", true);\n      this.styleTo(\"border-color\", c);\n      this.styleTo(\"border-width\", (width || 1) + \"px\");\n    }\n    return this;\n  }\n  fillText(c) {\n    this.styleTo(\"color\", c);\n    return this;\n  }\n  cls(c) {\n    if (typeof c == \"boolean\") {\n      this._ctx.currentClass = \"\";\n    } else {\n      this._ctx.currentClass = c;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  reset() {\n    this._ctx.style = Object.assign({}, this._style);\n    this._font = new Font(10, \"sans-serif\");\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  updateScope(group_id, group) {\n    this._ctx.group = group;\n    this._ctx.groupID = group_id;\n    this._ctx.groupCount = 0;\n    this.nextID();\n    return this._ctx;\n  }\n  scope(item) {\n    if (!item || item.animateID == null)\n      throw new Error(\"item not defined or not yet added to Space\");\n    return this.updateScope(_HTMLForm.scopeID(item), this.space.element);\n  }\n  nextID() {\n    this._ctx.groupCount++;\n    this._ctx.currentID = `${this._ctx.groupID}-${this._ctx.groupCount}`;\n    return this._ctx.currentID;\n  }\n  static getID(ctx) {\n    return ctx.currentID || `p-${_HTMLForm.domID++}`;\n  }\n  static scopeID(item) {\n    return `item-${item.animateID}`;\n  }\n  static style(elem, styles) {\n    let st = [];\n    if (!styles[\"filled\"])\n      st.push(\"background: none\");\n    if (!styles[\"stroked\"])\n      st.push(\"border: none\");\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n        let v = styles[k];\n        if (v) {\n          if (!styles[\"filled\"] && k.indexOf(\"background\") === 0) {\n            continue;\n          } else if (!styles[\"stroked\"] && k.indexOf(\"border-width\") === 0) {\n            continue;\n          } else {\n            st.push(`${k}: ${v}`);\n          }\n        }\n      }\n    }\n    return HTMLSpace.setAttr(elem, { style: st.join(\";\") });\n  }\n  static rectStyle(ctx, pt, size) {\n    ctx.style[\"left\"] = pt[0] + \"px\";\n    ctx.style[\"top\"] = pt[1] + \"px\";\n    ctx.style[\"width\"] = size[0] + \"px\";\n    ctx.style[\"height\"] = size[1] + \"px\";\n    return ctx;\n  }\n  static textStyle(ctx, pt) {\n    ctx.style[\"left\"] = pt[0] + \"px\";\n    ctx.style[\"top\"] = pt[1] + \"px\";\n    return ctx;\n  }\n  static point(ctx, pt, radius = 5, shape = \"square\") {\n    if (shape === \"circle\") {\n      return _HTMLForm.circle(ctx, pt, radius);\n    } else {\n      return _HTMLForm.square(ctx, pt, radius);\n    }\n  }\n  point(pt, radius = 5, shape = \"square\") {\n    this.nextID();\n    if (shape == \"circle\")\n      this.styleTo(\"border-radius\", \"100%\");\n    _HTMLForm.point(this._ctx, pt, radius, shape);\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-circle ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(radius), new Pt(radius * 2, radius * 2));\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  circle(pts) {\n    this.nextID();\n    this.styleTo(\"border-radius\", \"100%\");\n    _HTMLForm.circle(this._ctx, pts[0], pts[1][0]);\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-square ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(halfsize), new Pt(halfsize * 2, halfsize * 2));\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  square(pt, halfsize) {\n    this.nextID();\n    _HTMLForm.square(this._ctx, pt, halfsize);\n    return this;\n  }\n  static rect(ctx, pts) {\n    let p = Util.iterToArray(pts);\n    if (!Util.arrayCheck(p))\n      return;\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-rect ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, p[0], p[1]);\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  rect(pts) {\n    this.nextID();\n    this.styleTo(\"border-radius\", \"0\");\n    _HTMLForm.rect(this._ctx, pts);\n    return this;\n  }\n  static text(ctx, pt, txt) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-text ${ctx.currentClass}` });\n    elem.textContent = txt;\n    _HTMLForm.textStyle(ctx, pt);\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  text(pt, txt) {\n    this.nextID();\n    _HTMLForm.text(this._ctx, pt, txt);\n    return this;\n  }\n  log(txt) {\n    this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n    return this;\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    Util.warn(\"arc is not implemented in HTMLForm\");\n    return this;\n  }\n  line(pts) {\n    Util.warn(\"line is not implemented in HTMLForm\");\n    return this;\n  }\n  polygon(pts) {\n    Util.warn(\"polygon is not implemented in HTMLForm\");\n    return this;\n  }\n};\nvar HTMLForm = _HTMLForm;\nHTMLForm.groupID = 0;\nHTMLForm.domID = 0;\n\n// src/Svg.ts\nvar SVGSpace = class extends DOMSpace {\n  constructor(elem, callback) {\n    super(elem, callback);\n    this._bgcolor = \"#999\";\n    if (this._canvas.nodeName.toLowerCase() != \"svg\") {\n      let s = SVGSpace.svgElement(this._canvas, \"svg\", `${this.id}_svg`);\n      this._container = this._canvas;\n      this._canvas = s;\n    }\n  }\n  getForm() {\n    return new SVGForm(this);\n  }\n  get element() {\n    return this._canvas;\n  }\n  resize(b, evt) {\n    super.resize(b, evt);\n    SVGSpace.setAttr(this.element, {\n      \"viewBox\": `0 0 ${this.bound.width} ${this.bound.height}`,\n      \"width\": `${this.bound.width}`,\n      \"height\": `${this.bound.height}`,\n      \"xmlns\": \"http://www.w3.org/2000/svg\",\n      \"version\": \"1.1\"\n    });\n    return this;\n  }\n  static svgElement(parent, name, id) {\n    if (!parent || !parent.appendChild)\n      throw new Error(\"parent is not a valid DOM element\");\n    let elem = document.querySelector(`#${id}`);\n    if (!elem) {\n      elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\n      elem.setAttribute(\"id\", id);\n      parent.appendChild(elem);\n    }\n    return elem;\n  }\n  remove(player) {\n    let temp = this._container.querySelectorAll(\".\" + SVGForm.scopeID(player));\n    temp.forEach((el) => {\n      el.parentNode.removeChild(el);\n    });\n    return super.remove(player);\n  }\n  removeAll() {\n    this._container.innerHTML = \"\";\n    return super.removeAll();\n  }\n};\nvar _SVGForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"fill\": \"#f03\",\n      \"stroke\": \"#fff\",\n      \"stroke-width\": 1,\n      \"stroke-linejoin\": \"bevel\",\n      \"stroke-linecap\": \"sqaure\",\n      \"opacity\": 1\n    };\n    this._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    this._ready = false;\n    this._space = space;\n    this._space.add({ start: () => {\n      this._ctx.group = this._space.element;\n      this._ctx.groupID = \"pts_svg_\" + _SVGForm.groupID++;\n      this._ctx.style = Object.assign({}, this._style);\n      this._ready = true;\n    } });\n  }\n  get space() {\n    return this._space;\n  }\n  styleTo(k, v) {\n    if (this._ctx.style[k] === void 0)\n      throw new Error(`${k} style property doesn't exist`);\n    this._ctx.style[k] = v;\n  }\n  alpha(a) {\n    this.styleTo(\"opacity\", a);\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"filled\", c);\n    } else {\n      this.styleTo(\"filled\", true);\n      this.styleTo(\"fill\", c);\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"stroked\", c);\n    } else {\n      this.styleTo(\"stroked\", true);\n      this.styleTo(\"stroke\", c);\n      if (width)\n        this.styleTo(\"stroke-width\", width);\n      if (linejoin)\n        this.styleTo(\"stroke-linejoin\", linejoin);\n      if (linecap)\n        this.styleTo(\"stroke-linecap\", linecap);\n    }\n    return this;\n  }\n  cls(c) {\n    if (typeof c == \"boolean\") {\n      this._ctx.currentClass = \"\";\n    } else {\n      this._ctx.currentClass = c;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  reset() {\n    this._ctx.style = Object.assign({}, this._style);\n    this._font = new Font(10, \"sans-serif\");\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  updateScope(group_id, group) {\n    this._ctx.group = group;\n    this._ctx.groupID = group_id;\n    this._ctx.groupCount = 0;\n    this.nextID();\n    return this._ctx;\n  }\n  scope(item) {\n    if (!item || item.animateID == null)\n      throw new Error(\"item not defined or not yet added to Space\");\n    return this.updateScope(_SVGForm.scopeID(item), this.space.element);\n  }\n  nextID() {\n    this._ctx.groupCount++;\n    this._ctx.currentID = `${this._ctx.groupID}-${this._ctx.groupCount}`;\n    return this._ctx.currentID;\n  }\n  static getID(ctx) {\n    return ctx.currentID || `p-${_SVGForm.domID++}`;\n  }\n  static scopeID(item) {\n    return `item-${item.animateID}`;\n  }\n  static style(elem, styles) {\n    let st = [];\n    if (!styles[\"filled\"])\n      st.push(\"fill: none\");\n    if (!styles[\"stroked\"])\n      st.push(\"stroke: none\");\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n        let v = styles[k];\n        if (v) {\n          if (!styles[\"filled\"] && k.indexOf(\"fill\") === 0) {\n            continue;\n          } else if (!styles[\"stroked\"] && k.indexOf(\"stroke\") === 0) {\n            continue;\n          } else {\n            st.push(`${k}: ${v}`);\n          }\n        }\n      }\n    }\n    return DOMSpace.setAttr(elem, { style: st.join(\";\") });\n  }\n  static point(ctx, pt, radius = 5, shape = \"square\") {\n    if (shape === \"circle\") {\n      return _SVGForm.circle(ctx, pt, radius);\n    } else {\n      return _SVGForm.square(ctx, pt, radius);\n    }\n  }\n  point(pt, radius = 5, shape = \"square\") {\n    this.nextID();\n    _SVGForm.point(this._ctx, pt, radius, shape);\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    let elem = SVGSpace.svgElement(ctx.group, \"circle\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      cx: pt[0],\n      cy: pt[1],\n      r: radius,\n      \"class\": `pts-svgform pts-circle ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  circle(pts) {\n    this.nextID();\n    let p = Util.iterToArray(pts);\n    _SVGForm.circle(this._ctx, p[0], p[1][0]);\n    return this;\n  }\n  static arc(ctx, pt, radius, startAngle, endAngle, cc) {\n    let elem = SVGSpace.svgElement(ctx.group, \"path\", _SVGForm.getID(ctx));\n    const start = new Pt(pt).toAngle(startAngle, radius, true);\n    const end = new Pt(pt).toAngle(endAngle, radius, true);\n    const diff = Geom.boundAngle(endAngle) - Geom.boundAngle(startAngle);\n    let largeArc = diff > Const.pi ? true : false;\n    if (cc)\n      largeArc = !largeArc;\n    const sweep = cc ? \"0\" : \"1\";\n    const d = `M ${start[0]} ${start[1]} A ${radius} ${radius} 0 ${largeArc ? \"1\" : \"0\"} ${sweep} ${end[0]} ${end[1]}`;\n    DOMSpace.setAttr(elem, {\n      d,\n      \"class\": `pts-svgform pts-arc ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    this.nextID();\n    _SVGForm.arc(this._ctx, pt, radius, startAngle, endAngle, cc);\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    let elem = SVGSpace.svgElement(ctx.group, \"rect\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      x: pt[0] - halfsize,\n      y: pt[1] - halfsize,\n      width: halfsize * 2,\n      height: halfsize * 2,\n      \"class\": `pts-svgform pts-square ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  square(pt, halfsize) {\n    this.nextID();\n    _SVGForm.square(this._ctx, pt, halfsize);\n    return this;\n  }\n  static line(ctx, pts) {\n    let points = _SVGForm.pointsString(pts);\n    if (points.count < 2)\n      return;\n    if (points.count > 2)\n      return _SVGForm._poly(ctx, points.string, false);\n    let elem = SVGSpace.svgElement(ctx.group, \"line\", _SVGForm.getID(ctx));\n    let p = Util.iterToArray(pts);\n    DOMSpace.setAttr(elem, {\n      x1: p[0][0],\n      y1: p[0][1],\n      x2: p[1][0],\n      y2: p[1][1],\n      \"class\": `pts-svgform pts-line ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  line(pts) {\n    this.nextID();\n    _SVGForm.line(this._ctx, pts);\n    return this;\n  }\n  static _poly(ctx, points, closePath = true) {\n    let elem = SVGSpace.svgElement(ctx.group, closePath ? \"polygon\" : \"polyline\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      points,\n      \"class\": `pts-svgform pts-polygon ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  static pointsString(pts) {\n    let points = \"\";\n    let count = 0;\n    for (let p of pts) {\n      points += `${p[0]},${p[1]} `;\n      count++;\n    }\n    return { string: points, count };\n  }\n  static polygon(ctx, pts) {\n    let points = _SVGForm.pointsString(pts);\n    return _SVGForm._poly(ctx, points.string, true);\n  }\n  polygon(pts) {\n    this.nextID();\n    _SVGForm.polygon(this._ctx, pts);\n    return this;\n  }\n  static rect(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    let elem = SVGSpace.svgElement(ctx.group, \"rect\", _SVGForm.getID(ctx));\n    let bound = Group.fromArray(pts).boundingBox();\n    let size = Rectangle.size(bound);\n    DOMSpace.setAttr(elem, {\n      x: bound[0][0],\n      y: bound[0][1],\n      width: size[0],\n      height: size[1],\n      \"class\": `pts-svgform pts-rect ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  rect(pts) {\n    this.nextID();\n    _SVGForm.rect(this._ctx, pts);\n    return this;\n  }\n  static text(ctx, pt, txt) {\n    let elem = SVGSpace.svgElement(ctx.group, \"text\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      \"pointer-events\": \"none\",\n      x: pt[0],\n      y: pt[1],\n      dx: 0,\n      dy: 0,\n      \"class\": `pts-svgform pts-text ${ctx.currentClass}`\n    });\n    elem.textContent = txt;\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  text(pt, txt) {\n    this.nextID();\n    _SVGForm.text(this._ctx, pt, txt);\n    return this;\n  }\n  log(txt) {\n    this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n    return this;\n  }\n};\nvar SVGForm = _SVGForm;\nSVGForm.groupID = 0;\nSVGForm.domID = 0;\n\n// src/Physics.ts\nvar World = class {\n  constructor(bound, friction = 1, gravity = 0) {\n    this._lastTime = null;\n    this._gravity = new Pt();\n    this._friction = 1;\n    this._damping = 0.75;\n    this._particles = [];\n    this._bodies = [];\n    this._pnames = [];\n    this._bnames = [];\n    this._bound = Bound.fromGroup(bound);\n    this._friction = friction;\n    this._gravity = typeof gravity === \"number\" ? new Pt(0, gravity) : new Pt(gravity);\n    return this;\n  }\n  get bound() {\n    return this._bound;\n  }\n  set bound(bound) {\n    this._bound = bound;\n  }\n  get gravity() {\n    return this._gravity;\n  }\n  set gravity(g) {\n    this._gravity = g;\n  }\n  get friction() {\n    return this._friction;\n  }\n  set friction(f) {\n    this._friction = f;\n  }\n  get damping() {\n    return this._damping;\n  }\n  set damping(f) {\n    this._damping = f;\n  }\n  get bodyCount() {\n    return this._bodies.length;\n  }\n  get particleCount() {\n    return this._particles.length;\n  }\n  body(id) {\n    let idx = id;\n    if (typeof id === \"string\" && id.length > 0) {\n      idx = this._bnames.indexOf(id);\n    }\n    if (!(idx >= 0))\n      return void 0;\n    return this._bodies[idx];\n  }\n  particle(id) {\n    let idx = id;\n    if (typeof id === \"string\" && id.length > 0) {\n      idx = this._pnames.indexOf(id);\n    }\n    if (!(idx >= 0))\n      return void 0;\n    return this._particles[idx];\n  }\n  bodyIndex(name) {\n    return this._bnames.indexOf(name);\n  }\n  particleIndex(name) {\n    return this._pnames.indexOf(name);\n  }\n  update(ms) {\n    let dt = ms / 1e3;\n    this._updateParticles(dt);\n    this._updateBodies(dt);\n  }\n  drawParticles(fn) {\n    this._drawParticles = fn;\n  }\n  drawBodies(fn) {\n    this._drawBodies = fn;\n  }\n  add(p, name = \"\") {\n    if (p instanceof Body) {\n      this._bodies.push(p);\n      this._bnames.push(name);\n    } else {\n      this._particles.push(p);\n      this._pnames.push(name);\n    }\n    return this;\n  }\n  _index(fn, id) {\n    let index = 0;\n    if (typeof id === \"string\") {\n      index = fn(id);\n      if (index < 0)\n        throw new Error(`Cannot find index of ${id}. You can use particleIndex() or bodyIndex() function to check existence by name.`);\n    } else {\n      index = id;\n    }\n    return index;\n  }\n  removeBody(from, count = 1) {\n    const index = this._index(this.bodyIndex.bind(this), from);\n    const param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    this._bodies.splice(param[0], param[1]);\n    this._bnames.splice(param[0], param[1]);\n    return this;\n  }\n  removeParticle(from, count = 1) {\n    const index = this._index(this.particleIndex.bind(this), from);\n    const param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    this._particles.splice(param[0], param[1]);\n    this._pnames.splice(param[0], param[1]);\n    return this;\n  }\n  static edgeConstraint(p1, p2, dist, stiff = 1, precise = false) {\n    const m1 = 1 / (p1.mass || 1);\n    const m2 = 1 / (p2.mass || 1);\n    const mm = m1 + m2;\n    let delta = p2.$subtract(p1);\n    let distSq = dist * dist;\n    let d = precise ? dist / delta.magnitude() - 1 : distSq / (delta.dot(delta) + distSq) - 0.5;\n    let f = delta.$multiply(d * stiff);\n    p1.subtract(f.$multiply(m1 / mm));\n    p2.add(f.$multiply(m2 / mm));\n    return p1;\n  }\n  static boundConstraint(p, rect, damping = 0.75) {\n    let bound = Geom.boundingBox(rect);\n    let np = p.$min(bound[1].subtract(p.radius)).$max(bound[0].add(p.radius));\n    if (np[0] === bound[0][0] || np[0] === bound[1][0]) {\n      let c = p.changed.$multiply(damping);\n      p.previous = np.$subtract(new Pt(-c[0], c[1]));\n    } else if (np[1] === bound[0][1] || np[1] === bound[1][1]) {\n      let c = p.changed.$multiply(damping);\n      p.previous = np.$subtract(new Pt(c[0], -c[1]));\n    }\n    p.to(np);\n  }\n  integrate(p, dt, prevDt) {\n    p.addForce(this._gravity);\n    p.verlet(dt, this._friction, prevDt);\n    return p;\n  }\n  _updateParticles(dt) {\n    for (let i = 0, len = this._particles.length; i < len; i++) {\n      let p = this._particles[i];\n      this.integrate(p, dt, this._lastTime);\n      World.boundConstraint(p, this._bound, this._damping);\n      for (let k = i + 1; k < len; k++) {\n        if (i !== k) {\n          let p2 = this._particles[k];\n          p.collide(p2, this._damping);\n        }\n      }\n      if (this._drawParticles)\n        this._drawParticles(p, i);\n    }\n    this._lastTime = dt;\n  }\n  _updateBodies(dt) {\n    for (let i = 0, len = this._bodies.length; i < len; i++) {\n      let bds = this._bodies[i];\n      if (bds) {\n        for (let k = 0, klen = bds.length; k < klen; k++) {\n          let bk = bds[k];\n          World.boundConstraint(bk, this._bound, this._damping);\n          this.integrate(bk, dt, this._lastTime);\n        }\n        for (let k = i + 1; k < len; k++) {\n          bds.processBody(this._bodies[k]);\n        }\n        for (let m = 0, mlen = this._particles.length; m < mlen; m++) {\n          bds.processParticle(this._particles[m]);\n        }\n        bds.processEdges();\n        if (this._drawBodies)\n          this._drawBodies(bds, i);\n      }\n    }\n  }\n};\nvar Particle = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this._mass = 1;\n    this._radius = 0;\n    this._force = new Pt();\n    this._prev = new Pt();\n    this._lock = false;\n    this._prev = this.clone();\n  }\n  get mass() {\n    return this._mass;\n  }\n  set mass(m) {\n    this._mass = m;\n  }\n  get radius() {\n    return this._radius;\n  }\n  set radius(f) {\n    this._radius = f;\n  }\n  get previous() {\n    return this._prev;\n  }\n  set previous(p) {\n    this._prev = p;\n  }\n  get force() {\n    return this._force;\n  }\n  set force(g) {\n    this._force = g;\n  }\n  get body() {\n    return this._body;\n  }\n  set body(b) {\n    this._body = b;\n  }\n  get lock() {\n    return this._lock;\n  }\n  set lock(b) {\n    this._lock = b;\n    this._lockPt = new Pt(this);\n  }\n  get changed() {\n    return this.$subtract(this._prev);\n  }\n  set position(p) {\n    this.previous.to(this);\n    if (this._lock)\n      this._lockPt = p;\n    this.to(p);\n  }\n  size(r) {\n    this._mass = r;\n    this._radius = r;\n    return this;\n  }\n  addForce(...args) {\n    this._force.add(...args);\n    return this._force;\n  }\n  verlet(dt, friction, lastDt) {\n    if (this._lock) {\n      this.to(this._lockPt);\n    } else {\n      let lt = lastDt ? lastDt : dt;\n      let a = this._force.multiply(dt * (dt + lt) / 2);\n      let v = this.changed.multiply(friction * dt / lt).add(a);\n      this._prev = this.clone();\n      this.add(v);\n      this._force = new Pt();\n    }\n    return this;\n  }\n  hit(...args) {\n    this._prev.subtract(new Pt(...args).$divide(Math.sqrt(this._mass)));\n    return this;\n  }\n  collide(p2, damp = 1) {\n    let p1 = this;\n    let dp = p1.$subtract(p2);\n    let distSq = dp.magnitudeSq();\n    let dr = p1.radius + p2.radius;\n    if (distSq < dr * dr) {\n      let c1 = p1.changed;\n      let c2 = p2.changed;\n      let dist = Math.sqrt(distSq);\n      let d = dp.$multiply((dist - dr) / dist / 2);\n      let np1 = p1.$subtract(d);\n      let np2 = p2.$add(d);\n      p1.to(np1);\n      p2.to(np2);\n      let f1 = damp * dp.dot(c1) / distSq;\n      let f2 = damp * dp.dot(c2) / distSq;\n      let dm1 = p1.mass / (p1.mass + p2.mass);\n      let dm2 = p2.mass / (p1.mass + p2.mass);\n      c1.add(new Pt(f2 * dp[0] - f1 * dp[0], f2 * dp[1] - f1 * dp[1]).$multiply(dm2));\n      c2.add(new Pt(f1 * dp[0] - f2 * dp[0], f1 * dp[1] - f2 * dp[1]).$multiply(dm1));\n      p1.previous = p1.$subtract(c1);\n      p2.previous = p2.$subtract(c2);\n    }\n  }\n  toString() {\n    return `Particle: ${this[0]} ${this[1]} | previous ${this._prev[0]} ${this._prev[1]} | mass ${this._mass}`;\n  }\n};\nvar Body = class extends Group {\n  constructor() {\n    super();\n    this._cs = [];\n    this._stiff = 1;\n    this._locks = {};\n    this._mass = 1;\n  }\n  static fromGroup(body, stiff = 1, autoLink = true, autoMass = true) {\n    let b = new Body().init(body);\n    if (autoLink)\n      b.linkAll(stiff);\n    if (autoMass)\n      b.autoMass();\n    return b;\n  }\n  init(body, stiff = 1) {\n    let c = new Pt();\n    for (let li of body) {\n      let p = new Particle(li);\n      p.body = this;\n      c.add(li);\n      this.push(p);\n    }\n    this._stiff = stiff;\n    return this;\n  }\n  get mass() {\n    return this._mass;\n  }\n  set mass(m) {\n    this._mass = m;\n    for (let i = 0, len = this.length; i < len; i++) {\n      this[i].mass = this._mass;\n    }\n  }\n  autoMass() {\n    this.mass = Math.sqrt(Polygon.area(this)) / 10;\n    return this;\n  }\n  link(index1, index2, stiff) {\n    if (index1 < 0 || index1 >= this.length)\n      throw new Error(\"index1 is not in the Group's indices\");\n    if (index2 < 0 || index2 >= this.length)\n      throw new Error(\"index1 is not in the Group's indices\");\n    let d = this[index1].$subtract(this[index2]).magnitude();\n    this._cs.push([index1, index2, d, stiff || this._stiff]);\n    return this;\n  }\n  linkAll(stiff) {\n    let half = this.length / 2;\n    for (let i = 0, len = this.length; i < len; i++) {\n      let n = i >= len - 1 ? 0 : i + 1;\n      this.link(i, n, stiff);\n      if (len > 4) {\n        let nd = Math.floor(half / 2) + 1;\n        let n2 = i >= len - nd ? i % len : i + nd;\n        this.link(i, n2, stiff);\n      }\n      if (i <= half - 1) {\n        this.link(i, Math.min(this.length - 1, i + Math.floor(half)));\n      }\n    }\n  }\n  linksToLines() {\n    let gs = [];\n    for (let i = 0, len = this._cs.length; i < len; i++) {\n      let ln = this._cs[i];\n      gs.push(new Group(this[ln[0]], this[ln[1]]));\n    }\n    return gs;\n  }\n  processEdges() {\n    for (let i = 0, len = this._cs.length; i < len; i++) {\n      let [m, n, d, s] = this._cs[i];\n      World.edgeConstraint(this[m], this[n], d, s);\n    }\n  }\n  processBody(b) {\n    let b1 = this;\n    let b2 = b;\n    let hit = Polygon.hasIntersectPolygon(b1, b2);\n    if (hit) {\n      let cv = hit.normal.$multiply(hit.dist);\n      let t;\n      let eg = hit.edge;\n      if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n        t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n      } else {\n        t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n      }\n      let lambda = 1 / (t * t + (1 - t) * (1 - t));\n      let m0 = hit.vertex.body.mass || 1;\n      let m1 = hit.edge[0].body.mass || 1;\n      let mr0 = m0 / (m0 + m1);\n      let mr1 = m1 / (m0 + m1);\n      eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n      eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n      hit.vertex.add(cv.$multiply(mr1));\n    }\n  }\n  processParticle(b) {\n    let b1 = this;\n    let b2 = b;\n    let hit = Polygon.hasIntersectCircle(b1, Circle.fromCenter(b, b.radius));\n    if (hit) {\n      let cv = hit.normal.$multiply(hit.dist);\n      let t;\n      let eg = hit.edge;\n      if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n        t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n      } else {\n        t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n      }\n      let lambda = 1 / (t * t + (1 - t) * (1 - t));\n      let m0 = hit.vertex.mass || b2.mass || 1;\n      let m1 = hit.edge[0].body.mass || 1;\n      let mr0 = m0 / (m0 + m1);\n      let mr1 = m1 / (m0 + m1);\n      eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n      eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n      let c1 = b.changed.add(cv.$multiply(mr1));\n      b.previous = b.$subtract(c1);\n    }\n  }\n};\n\n// src/Play.ts\nvar Tempo = class {\n  constructor(bpm) {\n    this._listeners = {};\n    this._listenerInc = 0;\n    this.bpm = bpm;\n  }\n  static fromBeat(ms) {\n    return new Tempo(6e4 / ms);\n  }\n  get bpm() {\n    return this._bpm;\n  }\n  set bpm(n) {\n    this._bpm = n;\n    this._ms = 6e4 / this._bpm;\n  }\n  get ms() {\n    return this._ms;\n  }\n  set ms(n) {\n    this._bpm = Math.floor(6e4 / n);\n    this._ms = 6e4 / this._bpm;\n  }\n  _createID(listener) {\n    let id = \"\";\n    if (typeof listener === \"function\") {\n      id = \"_b\" + this._listenerInc++;\n    } else {\n      id = listener.name || \"_b\" + this._listenerInc++;\n    }\n    return id;\n  }\n  every(beats) {\n    let self = this;\n    let p = Array.isArray(beats) ? beats[0] : beats;\n    return {\n      start: function(fn, offset = 0, name) {\n        let id = name || self._createID(fn);\n        self._listeners[id] = { name: id, beats, period: p, index: 0, offset, duration: -1, continuous: false, fn };\n        return this;\n      },\n      progress: function(fn, offset = 0, name) {\n        let id = name || self._createID(fn);\n        self._listeners[id] = { name: id, beats, period: p, index: 0, offset, duration: -1, continuous: true, fn };\n        return this;\n      }\n    };\n  }\n  track(time) {\n    for (let k in this._listeners) {\n      if (this._listeners.hasOwnProperty(k)) {\n        let li = this._listeners[k];\n        let _t = li.offset ? time + li.offset : time;\n        let ms = li.period * this._ms;\n        let isStart = false;\n        if (_t > li.duration + ms) {\n          li.duration = _t - _t % this._ms;\n          if (Array.isArray(li.beats)) {\n            li.index = (li.index + 1) % li.beats.length;\n            li.period = li.beats[li.index];\n          }\n          isStart = true;\n        }\n        let count = Math.max(0, Math.ceil(Math.floor(li.duration / this._ms) / li.period));\n        let params = li.continuous ? [count, Num.clamp((_t - li.duration) / ms, 0, 1), _t, isStart] : [count];\n        if (li.continuous || isStart) {\n          let done = li.fn.apply(li, params);\n          if (done)\n            delete this._listeners[li.name];\n        }\n      }\n    }\n  }\n  stop(name) {\n    if (this._listeners[name])\n      delete this._listeners[name];\n  }\n  animate(time, ftime) {\n    this.track(time);\n  }\n  resize(bound, evt) {\n    return;\n  }\n  action(type, px, py, evt) {\n    return;\n  }\n};\nvar Sound = class {\n  constructor(type) {\n    this._playing = false;\n    this._type = type;\n    let _ctx = window.AudioContext || window.webkitAudioContext || false;\n    if (!_ctx)\n      throw new Error(\"Your browser doesn't support Web Audio. (No AudioContext)\");\n    this._ctx = _ctx ? new _ctx() : void 0;\n  }\n  static from(node, ctx, type = \"gen\", stream) {\n    let s = new Sound(type);\n    s._node = node;\n    s._ctx = ctx;\n    if (stream)\n      s._stream = stream;\n    return s;\n  }\n  static load(source, crossOrigin = \"anonymous\") {\n    return new Promise((resolve, reject) => {\n      let s = new Sound(\"file\");\n      s._source = typeof source === \"string\" ? new Audio(source) : source;\n      s._source.autoplay = false;\n      s._source.crossOrigin = crossOrigin;\n      s._source.addEventListener(\"ended\", function() {\n        s._playing = false;\n      });\n      s._source.addEventListener(\"error\", function() {\n        reject(\"Error loading sound\");\n      });\n      s._source.addEventListener(\"canplaythrough\", function() {\n        s._node = s._ctx.createMediaElementSource(s._source);\n        resolve(s);\n      });\n    });\n  }\n  static loadAsBuffer(url) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n      request.open(\"GET\", url, true);\n      request.responseType = \"arraybuffer\";\n      let s = new Sound(\"file\");\n      request.onload = function() {\n        s._ctx.decodeAudioData(request.response, function(buffer) {\n          s.createBuffer(buffer);\n          resolve(s);\n        }, (err) => reject(\"Error decoding audio\"));\n      };\n      request.send();\n    });\n  }\n  createBuffer(buf) {\n    this._node = this._ctx.createBufferSource();\n    if (buf !== void 0)\n      this._buffer = buf;\n    this._node.buffer = this._buffer;\n    this._node.onended = () => {\n      this._playing = false;\n    };\n    return this;\n  }\n  static generate(type, val) {\n    let s = new Sound(\"gen\");\n    return s._gen(type, val);\n  }\n  _gen(type, val) {\n    this._node = this._ctx.createOscillator();\n    let osc = this._node;\n    osc.type = type;\n    if (type === \"custom\") {\n      osc.setPeriodicWave(val);\n    } else {\n      osc.frequency.value = val;\n    }\n    return this;\n  }\n  static async input(constraint) {\n    try {\n      let s = new Sound(\"input\");\n      if (!s)\n        return void 0;\n      const c = constraint ? constraint : { audio: true, video: false };\n      s._stream = await navigator.mediaDevices.getUserMedia(c);\n      s._node = s._ctx.createMediaStreamSource(s._stream);\n      return s;\n    } catch (e) {\n      console.error(\"Cannot get audio from input device.\");\n      return Promise.resolve(null);\n    }\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  get node() {\n    return this._node;\n  }\n  get outputNode() {\n    return this._outputNode;\n  }\n  get stream() {\n    return this._stream;\n  }\n  get source() {\n    return this._source;\n  }\n  get buffer() {\n    return this._buffer;\n  }\n  set buffer(b) {\n    this._buffer = b;\n  }\n  get type() {\n    return this._type;\n  }\n  get playing() {\n    return this._playing;\n  }\n  get progress() {\n    let dur = 0;\n    let curr = 0;\n    if (!!this._buffer) {\n      dur = this._buffer.duration;\n      curr = this._timestamp ? this._ctx.currentTime - this._timestamp : 0;\n    } else {\n      dur = this._source.duration;\n      curr = this._source.currentTime;\n    }\n    return curr / dur;\n  }\n  get playable() {\n    return this._type === \"input\" ? this._node !== void 0 : !!this._buffer || this._source.readyState === 4;\n  }\n  get binSize() {\n    return this.analyzer.size;\n  }\n  get sampleRate() {\n    return this._ctx.sampleRate;\n  }\n  get frequency() {\n    return this._type === \"gen\" ? this._node.frequency.value : 0;\n  }\n  set frequency(f) {\n    if (this._type === \"gen\")\n      this._node.frequency.value = f;\n  }\n  connect(node) {\n    this._node.connect(node);\n    return this;\n  }\n  setOutputNode(outputNode) {\n    this._outputNode = outputNode;\n    return this;\n  }\n  removeOutputNode() {\n    this._outputNode = null;\n    return this;\n  }\n  analyze(size = 256, minDb = -100, maxDb = -30, smooth = 0.8) {\n    let a = this._ctx.createAnalyser();\n    a.fftSize = size * 2;\n    a.minDecibels = minDb;\n    a.maxDecibels = maxDb;\n    a.smoothingTimeConstant = smooth;\n    this.analyzer = {\n      node: a,\n      size: a.frequencyBinCount,\n      data: new Uint8Array(a.frequencyBinCount)\n    };\n    this._node.connect(this.analyzer.node);\n    return this;\n  }\n  _domain(time) {\n    if (this.analyzer) {\n      if (time) {\n        this.analyzer.node.getByteTimeDomainData(this.analyzer.data);\n      } else {\n        this.analyzer.node.getByteFrequencyData(this.analyzer.data);\n      }\n      return this.analyzer.data;\n    }\n    return new Uint8Array(0);\n  }\n  _domainTo(time, size, position = [0, 0], trim = [0, 0]) {\n    let data = time ? this.timeDomain() : this.freqDomain();\n    let g = new Group();\n    for (let i = trim[0], len = data.length - trim[1]; i < len; i++) {\n      g.push(new Pt(position[0] + size[0] * i / len, position[1] + size[1] * data[i] / 255));\n    }\n    return g;\n  }\n  timeDomain() {\n    return this._domain(true);\n  }\n  timeDomainTo(size, position = [0, 0], trim = [0, 0]) {\n    return this._domainTo(true, size, position, trim);\n  }\n  freqDomain() {\n    return this._domain(false);\n  }\n  freqDomainTo(size, position = [0, 0], trim = [0, 0]) {\n    return this._domainTo(false, size, position, trim);\n  }\n  reset() {\n    this.stop();\n    this._node.disconnect();\n    return this;\n  }\n  start(timeAt = 0) {\n    if (this._ctx.state === \"suspended\")\n      this._ctx.resume();\n    if (this._type === \"file\") {\n      if (!!this._buffer) {\n        this._node.start(timeAt);\n        this._timestamp = this._ctx.currentTime + timeAt;\n      } else {\n        this._source.play();\n        if (timeAt > 0)\n          this._source.currentTime = timeAt;\n      }\n    } else if (this._type === \"gen\") {\n      this._gen(this._node.type, this._node.frequency.value);\n      this._node.start();\n      if (this.analyzer)\n        this._node.connect(this.analyzer.node);\n    }\n    (this._outputNode || this._node).connect(this._ctx.destination);\n    this._playing = true;\n    return this;\n  }\n  stop() {\n    if (this._playing)\n      (this._outputNode || this._node).disconnect(this._ctx.destination);\n    if (this._type === \"file\") {\n      if (!!this._buffer) {\n        if (this.progress < 1)\n          this._node.stop();\n      } else {\n        this._source.pause();\n      }\n    } else if (this._type === \"gen\") {\n      this._node.stop();\n    } else if (this._type === \"input\") {\n      this._stream.getAudioTracks().forEach((track) => track.stop());\n    }\n    this._playing = false;\n    return this;\n  }\n  toggle() {\n    if (this._playing) {\n      this.stop();\n    } else {\n      this.start();\n    }\n    return this;\n  }\n};\nexport {\n  Body,\n  Bound,\n  CanvasForm,\n  CanvasSpace2 as CanvasSpace,\n  Circle,\n  Color,\n  Const,\n  Create,\n  Curve,\n  DOMSpace,\n  Delaunay,\n  Font,\n  Form,\n  Geom,\n  Group,\n  HTMLForm,\n  HTMLSpace,\n  Img,\n  Line,\n  Mat,\n  MultiTouchSpace,\n  Noise,\n  Num,\n  Particle,\n  Polygon,\n  Pt,\n  Range,\n  Rectangle,\n  SVGForm,\n  SVGSpace,\n  Shaping,\n  Sound,\n  Space,\n  Tempo,\n  Triangle,\n  Typography,\n  UI,\n  UIButton,\n  UIDragger,\n  UIPointerActions,\n  UIShape,\n  Util,\n  Vec,\n  VisualForm,\n  World\n};\n/*! Pts.js is licensed under Apache License 2.0. Copyright  2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\n","import { CanvasForm, CanvasSpace, Pt, Rectangle } from \"pts\";\r\n\r\nexport class GraphRenderer {\r\n  space: CanvasSpace;\r\n  form: CanvasForm;\r\n\r\n  view: GraphView;\r\n\r\n  margins: Margins;\r\n  resolution: number = 100;\r\n\r\n  constructor(elem: string | Element, margins?: Margins) {\r\n    this.margins = margins ?? new Margins(50);\r\n\r\n    this.space = new CanvasSpace(elem);\r\n    this.space.setup({ bgcolor: \"#111\" });\r\n    this.space.add({\r\n      animate: () => this.animate(),\r\n      action: (type, px, py, evt) => this.action(type, px, py, evt),\r\n    });\r\n\r\n    this.form = this.space.getForm();\r\n\r\n    this.view = new GraphView(this.space, this.margins);\r\n\r\n    this.space.bindMouse().bindTouch().play();\r\n  }\r\n\r\n  animate() {\r\n    let [space, form] = [this.space, this.form];\r\n    this.view = new GraphView(this.space, this.margins);\r\n\r\n    let step = 1 / (this.resolution - 1);\r\n    let pts = [];\r\n    for (let i = 0; i < this.resolution; i++) {\r\n      let x = i * step * this.view.viewSize.x + this.view.viewPos.x;\r\n      x = this.view.viewToGraphX(x);\r\n      let y = x;\r\n\r\n      pts.push(this.view.graphToView(new Pt(x, y)));\r\n    }\r\n\r\n    form.fillOnly(\"#fff\").points(pts, 2, \"circle\");\r\n\r\n    let lines = [];\r\n    for (let i = 1; i < pts.length; i++) {\r\n      lines.push([pts[i - 1], pts[i]]);\r\n    }\r\n\r\n    form.strokeOnly(\"#fff\").lines(lines);\r\n\r\n    form.rect(Rectangle.fromTopLeft(this.view.viewPos, this.view.viewSize));\r\n\r\n    let tickStepX = this.view.graphSize\r\n  }\r\n\r\n  action(type: string, px: number, py: number, evt: Event) {}\r\n}\r\n\r\nexport class Margins {\r\n  left: number = 0;\r\n  top: number = 0;\r\n  right: number = 0;\r\n  bottom: number = 0;\r\n\r\n  constructor(\r\n    allOrLeftRightOrLeft?: number,\r\n    topBottomOrTop?: number,\r\n    right?: number,\r\n    bottom?: number\r\n  ) {\r\n    if (allOrLeftRightOrLeft == undefined) {\r\n      return;\r\n    }\r\n\r\n    if (topBottomOrTop == undefined) {\r\n      this.left = allOrLeftRightOrLeft;\r\n      this.right = allOrLeftRightOrLeft;\r\n      this.top = allOrLeftRightOrLeft;\r\n      this.bottom = allOrLeftRightOrLeft;\r\n      return;\r\n    }\r\n\r\n    if (right == undefined) {\r\n      this.left = allOrLeftRightOrLeft;\r\n      this.right = allOrLeftRightOrLeft;\r\n      this.top = topBottomOrTop;\r\n      this.bottom = topBottomOrTop;\r\n      return;\r\n    }\r\n\r\n    this.left = allOrLeftRightOrLeft;\r\n    this.top = topBottomOrTop;\r\n    this.right = right;\r\n    this.bottom = bottom ?? 0;\r\n  }\r\n}\r\n\r\nexport class GraphView {\r\n  viewPos: Pt = new Pt();\r\n  viewSize: Pt = new Pt();\r\n  graphPos: Pt = new Pt();\r\n  graphSize: Pt = new Pt();\r\n\r\n  constructor(space: CanvasSpace, margins: Margins) {\r\n    this.viewPos = new Pt(margins.left, margins.top);\r\n    this.viewSize = space.size.$subtract(\r\n      new Pt(margins.left + margins.right, margins.top + margins.bottom)\r\n    );\r\n    this.graphPos = new Pt(0, 0);\r\n    this.graphSize = new Pt(1, 1);\r\n  }\r\n\r\n  viewToGraph(pt: Pt): Pt {\r\n    let normalized = pt.$subtract(this.viewPos).$divide(this.viewSize);\r\n    normalized.y = 1 - normalized.y;\r\n    return normalized.$multiply(this.graphSize).$add(this.graphPos);\r\n  }\r\n\r\n  viewToGraphX(x: number): number {\r\n    return this.viewToGraph(new Pt(x, 0)).x;\r\n  }\r\n\r\n  graphToView(pt: Pt): Pt {\r\n    let normalized = pt.$subtract(this.graphPos).$divide(this.graphSize);\r\n    normalized.y = 1 - normalized.y;\r\n    return normalized.$multiply(this.viewSize).$add(this.viewPos);\r\n  }\r\n}\r\n","import \"./index.scss\";\r\n\r\nimport { Component, ComponentChild, render } from \"preact\";\r\nimport { GraphRenderer } from \"./graph\";\r\n\r\nfunction damageFactor(armor: number): number {\r\n  return 1 - (0.06 * armor) / (1 + 0.06 * Math.abs(armor));\r\n}\r\n\r\ninterface GraphProps {\r\n  /** IMPORTANT: The name for each graph must be unique */\r\n  name: string;\r\n  width?: number;\r\n  height?: number;\r\n}\r\n\r\ninterface GraphState {\r\n  renderer: GraphRenderer;\r\n}\r\n\r\nclass Graph extends Component<GraphProps, GraphState> {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    let renderer = new GraphRenderer(`${this.props.name}-canvas`);\r\n    this.setState({ renderer });\r\n  }\r\n\r\n  render(\r\n    props?: Readonly<GraphProps>,\r\n    state?: Readonly<GraphState>,\r\n    context?: any\r\n  ): ComponentChild {\r\n    let width = props.width ?? 1000;\r\n    let height = props.height ?? 600;\r\n\r\n    return (\r\n      <div style={{ width, height, margin: \"auto\" }}>\r\n        <canvas id={`${props.name}-canvas`} width={width} height={height} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nlet App = (\r\n  <>\r\n    <Graph name=\"test\" />\r\n  </>\r\n);\r\n\r\nrender(App, document.getElementById(\"app\"));\r\n"],"names":["slice","options","vnodeId","rerenderQueue","prevDebounce","defer","depthSort","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","isArray","Array","assign","obj","props","i","removeNode","node","parentNode","removeChild","createVNode","type","key","ref","original","vnode","__k","__","__b","__e","__d","__c","__h","constructor","__v","Fragment","children","Component","context","this","getDomSibling","childIndex","indexOf","sibling","length","updateParentDomPointers","child","base","enqueueRender","c","push","process","__r","debounceRendering","renderQueueLength","component","commitQueue","oldVNode","oldDom","parentDom","sort","shift","__P","diff","__n","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","oldChildrenLength","reorderChildren","placeChild","getLastDom","nextSibling","unmount","applyRef","tmp","nextDom","sibDom","outer","appendChild","insertBefore","lastDom","setStyle","style","value","setProperty","test","dom","name","oldValue","useCapture","o","cssText","replace","toLowerCase","l","addEventListener","eventProxyCapture","eventProxy","removeEventListener","e","removeAttribute","setAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","count","newType","contextType","__E","prototype","render","doRender","sub","state","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","call","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","hydrate","diffProps","checked","diffElementNodes","diffed","root","some","cb","current","parentVNode","skipRemove","r","componentWillUnmount","replaceNode","normalizedProps","arguments","defaultProps","firstChild","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","then","bind","resolve","setTimeout","a","b","isStaticChildren","__source","__self","$2ffc953bcfc25486$export$e947a0f742cf021e","static","len","Error","toString","d","$2ffc953bcfc25486$export$87c2e215ad25c73d","Math","sqrt","dot","magnitude","m","make","divide","map","abs","floor","ceil","round","Number","MIN_VALUE","index","max","MAX_VALUE","min","fn","$2ffc953bcfc25486$export$ea3ee4566031452e","reset","_33","domMatrix","DOMMatrix","toDOMMatrix","scale2DMatrix","scale2D","val","at","scaleAt2DMatrix","multiply","rotate2D","ang","rotateAt2DMatrix","cos","sin","translate2D","translate2DMatrix","shear2D","shearAt2DMatrix","tan","g","$2ffc953bcfc25486$export$eb2fcfdbd7ba97d4","isNum","$add","transposed","elementwise","ai","alen","$multiply","transpose","p","bi","blen","defaultValue","z","useLongest","ps","reduce","zipSlice","zip","pt","x","y","cosA","sinA","tanX","tanY","sx","sy","rotate2DMatrix","shear2DMatrix","p1","p2","intercept","$2ffc953bcfc25486$export$17d680238e50603e","yi","ang2","atan","slope","$2ffc953bcfc25486$var$_errorLength","param","$2ffc953bcfc25486$export$f8f26dd395d7e1bd","warn","anchor","angle","toAngle","xi","line","_line","iterToArray","p3","threshold","to","$subtract","$cross","equals","magnitudeSq","asProjection","proj","$project","projectionVector","perpendicularFromPt","la","lb","_la","_lb","pa","pb","y1","px","py","intersectRay2D","$2ffc953bcfc25486$export$5fee5224a8e5ae6c","withinBound","ray","_ray","lineOrRay","poly","sourceIsRay","_lineOrRay","_poly","intersectLineWithRay2D","intersectLine2D","pts","next","lines1","lines2","isRay","group","l1","l2","_ip","gridPt","t","subtract","intersectGridWithRay2D","gg","rect","_rect","box","boundingBox","fromPtArray","$2ffc953bcfc25486$export$4617fb02663045ef","hasIntersectRect2D","intersectLines2D","sides","num","interpolate","size","cropAsCircle","ls","unit","fromCenter","sideIdx","graphic","atTail","perpendicular","add","$min","$max","topLeft","widthOrSize","height","fromTopLeft","center","half","within","$2ffc953bcfc25486$export$c89a927ffc67e6fa","fromRect","enclose","_pts","maxValue","minValue","p0","corners","rects","_rects","merged","flatten","k","_center","ratio","asRows","mid","$2ffc953bcfc25486$export$abd05ea5e3f1332","lerp","rect1","rect2","resetBoundingBox","_rect1","_rect2","$2ffc953bcfc25486$export$5a465592bfe74b48","circumcircle","incircle","radius","circle","f","disc","discSqrt","t1","t2","circle1","circle2","_circle","dv","dr2","dr","ar","br","ar2","br2","clone","h","PI","inc","top","left","toTriangle","fromCircle","tri","$2ffc953bcfc25486$export$7d31b617c820d435","midpoints","opp","oppositeSide","altitude","bisector","incenter","area","perimeter","total","md","medial","circumcenter","centroid","closePath","sp","split","lines","$2ffc953bcfc25486$var$_errorOutofBound","gs","right","adjacentSides","mag","segments","det","sorted","dq","bot","hull","originIndex","_near","_item","unitAxis","n","poly1","poly2","projectAxis","ln","lineAt","info","which","dist","normal","edge","vertex","minDist","MAX_SAFE_INTEGER","axis","_axisOverlap","_poly1","_poly2","plen","b1","b2","c1","c2","smallest","lp","ins","intersectPolygon2D","polys","boxes","unshift","$2ffc953bcfc25486$export$b0e83c3ef8d2db1","steps","ts","copyStart","_index","ctrls","params","getSteps","controlPoints","catmullRomStep","cp","step","_calcPt","tension","cardinalStep","h2","h3","bezierStep","bsplineTensionStep","bsplineStep","random","range","start","fill","sum","method","$2ffc953bcfc25486$export$e0e0ff05bff0f59e","sineInOut","currA","currB","targetA","targetB","normalizeValue","seed","generator","mash","charCodeAt","initState","inStr","cleanString","hashString","$2ffc953bcfc25486$var$uheprng_default","boundValue","radian","$2ffc953bcfc25486$export$8ad5d15375e29446","two_pi","deg_to_rad","rad_to_deg","minPt","maxPt","average","ptOrIndex","direction","xy","boundPt1","boundPt2","bounds","da","db","$cross2D","scale","scs","lenP","$take","transform2D","tanx","tany","mat","reflectAt2DMatrix","Float64Array","table","rad","boundAngle","toDegree","dt","pow","half_pi","t4","bounceOut","bounceIn","exp","epsilon","A","B","om2a","curve","args","yz","xz","xyz","horizontal","vertical","identical","bottom_right","bottom","bottom_left","top_left","top_right","pi","quarter_pi","one_degree","gravity","newton","gaussian","$2ffc953bcfc25486$var$_Util","lv","_warnLevel","pos","ArrayBuffer","isView","message","defaultReturn","warnLevel","console","stride","loopBack","matchSize","chunks","part","st","flattenAsGroup","arr","concat","apply","op","result","lenB","arrays","temp","url","request","XMLHttpRequest","open","onload","status","responseText","onerror","send","space","filename","filetype","quality","ftype","element","toBlob","blob","link","URL","createObjectURL","href","download","body","click","revokeObjectURL","avgFrames","last","Date","now","avg","minRequired","it","navigator","userAgent","Float32Array","__super","super","getArgs","dimensions","randomize","id","_id","w","$to","anchorFromPt","change","self","ops","fns","_ops","$concat","toArray","$divide","$unit","cross2D","cross","projectScalar","$abs","$floor","$ceil","$round","atan2","angleBetween","boundRadian","reflect2D","join","toGroup","toBound","$2ffc953bcfc25486$export$8d620acac236ffa9","p4","q1","q2","q3","q4","list","li","from","chunkSize","insert","splice","remove","pts_per_segment","anchorTo","anchorFrom","clamp","chunk","tc","idx","moveBy","moveTo","sortByDimension","dim","desc","forEachPt","ptFn","$matrixAdd","$matrixMultiply","$zip","fromGroup","_size","_topLeft","_bottomRight","_inited","init","width","_g","_updateSize","_updateCenter","_updatePosFromTop","_updatePosFromBottom","_updatePosFromCenter","bottomRight","depth","inited","$2ffc953bcfc25486$export$d30982023723c3b4","$2ffc953bcfc25486$export$f6e0ff9e4b92eee3","up","down","move","drag","uidrag","drop","uidrop","over","out","enter","leave","keydown","keyup","contextmenu","all","$2ffc953bcfc25486$var$_UI","shape","states","_holds","Map","_group","fromArray","_shape","_counter","_states","_actions","ui","on","_addHandler","off","_removeHandler","listen","evt","_within","values","_trigger","hold","newKey","keys","set","unhold","delete","clear","uis","hasIntersectPoint","target","$2ffc953bcfc25486$export$4b08aed5f1ec6952","$2ffc953bcfc25486$export$eef1e68107c58ef2","bound","_time","prev","end","players","playerCount","_animID","_pause","_refresh","_pointer","_isReady","_playing","refresh","minFrameTime","ms","player","animate","pid","animateID","resize","removeAll","play","time","requestAnimationFrame","playItems","err","cancelAnimationFrame","replay","pause","toggle","resume","stop","playOnce","duration","_renderFunc","customRendering","isPlaying","outerBound","innerBound","$2ffc953bcfc25486$export$d246957a0a7cf810","_pressed","_dragged","_hasMouse","_hasTouch","_hasKeyboard","pointer","bindCanvas","customTarget","_canvas","unbindCanvas","bindDoc","unbindDoc","bindMouse","_mouseDown","_mouseUp","_mouseOver","_mouseOut","_mouseMove","_mouseClick","_contextMenu","bindTouch","passive","_touchStart","_touchMove","bindKeyboard","_keyDownBind","_keyDown","_keyUpBind","_keyUp","touchesToPoints","item","pageX","pageY","_mouseAction","MouseEvent","hasOwnProperty","v","action","changedTouches","touch","preventDefault","_keyboardAction","shiftKey","altKey","$2ffc953bcfc25486$export$a7fed597f4b8afd8","_ready","ready","$2ffc953bcfc25486$export$b00bfd2e034c5633","_filled","_stroked","_font","$2ffc953bcfc25486$export$89abf52a030e56ee","filled","stroked","currentFont","_multiple","groups","rest","alpha","fillOnly","stroke","linejoin","linecap","strokeOnly","points","point","circles","squares","polygons","face","weight","lineHeight","$2ffc953bcfc25486$export$1c6175f3aa4394b7","samples","distribution","str","tail","trim","substr","byHeight","box2","bound2","nh","defaultSize","$2ffc953bcfc25486$export$cc7b5f925acc71d3","editable","crossOrigin","_scale","_loaded","_editable","_space","pixelScale","_img","Image","src","img","load","res","repeat","loadAsync","pattern","initCanvas","reject","_cv","_drawToScale","_data","_ctx","getImageData","canvasScale","nw","drawImage","cms","getContext","bitmap","createImageBitmap","reptition","dynamic","ctx","createPattern","sync","toBase64","pixel","rescale","getPixel","imgData","no","sizeOrScale","asScale","naturalWidth","naturalHeight","crop","filter","css","cleanup","cv","putImageData","toDataURL","getForm","$2ffc953bcfc25486$export$f3413f5849e886b7","image","canvas","loaded","imageSize","canvasSize","scaledMatrix","$2ffc953bcfc25486$export$6fd0006d1169ab92","elem","_pixelScale","_autoResize","_bgcolor","_offscreen","_initialResize","_selector","Element","querySelector","nodeName","_container","_createElement","parentElement","_resizeHandler","dispatchEvent","Event","setup","opt","bgcolor","autoResize","retina","r1","window","devicePixelRatio","r2","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","offscreen","_offCanvas","_offCtx","pixelDensity","auto","getBoundingClientRect","fromBoundingRect","pageXOffset","pageYOffset","background","bg","hasOffscreen","offscreenCtx","offscreenCanvas","parent","lastColor","fillStyle","clearRect","fillRect","clearOffscreen","save","restore","dispose","recorder","downloadOrCallback","bitrate","stream","captureStream","MediaRecorder","mimeType","bitsPerSecond","ondataavailable","Blob","_style","strokeStyle","lineWidth","lineJoin","lineCap","globalAlpha","_setup","font","CanvasRenderingContext2D","useOffscreen","renderOffscreen","offset","applyFillStroke","strokeWidth","gradient","stops","vals","area1","area2","grad","createRadialGradient","createLinearGradient","addColorStop","composite","mode","globalCompositeOperation","clip","dash","setLineDash","lineDashOffset","sizeOrFont","family","_estimateTextWidth","fontWidthEstimate","estimate","textWidthEstimator","measureText","getTextWidth","_textTruncate","truncate","_textAlign","_box","arrayCheck","textAlign","_paint","beginPath","arc","rotation","startAngle","endAngle","cc","ellipse","halfsize","x1","x2","y2","lineTo","square","polygon","ptOrRect","orig","imageData","txt","maxWidth","fillText","text","textBox","verticalAlign","overrideBaseline","textBaseline","paragraphBox","lstep","nextLine","buffer","newln","lastIndexOf","lsize","lbox","lpad","alignText","alignment","baseline","log","$2ffc953bcfc25486$var$_Color","_mode","_isNorm","hex","substring","hexVal","parseInt","toMode","ranges","rgb","rgba","convert","fname","toUpperCase","u","normalized","normalize","toNorm","mapToRange","$normalize","format","_hex","normalizedInput","normalizedOutput","hsl","q","sc","hsb","XYZtoLAB","RGBtoXYZ","lab","XYZtoRGB","LABtoXYZ","LABtoLCH","RGBtoLAB","lch","LABtoRGB","LCHtoLAB","XYZtoLUV","luv","LUVtoXYZ","D65","cy","eps","kap","xxx","zzz","refU","refV","L","cubeY","toRadian","$2ffc953bcfc25486$export$892596cec99bc70e","$2ffc953bcfc25486$export$ac9b7cebffc1b4b7","_css","appendTo","styles","backgroundColor","$2ffc953bcfc25486$export$2a5547199b8194f0","$2ffc953bcfc25486$export$b8c44462414bfc41","autoClass","querySelectorAll","scopeID","el","$2ffc953bcfc25486$var$_HTMLForm","color","opacity","position","groupID","groupCount","currentID","currentClass","Object","styleTo","cls","updateScope","group_id","nextID","scope","domID","setAttr","htmlElement","getID","class","rectStyle","textContent","textStyle","$2ffc953bcfc25486$export$8d3af878826383c6","svgElement","$2ffc953bcfc25486$export$970c0cf64cfb2cf6","viewBox","xmlns","version","$2ffc953bcfc25486$var$_SVGForm","cx","largeArc","sweep","pointsString","string","dx","dy","$b41f3624b733da56$export$5395d82bfc7f1b2","resolution","margins","$b41f3624b733da56$export$8b41a899820e47d6","form","view","$b41f3624b733da56$export$6a7fe3ef90e8d566","viewSize","viewPos","viewToGraphX","graphToView","graphSize","allOrLeftRightOrLeft","topBottomOrTop","undefined","graphPos","viewToGraph","$70fc9a727fa662ae$var$Graph","$289df07316d49383$export$16fa2f45be04daa8","renderer","$fe2e5d3357f69686$export$34b9dba7ce09269b","margin","$289df07316d49383$export$b3890eb0ae9dca99","$289df07316d49383$export$ffb0004e005737fa","getElementById"],"version":3,"file":"index.51a39543.js.map"}